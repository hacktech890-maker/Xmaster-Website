"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[802],{8227(e,a,s){s.d(a,{A:()=>d});var r=s(5043),t=s(6305),l=s(6047),c=s(579);const d=e=>{let{placement:a,className:s=""}=e;const[d,i]=(0,r.useState)(null),[n,o]=(0,r.useState)(!0),g=(0,r.useRef)(null),m=(0,r.useRef)(!1);(0,r.useEffect)(()=>{(async()=>{try{const e=(0,l.ZI)(),s=await t.G.getAdByPlacement(a,e);s.data.success&&s.data.ad&&i(s.data.ad)}catch(e){console.error("Failed to fetch ad:",e)}finally{o(!1)}})()},[a]),(0,r.useEffect)(()=>{if(!d||m.current)return;const e=new IntersectionObserver(a=>{a[0].isIntersecting&&(t.G.recordAdImpression(d._id),m.current=!0,e.disconnect())},{threshold:.5});return g.current&&e.observe(g.current),()=>e.disconnect()},[d]);return n||!d?null:(0,c.jsx)("div",{ref:g,className:"ad-banner ".concat(s),onClick:()=>{d&&t.G.recordAdClick(d._id)},children:"script"===d.type||"html"===d.type?(0,c.jsx)("div",{dangerouslySetInnerHTML:{__html:d.code}}):"image"===d.type&&d.imageUrl?(0,c.jsx)("a",{href:d.targetUrl,target:"_blank",rel:"noopener noreferrer",children:(0,c.jsx)("img",{src:d.imageUrl,alt:d.name,className:"max-w-full h-auto"})}):(0,c.jsx)("div",{dangerouslySetInnerHTML:{__html:d.code}})})}},4533(e,a,s){s.d(a,{A:()=>c});var r=s(5043),t=s(5772),l=s(579);const c=e=>{let{currentPage:a,totalPages:s,onPageChange:c}=e;if(s<=1)return null;return(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,l.jsx)("button",{onClick:()=>c(a-1),disabled:1===a,className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-200 hover:bg-gray-200 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,l.jsx)(t.irw,{className:"w-5 h-5"})}),(0,l.jsx)("div",{className:"flex items-center gap-1",children:(()=>{const e=[];if(s>7)if(a<=4){for(let a=1;a<=5;a++)e.push(a);e.push("..."),e.push(s)}else if(a>=s-3){e.push(1),e.push("...");for(let a=s-4;a<=s;a++)e.push(a)}else{e.push(1),e.push("...");for(let s=a-1;s<=a+1;s++)e.push(s);e.push("..."),e.push(s)}else for(let a=1;a<=s;a++)e.push(a);return e})().map((e,s)=>(0,l.jsx)(r.Fragment,{children:"..."===e?(0,l.jsx)("span",{className:"px-3 py-2 text-gray-500",children:"..."}):(0,l.jsx)("button",{onClick:()=>c(e),className:"min-w-[40px] h-10 rounded-lg font-medium transition-colors ".concat(a===e?"bg-primary-600 text-white":"bg-gray-100 dark:bg-dark-200 hover:bg-gray-200 dark:hover:bg-dark-100 text-gray-700 dark:text-gray-300"),children:e})},s))}),(0,l.jsx)("button",{onClick:()=>c(a+1),disabled:a===s,className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-200 hover:bg-gray-200 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,l.jsx)(t.fOo,{className:"w-5 h-5"})})]})}},1932(e,a,s){s.d(a,{A:()=>d});s(5043);var r=s(5475),t=s(5772),l=s(6047),c=s(579);const d=e=>{let{video:a,size:s="normal"}=e;if(!a)return null;const{_id:d,title:i,thumbnail:n,views:o,duration:g,uploadDate:m,category:x,slug:h}=a,u={small:{card:"w-full",image:"aspect-video",title:"text-sm line-clamp-2",meta:"text-xs"},normal:{card:"w-full",image:"aspect-video",title:"text-base line-clamp-2",meta:"text-sm"},large:{card:"w-full",image:"aspect-video",title:"text-lg line-clamp-2",meta:"text-sm"}},p=u[s]||u.normal;return(0,c.jsx)(r.N_,{to:"/watch/".concat(d).concat(h?"/".concat(h):""),className:"group block ".concat(p.card),children:(0,c.jsxs)("div",{className:"card card-hover",children:[(0,c.jsxs)("div",{className:"relative ".concat(p.image," bg-gray-200 dark:bg-dark-100 overflow-hidden"),children:[(0,c.jsx)("img",{src:n||"/placeholder-video.jpg",alt:i,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",loading:"lazy",onError:e=>{e.target.src="https://via.placeholder.com/640x360?text=Video"}}),g&&(0,c.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/80 rounded text-white text-xs font-medium flex items-center gap-1",children:[(0,c.jsx)(t.Ohp,{className:"w-3 h-3"}),(0,l.a3)(g)]}),(0,c.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:(0,c.jsx)("div",{className:"w-16 h-16 rounded-full bg-primary-600/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transform scale-75 group-hover:scale-100 transition-all duration-300",children:(0,c.jsx)("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,c.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}),(0,c.jsxs)("div",{className:"p-3",children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-500 transition-colors ".concat(p.title),children:i}),(0,c.jsxs)("div",{className:"mt-2 flex items-center gap-3 text-gray-500 dark:text-gray-400 ".concat(p.meta),children:[(0,c.jsxs)("span",{className:"flex items-center gap-1",children:[(0,c.jsx)(t.Vap,{className:"w-3.5 h-3.5"}),(0,l.OO)(o)," views"]}),(0,c.jsx)("span",{children:"\u2022"}),(0,c.jsx)("span",{children:(0,l.Yq)(m)})]}),x&&(0,c.jsx)("div",{className:"mt-2",children:(0,c.jsx)("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-dark-100 text-gray-600 dark:text-gray-400 rounded-full",children:x.name})})]})]})})}},958(e,a,s){s.d(a,{A:()=>d,F:()=>c});s(5043);var r=s(1932),t=s(6630),l=s(579);const c=e=>{let{count:a=8,columns:s=4}=e;const r={4:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4"};return(0,l.jsx)("div",{className:"grid ".concat(r[s]||r[4]," gap-4 md:gap-6"),children:[...Array(a)].map((e,a)=>(0,l.jsxs)("div",{className:"card animate-pulse",children:[(0,l.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-dark-100"}),(0,l.jsxs)("div",{className:"p-3 space-y-2",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-dark-100 rounded w-3/4"}),(0,l.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-dark-100 rounded w-1/2"})]})]},a))})},d=e=>{let{videos:a=[],loading:s=!1,error:c=null,emptyMessage:d="No videos found",columns:i=4}=e;if(s)return(0,l.jsx)(t.A,{});if(c)return(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-red-500 mb-2",children:"\u26a0\ufe0f"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:c})]});if(!a||0===a.length)return(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfac"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:d})]});const n={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",5:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",6:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"};return(0,l.jsx)("div",{className:"grid ".concat(n[i]||n[4]," gap-4 md:gap-6"),children:a.map(e=>(0,l.jsx)(r.A,{video:e},e._id))})}},802(e,a,s){s.r(a),s.d(a,{default:()=>x});var r=s(5043),t=s(5475),l=s(3216),c=s(1344),d=s(5772),i=s(6305),n=s(958),o=s(4533),g=s(8227),m=s(579);const x=()=>{const[e,a]=(0,t.ok)(),{tag:s}=(0,l.g)(),x=e.get("q")||"",h=e.get("sort")||"relevance",u=e.get("category")||"",p=parseInt(e.get("page"))||1,[v,b]=(0,r.useState)([]),[y,j]=(0,r.useState)(!0),[f,k]=(0,r.useState)({page:1,pages:1,total:0}),[N,w]=(0,r.useState)([]),[_,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{i.G.getCategories().then(e=>{e.data.success&&w(e.data.categories)}).catch(console.error)},[]),(0,r.useEffect)(()=>{(async()=>{j(!0);try{let e;e=s?await i.G.searchByTag(s,{page:p,sort:h,limit:20}):await i.G.searchVideos({q:x,page:p,sort:h,category:u,limit:20}),e.data.success&&(b(e.data.videos),k(e.data.pagination))}catch(e){console.error("Search failed:",e)}finally{j(!1)}})()},[x,h,u,p,s]);const C=e=>{a(a=>(e?a.set("category",e):a.delete("category"),a.set("page","1"),a))},S=s?"#".concat(s," - Tag Results"):x?"Search: ".concat(x):"Browse Videos";return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(c.mg,{children:(0,m.jsxs)("title",{children:[S," - Xmaster"]})}),(0,m.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:[(0,m.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100",children:(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:s?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"text-primary-500",children:"#"}),s]}):x?(0,m.jsxs)(m.Fragment,{children:['Results for "',(0,m.jsx)("span",{className:"text-primary-500",children:x}),'"']}):"Browse Videos"}),(0,m.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[f.total," videos found"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("select",{value:h,onChange:e=>{return s=e.target.value,void a(e=>(e.set("sort",s),e.set("page","1"),e));var s},className:"input-field py-2 pr-8",children:[{value:"relevance",label:"Relevance"},{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"views",label:"Most Viewed"},{value:"likes",label:"Most Liked"}].map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,m.jsx)("button",{onClick:()=>A(!_),className:"sm:hidden p-2 bg-gray-100 dark:bg-dark-200 rounded-lg",children:(0,m.jsx)(d.K7R,{className:"w-5 h-5"})})]})]}),(0,m.jsx)("div",{className:"mt-4 ".concat(_?"block":"hidden sm:block"),children:(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsx)("button",{onClick:()=>C(""),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(u?"bg-gray-100 dark:bg-dark-200 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-100":"bg-primary-600 text-white"),children:"All"}),N.map(e=>(0,m.jsx)("button",{onClick:()=>C(e._id),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(u===e._id?"bg-primary-600 text-white":"bg-gray-100 dark:bg-dark-200 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-100"),children:e.name},e._id))]})})]})}),(0,m.jsx)(g.A,{placement:"search_top",className:"max-w-7xl mx-auto px-4 pt-6"}),(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,m.jsx)(n.A,{videos:v,loading:y,emptyMessage:x?'No videos found for "'.concat(x,'"'):"No videos found"}),(0,m.jsx)(o.A,{currentPage:f.page,totalPages:f.pages,onPageChange:e=>{a(a=>(a.set("page",e.toString()),a)),window.scrollTo({top:0,behavior:"smooth"})}})]})]})]})}}}]);
//# sourceMappingURL=802.98bfe1c8.chunk.js.map