{"version":3,"file":"static/js/50.b63e5fce.chunk.js","mappings":"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","sources":["components/ads/AdBanner.jsx","components/common/Pagination.jsx","components/video/VideoCard.jsx","components/video/VideoGrid.jsx","pages/public/CategoryPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { publicAPI } from '../../services/api';\r\n\r\nconst AdBanner = ({ placement = 'home_top', className = '' }) => {\r\n  const [ad, setAd] = useState(null);\r\n  const adContainerRef = useRef(null);\r\n  const scriptsLoaded = useRef(false);\r\n\r\n  // Fetch ad from backend\r\n  useEffect(() => {\r\n    const fetchAd = async () => {\r\n      try {\r\n        const device = window.innerWidth < 768 ? 'mobile' : 'desktop';\r\n        const response = await publicAPI.getAdByPlacement(placement, device);\r\n        if (response.data?.success && response.data?.ad) {\r\n          setAd(response.data.ad);\r\n          try {\r\n            await publicAPI.recordAdImpression(response.data.ad._id);\r\n          } catch (e) {\r\n            // Silent\r\n          }\r\n        }\r\n      } catch (error) {\r\n        // No ad available\r\n      }\r\n    };\r\n\r\n    fetchAd();\r\n  }, [placement]);\r\n\r\n  // Inject and execute ad scripts\r\n  useEffect(() => {\r\n    if (!ad || !adContainerRef.current || scriptsLoaded.current) return;\r\n\r\n    const container = adContainerRef.current;\r\n    const adCode = ad.code || ad.content || '';\r\n\r\n    if (!adCode.trim()) return;\r\n\r\n    // Clear container\r\n    container.innerHTML = '';\r\n    scriptsLoaded.current = true;\r\n\r\n    // Parse the ad code HTML\r\n    const tempDiv = document.createElement('div');\r\n    tempDiv.innerHTML = adCode;\r\n\r\n    // Separate script tags from other HTML\r\n    const scripts = tempDiv.querySelectorAll('script');\r\n    const nonScriptContent = adCode.replace(/<script[\\s\\S]*?<\\/script>/gi, '');\r\n\r\n    // Add non-script HTML first\r\n    if (nonScriptContent.trim()) {\r\n      const contentDiv = document.createElement('div');\r\n      contentDiv.innerHTML = nonScriptContent;\r\n      container.appendChild(contentDiv);\r\n    }\r\n\r\n    // Execute scripts in order\r\n    scripts.forEach((originalScript) => {\r\n      const newScript = document.createElement('script');\r\n\r\n      // Copy all attributes\r\n      Array.from(originalScript.attributes).forEach((attr) => {\r\n        newScript.setAttribute(attr.name, attr.value);\r\n      });\r\n\r\n      // If script has inline content (like atOptions)\r\n      if (originalScript.textContent) {\r\n        newScript.textContent = originalScript.textContent;\r\n      }\r\n\r\n      // If script has src attribute\r\n      if (originalScript.src) {\r\n        newScript.src = originalScript.src;\r\n        newScript.async = true;\r\n      }\r\n\r\n      container.appendChild(newScript);\r\n    });\r\n\r\n    // Cleanup on unmount\r\n    return () => {\r\n      if (container) {\r\n        container.innerHTML = '';\r\n      }\r\n      scriptsLoaded.current = false;\r\n    };\r\n  }, [ad]);\r\n\r\n  // Reset when placement changes\r\n  useEffect(() => {\r\n    scriptsLoaded.current = false;\r\n  }, [placement]);\r\n\r\n  if (!ad) return null;\r\n\r\n  // For image type ads\r\n  if (ad.type === 'image' || ad.type === 'banner') {\r\n    const imageUrl = ad.imageUrl || ad.image || '';\r\n    const targetUrl = ad.targetUrl || ad.url || ad.link || '#';\r\n\r\n    if (!imageUrl) return null;\r\n\r\n    return (\r\n      <div className={`ad-banner flex justify-center ${className}`}>\r\n        <a\r\n          href={targetUrl}\r\n          target=\"_blank\"\r\n          rel=\"noopener noreferrer nofollow\"\r\n          onClick={async () => {\r\n            try {\r\n              await publicAPI.recordAdClick(ad._id);\r\n            } catch (e) {}\r\n          }}\r\n        >\r\n          <img\r\n            src={imageUrl}\r\n            alt={ad.name || 'Advertisement'}\r\n            className=\"rounded-lg max-w-full\"\r\n            loading=\"lazy\"\r\n          />\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // For script/html type ads\r\n  return (\r\n    <div className={`ad-banner flex justify-center ${className}`}>\r\n      <div ref={adContainerRef} className=\"ad-content\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdBanner;","import React from 'react';\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\n\r\nconst Pagination = ({ currentPage, totalPages, onPageChange }) => {\r\n  if (totalPages <= 1) return null;\r\n\r\n  const getPageNumbers = () => {\r\n    const pages = [];\r\n    const maxVisible = 5;\r\n\r\n    if (totalPages <= maxVisible) {\r\n      for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n    } else {\r\n      pages.push(1);\r\n\r\n      let start = Math.max(2, currentPage - 1);\r\n      let end = Math.min(totalPages - 1, currentPage + 1);\r\n\r\n      if (currentPage <= 3) {\r\n        end = Math.min(4, totalPages - 1);\r\n      }\r\n      if (currentPage >= totalPages - 2) {\r\n        start = Math.max(totalPages - 3, 2);\r\n      }\r\n\r\n      if (start > 2) pages.push('...');\r\n      for (let i = start; i <= end; i++) pages.push(i);\r\n      if (end < totalPages - 1) pages.push('...');\r\n\r\n      pages.push(totalPages);\r\n    }\r\n\r\n    return pages;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center gap-1 sm:gap-2 mt-8\">\r\n      {/* Previous */}\r\n      <button\r\n        onClick={() => onPageChange(currentPage - 1)}\r\n        disabled={currentPage === 1}\r\n        className=\"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n      >\r\n        <FiChevronLeft className=\"w-4 h-4\" />\r\n        <span className=\"hidden sm:inline\">Prev</span>\r\n      </button>\r\n\r\n      {/* Page Numbers */}\r\n      {getPageNumbers().map((page, i) => (\r\n        <React.Fragment key={i}>\r\n          {page === '...' ? (\r\n            <span className=\"px-2 py-2 text-gray-500 text-sm\">...</span>\r\n          ) : (\r\n            <button\r\n              onClick={() => onPageChange(page)}\r\n              className={`min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ${\r\n                currentPage === page\r\n                  ? 'bg-primary-600 text-white'\r\n                  : 'text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100'\r\n              }`}\r\n            >\r\n              {page}\r\n            </button>\r\n          )}\r\n        </React.Fragment>\r\n      ))}\r\n\r\n      {/* Next */}\r\n      <button\r\n        onClick={() => onPageChange(currentPage + 1)}\r\n        disabled={currentPage === totalPages}\r\n        className=\"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n      >\r\n        <span className=\"hidden sm:inline\">Next</span>\r\n        <FiChevronRight className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FiEye, FiClock } from \"react-icons/fi\";\r\n\r\nconst formatViews = (views) => {\r\n  if (!views) return \"0\";\r\n  if (views >= 1000000) return (views / 1000000).toFixed(1).replace(/\\.0$/, \"\") + \"M\";\r\n  if (views >= 1000) return (views / 1000).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\r\n  return views.toString();\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \"Unknown Date\";\r\n  const now = new Date();\r\n  const past = new Date(date);\r\n  if (isNaN(past.getTime())) return \"Unknown Date\";\r\n  const diff = Math.floor((now - past) / 1000);\r\n  if (diff < 60) return \"Just now\";\r\n  if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;\r\n  if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;\r\n  if (diff < 604800) return `${Math.floor(diff / 86400)}d ago`;\r\n  if (diff < 2592000) return `${Math.floor(diff / 604800)}w ago`;\r\n  if (diff < 31536000) return `${Math.floor(diff / 2592000)}mo ago`;\r\n  return `${Math.floor(diff / 31536000)}y ago`;\r\n};\r\n\r\nconst formatDuration = (duration) => {\r\n  if (!duration) return \"\";\r\n  if (typeof duration === \"string\" && duration.includes(\":\")) {\r\n    if (duration === \"00:00\" || duration === \"0:00\") return \"\";\r\n    return duration;\r\n  }\r\n  if (typeof duration === \"number\" && duration > 0) {\r\n    const mins = Math.floor(duration / 60);\r\n    const secs = Math.floor(duration % 60);\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst PLACEHOLDER =\r\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjM2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=\";\r\n\r\n// Helper to get category display info\r\nconst getCategoryInfo = (category) => {\r\n  if (!category) return null;\r\n  if (typeof category === 'string') {\r\n    if (category === 'General' || category.length === 24) return null; // Skip ObjectIds and \"General\"\r\n    return { name: category, slug: category.toLowerCase().replace(/[^a-z0-9]+/g, '-') };\r\n  }\r\n  if (category.name) {\r\n    return { name: category.name, slug: category.slug || category.name.toLowerCase().replace(/[^a-z0-9]+/g, '-') };\r\n  }\r\n  return null;\r\n};\r\n\r\nconst VideoCard = ({ video, size = \"normal\" }) => {\r\n  const [imageError, setImageError] = useState(false);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n\r\n  if (!video) return null;\r\n\r\n  const { _id, title, thumbnail, views, duration, uploadDate, createdAt, category, slug, file_code } = video;\r\n\r\n  const realViews = views ?? 0;\r\n  const realDate = uploadDate || createdAt;\r\n  const formattedDuration = formatDuration(duration);\r\n  const categoryInfo = getCategoryInfo(category);\r\n\r\n  const sizes = {\r\n    small: { title: \"text-sm line-clamp-2\", meta: \"text-xs\" },\r\n    normal: { title: \"text-sm sm:text-base line-clamp-2\", meta: \"text-xs sm:text-sm\" },\r\n    large: { title: \"text-lg line-clamp-2\", meta: \"text-sm\" },\r\n  };\r\n  const currentSize = sizes[size] || sizes.normal;\r\n\r\n  const getThumbnailUrl = () => {\r\n    if (imageError) return PLACEHOLDER;\r\n    if (thumbnail && thumbnail.startsWith(\"http\")) return thumbnail;\r\n    if (thumbnail && thumbnail.length > 3) return `https://abyss.to/splash/${thumbnail}.jpg`;\r\n    if (file_code) return `https://abyss.to/splash/${file_code}.jpg`;\r\n    return PLACEHOLDER;\r\n  };\r\n\r\n  return (\r\n    <Link to={`/watch/${_id}${slug ? `/${slug}` : \"\"}`} className=\"group block w-full\">\r\n      <div className=\"bg-white dark:bg-dark-200 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer\">\r\n        {/* Thumbnail */}\r\n        <div className=\"relative aspect-video bg-gray-800 overflow-hidden\">\r\n          {!imageLoaded && !imageError && (\r\n            <div className=\"absolute inset-0 bg-gray-800 animate-pulse\" />\r\n          )}\r\n          <img\r\n            src={getThumbnailUrl()}\r\n            alt={title || \"Video\"}\r\n            className={`w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ${imageLoaded ? \"opacity-100\" : \"opacity-0\"}`}\r\n            loading=\"lazy\"\r\n            onError={() => setImageError(true)}\r\n            onLoad={() => setImageLoaded(true)}\r\n          />\r\n          {formattedDuration && (\r\n            <div className=\"absolute bottom-2 right-2 px-2 py-1 bg-black/80 rounded text-white text-xs font-medium flex items-center gap-1\">\r\n              <FiClock className=\"w-3 h-3\" />\r\n              {formattedDuration}\r\n            </div>\r\n          )}\r\n          {/* Category badge on thumbnail */}\r\n          {categoryInfo && (\r\n            <div className=\"absolute top-2 left-2 px-2 py-0.5 bg-black/70 rounded text-white text-[10px] font-medium\">\r\n              {categoryInfo.name}\r\n            </div>\r\n          )}\r\n          <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center\">\r\n            <div className=\"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-red-600/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transform scale-75 group-hover:scale-100 transition-all duration-300\">\r\n              <svg className=\"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path d=\"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info */}\r\n        <div className=\"p-2.5 sm:p-3\">\r\n          <h3 className={`font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-500 transition-colors ${currentSize.title}`}>\r\n            {title || \"Untitled Video\"}\r\n          </h3>\r\n          <div className={`mt-1.5 flex items-center gap-2 sm:gap-3 text-gray-500 dark:text-gray-400 ${currentSize.meta}`}>\r\n            <span className=\"flex items-center gap-1\">\r\n              <FiEye className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\r\n              {formatViews(realViews)} views\r\n            </span>\r\n            <span>‚Ä¢</span>\r\n            <span>{formatDate(realDate)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default VideoCard;","import React from 'react';\r\nimport VideoCard from './VideoCard';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\n\r\nconst VideoGrid = ({ videos = [], loading = false, error = null, emptyMessage = 'No videos found', columns = 4 }) => {\r\n  if (loading) return <LoadingSpinner />;\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-red-500 mb-2\">‚ö†Ô∏è</div>\r\n        <p className=\"text-gray-600 dark:text-gray-400\">{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!videos || videos.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-4xl mb-4\">üé¨</div>\r\n        <p className=\"text-gray-600 dark:text-gray-400\">{emptyMessage}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const gridCols = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 sm:grid-cols-2',\r\n    3: 'grid-cols-2 sm:grid-cols-2 lg:grid-cols-3',\r\n    4: 'grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4',\r\n    5: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5',\r\n    6: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${gridCols[columns] || gridCols[4]} gap-3 sm:gap-4 md:gap-6`}>\r\n      {videos.map((video) => (\r\n        <VideoCard key={video._id} video={video} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const VideoGridSkeleton = ({ count = 8, columns = 4 }) => {\r\n  const gridCols = {\r\n    4: 'grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${gridCols[columns] || gridCols[4]} gap-3 sm:gap-4 md:gap-6`}>\r\n      {[...Array(count)].map((_, i) => (\r\n        <div key={i} className=\"bg-white dark:bg-dark-200 rounded-xl overflow-hidden animate-pulse\">\r\n          <div className=\"aspect-video bg-gray-200 dark:bg-dark-100\"></div>\r\n          <div className=\"p-3 space-y-2\">\r\n            <div className=\"h-4 bg-gray-200 dark:bg-dark-100 rounded w-3/4\"></div>\r\n            <div className=\"h-3 bg-gray-200 dark:bg-dark-100 rounded w-1/2\"></div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoGrid;","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { publicAPI } from '../../services/api';\nimport VideoGrid, { VideoGridSkeleton } from '../../components/video/VideoGrid';\nimport Pagination from '../../components/common/Pagination';\nimport AdBanner from '../../components/ads/AdBanner';\n\nconst CategoryPage = () => {\n  const { slug } = useParams();\n  const [category, setCategory] = useState(null);\n  const [videos, setVideos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [page, setPage] = useState(1);\n  const [pagination, setPagination] = useState({ pages: 1, total: 0 });\n\n  useEffect(() => {\n    const fetchCategory = async () => {\n      setLoading(true);\n      try {\n        const catResponse = await publicAPI.getCategory(slug);\n        if (catResponse.data?.success) {\n          setCategory(catResponse.data.category);\n        }\n\n        const vidResponse = await publicAPI.getCategoryVideos(slug, { page, limit: 20 });\n        if (vidResponse.data?.success) {\n          setVideos(vidResponse.data.videos || []);\n          if (vidResponse.data.pagination) {\n            setPagination(vidResponse.data.pagination);\n          }\n        }\n      } catch (error) {\n        console.error('Failed to fetch category:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchCategory();\n    window.scrollTo({ top: 0 });\n  }, [slug, page]);\n\n  const categoryName = category?.name || slug?.replace(/-/g, ' ') || 'Category';\n  const categoryIcon = category?.icon || 'üìÅ';\n  const categoryColor = category?.color || '#ef4444';\n\n  return (\n    <>\n      <Helmet>\n        <title>{categoryName} - Xmaster</title>\n        <meta name=\"description\" content={`Watch ${categoryName} videos on Xmaster.`} />\n      </Helmet>\n\n      <div className=\"min-h-screen bg-gray-50 dark:bg-dark-400\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <div className=\"flex items-center gap-4\">\n              <div\n                className=\"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl\"\n                style={{ backgroundColor: `${categoryColor}20` }}\n              >\n                {categoryIcon}\n              </div>\n              <div>\n                <h1 className=\"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white\">\n                  {categoryName}\n                </h1>\n                <p className=\"text-gray-500 dark:text-gray-400 mt-1\">\n                  {pagination.total || videos.length} videos\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <AdBanner placement=\"category_top\" className=\"mb-6\" />\n\n          {loading ? (\n            <VideoGridSkeleton count={12} />\n          ) : (\n            <VideoGrid\n              videos={videos}\n              columns={4}\n              emptyMessage={`No videos found in ${categoryName}`}\n            />\n          )}\n\n          {pagination.pages > 1 && (\n            <Pagination\n              currentPage={page}\n              totalPages={pagination.pages}\n              onPageChange={(p) => {\n                setPage(p);\n                window.scrollTo({ top: 0, behavior: 'smooth' });\n              }}\n            />\n          )}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default CategoryPage;"],"names":["_ref","placement","className","ad","setAd","useState","adContainerRef","useRef","scriptsLoaded","useEffect","async","_response$data","_response$data2","device","window","innerWidth","response","publicAPI","getAdByPlacement","data","success","recordAdImpression","_id","e","error","fetchAd","current","container","adCode","code","content","trim","innerHTML","tempDiv","document","createElement","scripts","querySelectorAll","nonScriptContent","replace","contentDiv","appendChild","forEach","originalScript","newScript","Array","from","attributes","attr","setAttribute","name","value","textContent","src","type","imageUrl","image","targetUrl","url","link","_jsx","concat","children","href","target","rel","onClick","recordAdClick","alt","loading","ref","currentPage","totalPages","onPageChange","_jsxs","disabled","FiChevronLeft","getPageNumbers","pages","i","push","start","Math","max","end","min","map","page","React","FiChevronRight","formatViews","views","toFixed","toString","formatDate","date","now","Date","past","isNaN","getTime","diff","floor","PLACEHOLDER","video","size","imageError","setImageError","imageLoaded","setImageLoaded","title","thumbnail","duration","uploadDate","createdAt","category","slug","file_code","realViews","realDate","formattedDuration","includes","mins","secs","padStart","formatDuration","categoryInfo","length","toLowerCase","getCategoryInfo","sizes","small","meta","normal","large","currentSize","Link","to","startsWith","onError","onLoad","FiClock","fill","viewBox","d","FiEye","VideoGridSkeleton","_ref2","count","columns","gridCols","_","videos","emptyMessage","LoadingSpinner","VideoCard","CategoryPage","useParams","setCategory","setVideos","setLoading","setPage","pagination","setPagination","total","_catResponse$data","_vidResponse$data","catResponse","getCategory","vidResponse","getCategoryVideos","limit","console","fetchCategory","scrollTo","top","categoryName","categoryIcon","icon","categoryColor","color","_Fragment","Helmet","style","backgroundColor","AdBanner","VideoGrid","Pagination","p","behavior"],"sourceRoot":""}