"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[618],{5992(e,s,a){a.d(s,{A:()=>x});var t=a(5043),l=a(5772),d=a(3216),r=a(5475),n=a(5187),i=a(579);const c=e=>{let{isOpen:s,onClose:a}=e;const t=(0,d.zy)(),c=(0,d.Zp)(),{logout:o}=(0,n.A)(),x=[{path:"/admin/dashboard",icon:l.V5Y,label:"Dashboard"},{path:"/admin/videos",icon:l.pVQ,label:"Videos"},{path:"/admin/upload",icon:l.B88,label:"Upload"},{path:"/admin/categories",icon:l.QPV,label:"Categories"},{path:"/admin/ads",icon:l.z8N,label:"Ads"},{path:"/admin/reports",icon:l.QsL,label:"Reports"}];return(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:a}),(0,i.jsx)("aside",{className:"fixed lg:static inset-y-0 left-0 z-50 w-64 bg-dark-300 transform transition-transform duration-300 lg:transform-none ".concat(s?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-dark-100",children:[(0,i.jsxs)(r.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-white font-bold text-xl",children:"X"})}),(0,i.jsx)("span",{className:"text-lg font-bold text-white",children:"Admin"})]}),(0,i.jsx)("button",{onClick:a,className:"lg:hidden p-2 hover:bg-dark-200 rounded-lg",children:(0,i.jsx)(l.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,i.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(e=>{return(0,i.jsxs)(r.N_,{to:e.path,onClick:a,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat((s=e.path,t.pathname===s?"bg-primary-600 text-white":"text-gray-400 hover:bg-dark-200 hover:text-white")),children:[(0,i.jsx)(e.icon,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-medium",children:e.label})]},e.path);var s})}),(0,i.jsxs)("div",{className:"p-4 border-t border-dark-100 space-y-2",children:[(0,i.jsxs)(r.N_,{to:"/",target:"_blank",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-dark-200 hover:text-white transition-all",children:[(0,i.jsx)(l.vQY,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-medium",children:"View Site"})]}),(0,i.jsxs)("button",{onClick:()=>{o(),c("/xmaster-admin")},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-500/10 hover:text-red-500 transition-all w-full",children:[(0,i.jsx)(l.QeK,{className:"w-5 h-5"}),(0,i.jsx)("span",{className:"font-medium",children:"Logout"})]})]})]})})]})};var o=a(9362);const x=e=>{let{children:s,title:a}=e;const[d,r]=(0,t.useState)(!1);return(0,i.jsxs)("div",{className:"min-h-screen bg-dark-400 flex",children:[(0,i.jsx)(c,{isOpen:d,onClose:()=>r(!1)}),(0,i.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,i.jsx)("header",{className:"bg-dark-300 border-b border-dark-100 px-4 lg:px-6 py-4",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsx)("button",{onClick:()=>r(!0),className:"lg:hidden p-2 hover:bg-dark-200 rounded-lg text-gray-400",children:(0,i.jsx)(l.ND1,{className:"w-6 h-6"})}),(0,i.jsx)("h1",{className:"text-xl font-semibold text-white",children:a})]}),(0,i.jsx)(o.A,{})]})}),(0,i.jsx)("main",{className:"flex-1 p-4 lg:p-6 overflow-auto",children:s})]})]})}},618(e,s,a){a.r(s),a.d(s,{default:()=>h});var t=a(9379),l=a(5043),d=a(5772),r=a(3768),n=a(6305),i=a(5992),c=a(6630),o=a(6047),x=a(579);const m=e=>{let{ad:s,placements:a,onClose:n,onSave:i}=e;const[c,o]=(0,l.useState)({name:(null===s||void 0===s?void 0:s.name)||"",placement:(null===s||void 0===s?void 0:s.placement)||"home_top",type:(null===s||void 0===s?void 0:s.type)||"script",code:(null===s||void 0===s?void 0:s.code)||"",device:(null===s||void 0===s?void 0:s.device)||"all",enabled:!1!==(null===s||void 0===s?void 0:s.enabled),priority:(null===s||void 0===s?void 0:s.priority)||0}),[m,h]=(0,l.useState)(!1);return(0,x.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,x.jsxs)("div",{className:"bg-dark-200 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-dark-100",children:[(0,x.jsx)("h3",{className:"text-lg font-semibold text-white",children:s?"Edit Ad":"Create Ad"}),(0,x.jsx)("button",{onClick:n,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,x.jsx)(d.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c.name.trim()&&c.code.trim()?(h(!0),await i(c),h(!1)):r.Ay.error("Name and code are required")},className:"p-6 space-y-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ad Name *"}),(0,x.jsx)("input",{type:"text",value:c.name,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{name:e.target.value})),className:"input-field",placeholder:"e.g., Homepage Banner Ad",required:!0})]}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Placement *"}),(0,x.jsx)("select",{value:c.placement,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{placement:e.target.value})),className:"input-field",children:a.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Device"}),(0,x.jsxs)("select",{value:c.device,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{device:e.target.value})),className:"input-field",children:[(0,x.jsx)("option",{value:"all",children:"All Devices"}),(0,x.jsx)("option",{value:"desktop",children:"Desktop Only"}),(0,x.jsx)("option",{value:"mobile",children:"Mobile Only"})]})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ad Type"}),(0,x.jsxs)("select",{value:c.type,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{type:e.target.value})),className:"input-field",children:[(0,x.jsx)("option",{value:"script",children:"Script (JavaScript)"}),(0,x.jsx)("option",{value:"html",children:"HTML"}),(0,x.jsx)("option",{value:"banner",children:"Banner Image"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ad Code *"}),(0,x.jsx)("textarea",{value:c.code,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{code:e.target.value})),className:"input-field font-mono text-sm resize-none",rows:8,placeholder:"Paste your ad code here...",required:!0}),(0,x.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Paste the complete ad code from your ad network (Google Ads, etc.)"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),(0,x.jsx)("input",{type:"number",value:c.priority,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{priority:parseInt(e.target.value)||0})),className:"input-field w-32",min:"0",max:"100"}),(0,x.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Higher priority ads show first (0-100)"})]}),(0,x.jsx)("div",{children:(0,x.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-dark-100 rounded-lg cursor-pointer",children:[(0,x.jsx)("input",{type:"checkbox",checked:c.enabled,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{enabled:e.target.checked})),className:"rounded"}),(0,x.jsx)("span",{className:"text-gray-300",children:"Enabled (show to users)"})]})}),(0,x.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,x.jsx)("button",{type:"button",onClick:n,className:"flex-1 btn-secondary",children:"Cancel"}),(0,x.jsx)("button",{type:"submit",disabled:m,className:"flex-1 btn-primary",children:m?"Saving...":"Save Ad"})]})]})]})})},h=()=>{const[e,s]=(0,l.useState)([]),[a,h]=(0,l.useState)([]),[p,u]=(0,l.useState)(!0),[g,b]=(0,l.useState)(!1),[j,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{N()},[]);const N=async()=>{try{const[e,a]=await Promise.all([n.Er.getAllAds(),n.Er.getAdPlacements()]);e.data.success&&s(e.data.ads),a.data.success&&h(a.data.placements)}catch(e){r.Ay.error("Failed to load ads")}finally{u(!1)}};if(p)return(0,x.jsx)(i.A,{title:"Ads Manager",children:(0,x.jsx)(c.A,{})});const y=a.reduce((s,a)=>(s[a.id]=(0,t.A)((0,t.A)({},a),{},{ads:e.filter(e=>e.placement===a.id)}),s),{});return(0,x.jsxs)(i.A,{title:"Ads Manager",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,x.jsxs)("div",{className:"bg-dark-200 rounded-xl p-6 border border-dark-100",children:[(0,x.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Ads"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),(0,x.jsxs)("div",{className:"bg-dark-200 rounded-xl p-6 border border-dark-100",children:[(0,x.jsx)("p",{className:"text-gray-400 text-sm",children:"Active Ads"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-green-500 mt-1",children:e.filter(e=>e.enabled).length})]}),(0,x.jsxs)("div",{className:"bg-dark-200 rounded-xl p-6 border border-dark-100",children:[(0,x.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Impressions"}),(0,x.jsx)("p",{className:"text-2xl font-bold text-blue-500 mt-1",children:(0,o.OO)(e.reduce((e,s)=>e+(s.impressions||0),0))})]})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,x.jsx)("p",{className:"text-gray-400",children:"Manage ad placements across your site"}),(0,x.jsxs)("button",{onClick:()=>{v(null),b(!0)},className:"btn-primary",children:[(0,x.jsx)(d.GGD,{className:"w-5 h-5"}),"Add Ad"]})]}),(0,x.jsx)("div",{className:"space-y-6",children:Object.values(y).map(a=>(0,x.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100",children:[(0,x.jsxs)("div",{className:"p-4 border-b border-dark-100 flex items-center justify-between",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("h3",{className:"text-white font-medium",children:a.name}),(0,x.jsxs)("p",{className:"text-gray-500 text-sm",children:["Size: ",a.size]})]}),(0,x.jsxs)("span",{className:"text-gray-400 text-sm",children:[a.ads.length," ad",1!==a.ads.length?"s":""]})]}),a.ads.length>0?(0,x.jsx)("div",{className:"divide-y divide-dark-100",children:a.ads.map(a=>(0,x.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center gap-4",children:[(0,x.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(a.enabled?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:(0,x.jsx)(d.z8N,{className:"w-5 h-5"})}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-white font-medium",children:a.name}),(0,x.jsxs)("p",{className:"text-gray-500 text-sm",children:[(0,o.OO)(a.impressions||0)," impressions \u2022 ",(0,o.OO)(a.clicks||0)," clicks",a.impressions>0&&(0,x.jsxs)("span",{className:"text-primary-500 ml-2",children:["(",(a.clicks/a.impressions*100).toFixed(2),"% CTR)"]})]})]})]}),(0,x.jsxs)("div",{className:"flex items-center gap-2",children:[(0,x.jsx)("span",{className:"badge ".concat("all"===a.device?"badge-success":"badge-warning"),children:a.device}),(0,x.jsx)("button",{onClick:()=>(async a=>{try{const l=await n.Er.toggleAd(a._id);l.data.success&&(s(e.map(e=>e._id===a._id?(0,t.A)((0,t.A)({},e),{},{enabled:l.data.enabled}):e)),r.Ay.success(l.data.message))}catch(l){r.Ay.error("Failed to toggle ad")}})(a),className:"p-2 rounded-lg transition-colors ".concat(a.enabled?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-gray-500/20 text-gray-500 hover:bg-gray-500/30"),children:a.enabled?(0,x.jsx)(d.Vap,{className:"w-4 h-4"}):(0,x.jsx)(d._NO,{className:"w-4 h-4"})}),(0,x.jsx)("button",{onClick:()=>(e=>{v(e),b(!0)})(a),className:"p-2 hover:bg-dark-100 rounded-lg text-gray-400 hover:text-white",children:(0,x.jsx)(d.WXf,{className:"w-4 h-4"})}),(0,x.jsx)("button",{onClick:()=>(async a=>{if(window.confirm('Delete "'.concat(a.name,'"?')))try{await n.Er.deleteAd(a._id),s(e.filter(e=>e._id!==a._id)),r.Ay.success("Ad deleted")}catch(t){r.Ay.error("Failed to delete ad")}})(a),className:"p-2 hover:bg-red-500/10 rounded-lg text-gray-400 hover:text-red-500",children:(0,x.jsx)(d.IXo,{className:"w-4 h-4"})})]})]},a._id))}):(0,x.jsx)("div",{className:"p-8 text-center",children:(0,x.jsx)("p",{className:"text-gray-500",children:"No ads in this placement"})})]},a.id))}),g&&(0,x.jsx)(m,{ad:j,placements:a,onClose:()=>b(!1),onSave:async a=>{try{if(j){const t=await n.Er.updateAd(j._id,a);t.data.success&&(s(e.map(e=>e._id===j._id?t.data.ad:e)),r.Ay.success("Ad updated"))}else{const t=await n.Er.createAd(a);t.data.success&&(s([...e,t.data.ad]),r.Ay.success("Ad created"))}b(!1)}catch(d){var t,l;r.Ay.error((null===(t=d.response)||void 0===t||null===(l=t.data)||void 0===l?void 0:l.error)||"Failed to save ad")}}})]})}}}]);
//# sourceMappingURL=618.e68447c7.chunk.js.map