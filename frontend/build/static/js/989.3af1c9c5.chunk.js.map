{"version":3,"file":"static/js/989.3af1c9c5.chunk.js","mappings":"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","sources":["components/video/ShareButton.jsx","pages/public/WatchPage.jsx"],"sourcesContent":["// frontend/src/components/video/ShareButton.jsx\r\nimport React, { useState, useCallback, useEffect, useRef } from 'react';\r\nimport { FiShare2, FiX, FiCopy, FiCheck, FiExternalLink } from 'react-icons/fi';\r\n\r\n// ==========================================\r\n// CONSTANTS\r\n// ==========================================\r\nconst API_BASE = process.env.REACT_APP_API_URL || 'https://api.xmaster.guru/api';\r\n\r\nconst PLACEHOLDER =\r\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=\";\r\n\r\n// ==========================================\r\n// ICONS\r\n// ==========================================\r\nconst TelegramIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" className=\"w-6 h-6\" fill=\"currentColor\">\r\n    <path d=\"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.96 6.504-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z\" />\r\n  </svg>\r\n);\r\n\r\nconst WhatsAppIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" className=\"w-6 h-6\" fill=\"currentColor\">\r\n    <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z\" />\r\n  </svg>\r\n);\r\n\r\nconst FacebookIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" className=\"w-6 h-6\" fill=\"currentColor\">\r\n    <path d=\"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z\" />\r\n  </svg>\r\n);\r\n\r\nconst TwitterIcon = () => (\r\n  <svg viewBox=\"0 0 24 24\" className=\"w-6 h-6\" fill=\"currentColor\">\r\n    <path d=\"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z\" />\r\n  </svg>\r\n);\r\n\r\n// ==========================================\r\n// HELPERS\r\n// ==========================================\r\n\r\nconst getThumbnail = (video) => {\r\n  if (!video) return PLACEHOLDER;\r\n  const thumb = video.thumbnail;\r\n  if (thumb && thumb.startsWith('http')) return thumb;\r\n  if (thumb && thumb.length > 3) return `https://abyss.to/splash/${thumb}.jpg`;\r\n  if (video.file_code) return `https://abyss.to/splash/${video.file_code}.jpg`;\r\n  return PLACEHOLDER;\r\n};\r\n\r\nconst formatViews = (views) => {\r\n  if (!views) return '0';\r\n  if (views >= 1000000) return (views / 1000000).toFixed(1).replace(/\\.0$/, '') + 'M';\r\n  if (views >= 1000) return (views / 1000).toFixed(1).replace(/\\.0$/, '') + 'K';\r\n  return views.toString();\r\n};\r\n\r\n/**\r\n * Track share event\r\n */\r\nconst trackShare = async (videoId, platform) => {\r\n  try {\r\n    await fetch(`${API_BASE}/public/share/${videoId}/track`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ platform }),\r\n    });\r\n  } catch (e) {\r\n    // Silent fail - tracking is non-critical\r\n  }\r\n};\r\n\r\n// ==========================================\r\n// SHARE MODAL COMPONENT\r\n// ==========================================\r\n\r\nconst ShareModal = ({ video, isOpen, onClose }) => {\r\n  const [copied, setCopied] = useState(false);\r\n  const [shareSuccess, setShareSuccess] = useState('');\r\n  const modalRef = useRef(null);\r\n\r\n  // Close on ESC\r\n  useEffect(() => {\r\n    const handleEsc = (e) => {\r\n      if (e.key === 'Escape') onClose();\r\n    };\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEsc);\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEsc);\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  if (!isOpen || !video) return null;\r\n\r\n  const thumbnail = getThumbnail(video);\r\n\r\n  // THE KEY URL: Share URL points to backend SSR page (has OG tags)\r\n  const shareUrl = `${API_BASE}/public/share/${video._id}`;\r\n\r\n  // Video page URL (where user actually watches)\r\n  const videoPageUrl = `${window.location.origin}/watch/${video._id}${\r\n    video.slug ? '/' + video.slug : ''\r\n  }`;\r\n\r\n  const shareTitle = video.title || 'Watch this video';\r\n  const shareText = `${shareTitle}`;\r\n\r\n  // ==========================================\r\n  // SHARE HANDLERS\r\n  // ==========================================\r\n\r\n  const handleTelegramShare = () => {\r\n    trackShare(video._id, 'telegram');\r\n    // Use shareUrl (backend SSR page) so Telegram fetches OG tags\r\n    const url = `https://t.me/share/url?url=${encodeURIComponent(shareUrl)}&text=${encodeURIComponent(shareText)}`;\r\n    window.open(url, '_blank', 'noopener,noreferrer');\r\n    setShareSuccess('Telegram');\r\n    setTimeout(() => setShareSuccess(''), 2000);\r\n  };\r\n\r\n  const handleWhatsAppShare = () => {\r\n    trackShare(video._id, 'whatsapp');\r\n    const url = `https://wa.me/?text=${encodeURIComponent(shareText + '\\n\\n' + shareUrl)}`;\r\n    window.open(url, '_blank', 'noopener,noreferrer');\r\n    setShareSuccess('WhatsApp');\r\n    setTimeout(() => setShareSuccess(''), 2000);\r\n  };\r\n\r\n  const handleFacebookShare = () => {\r\n    trackShare(video._id, 'facebook');\r\n    const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;\r\n    window.open(url, '_blank', 'noopener,noreferrer,width=600,height=400');\r\n    setShareSuccess('Facebook');\r\n    setTimeout(() => setShareSuccess(''), 2000);\r\n  };\r\n\r\n  const handleTwitterShare = () => {\r\n    trackShare(video._id, 'twitter');\r\n    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareUrl)}`;\r\n    window.open(url, '_blank', 'noopener,noreferrer,width=600,height=400');\r\n    setShareSuccess('Twitter');\r\n    setTimeout(() => setShareSuccess(''), 2000);\r\n  };\r\n\r\n  const handleNativeShare = async () => {\r\n    if (!navigator.share) return;\r\n    try {\r\n      trackShare(video._id, 'native');\r\n      await navigator.share({\r\n        title: shareTitle,\r\n        text: shareText,\r\n        url: shareUrl,\r\n      });\r\n      setShareSuccess('Shared!');\r\n      setTimeout(() => {\r\n        setShareSuccess('');\r\n        onClose();\r\n      }, 1500);\r\n    } catch (e) {\r\n      // User cancelled - that's fine\r\n      if (e.name !== 'AbortError') {\r\n        console.error('Share failed:', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleCopyLink = async () => {\r\n    try {\r\n      // Copy the direct video page URL (nicer for users)\r\n      await navigator.clipboard.writeText(videoPageUrl);\r\n    } catch (e) {\r\n      // Fallback for older browsers\r\n      const input = document.createElement('input');\r\n      input.value = videoPageUrl;\r\n      input.style.position = 'fixed';\r\n      input.style.opacity = '0';\r\n      document.body.appendChild(input);\r\n      input.select();\r\n      document.execCommand('copy');\r\n      document.body.removeChild(input);\r\n    }\r\n    trackShare(video._id, 'copy');\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2500);\r\n  };\r\n\r\n  const handleCopyShareLink = async () => {\r\n    // Copy the share URL (with OG tags) - for power users\r\n    try {\r\n      await navigator.clipboard.writeText(shareUrl);\r\n    } catch (e) {\r\n      const input = document.createElement('input');\r\n      input.value = shareUrl;\r\n      input.style.position = 'fixed';\r\n      input.style.opacity = '0';\r\n      document.body.appendChild(input);\r\n      input.select();\r\n      document.execCommand('copy');\r\n      document.body.removeChild(input);\r\n    }\r\n    setCopied(true);\r\n    setTimeout(() => setCopied(false), 2500);\r\n  };\r\n\r\n  // Share platform configs\r\n  const platforms = [\r\n    {\r\n      name: 'Telegram',\r\n      icon: <TelegramIcon />,\r\n      color: 'bg-[#0088cc] hover:bg-[#0077b5]',\r\n      shadow: 'shadow-[0_4px_15px_rgba(0,136,204,0.3)]',\r\n      onClick: handleTelegramShare,\r\n      priority: true,\r\n    },\r\n    {\r\n      name: 'WhatsApp',\r\n      icon: <WhatsAppIcon />,\r\n      color: 'bg-[#25D366] hover:bg-[#20bd5a]',\r\n      shadow: 'shadow-[0_4px_15px_rgba(37,211,102,0.3)]',\r\n      onClick: handleWhatsAppShare,\r\n    },\r\n    {\r\n      name: 'Facebook',\r\n      icon: <FacebookIcon />,\r\n      color: 'bg-[#1877F2] hover:bg-[#1565d8]',\r\n      shadow: 'shadow-[0_4px_15px_rgba(24,119,242,0.3)]',\r\n      onClick: handleFacebookShare,\r\n    },\r\n    {\r\n      name: 'Twitter / X',\r\n      icon: <TwitterIcon />,\r\n      color: 'bg-black hover:bg-gray-800',\r\n      shadow: 'shadow-[0_4px_15px_rgba(0,0,0,0.3)]',\r\n      onClick: handleTwitterShare,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed inset-0 z-[9999] flex items-end sm:items-center justify-center\"\r\n      onClick={onClose}\r\n    >\r\n      {/* Backdrop */}\r\n      <div className=\"absolute inset-0 bg-black/70 backdrop-blur-sm transition-opacity\" />\r\n\r\n      {/* Modal */}\r\n      <div\r\n        ref={modalRef}\r\n        className=\"relative w-full sm:w-[440px] max-h-[90vh] overflow-y-auto bg-white dark:bg-[#1a1a2e] rounded-t-2xl sm:rounded-2xl shadow-2xl animate-share-slide-up\"\r\n        onClick={(e) => e.stopPropagation()}\r\n      >\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700/50\">\r\n          <h3 className=\"text-lg font-bold text-gray-900 dark:text-white flex items-center gap-2\">\r\n            <FiShare2 className=\"w-5 h-5 text-blue-500\" />\r\n            Share Video\r\n          </h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-colors\"\r\n            aria-label=\"Close\"\r\n          >\r\n            <FiX className=\"w-5 h-5 text-gray-500 dark:text-gray-400\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Video Preview */}\r\n        <div className=\"flex gap-3 p-4 bg-gray-50 dark:bg-white/5\">\r\n          <div className=\"w-28 h-[72px] rounded-lg overflow-hidden bg-gray-200 dark:bg-gray-700 flex-shrink-0 relative\">\r\n            <img\r\n              src={thumbnail}\r\n              alt={video.title}\r\n              className=\"w-full h-full object-cover\"\r\n              onError={(e) => {\r\n                e.target.src = PLACEHOLDER;\r\n              }}\r\n            />\r\n            {video.duration && video.duration !== '00:00' && (\r\n              <span className=\"absolute bottom-1 right-1 px-1 py-0.5 bg-black/80 text-white text-[9px] font-medium rounded\">\r\n                {video.duration}\r\n              </span>\r\n            )}\r\n          </div>\r\n          <div className=\"flex-1 min-w-0\">\r\n            <p className=\"text-sm font-semibold text-gray-900 dark:text-white line-clamp-2 leading-snug\">\r\n              {video.title}\r\n            </p>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1.5\">\r\n              {formatViews(video.views || 0)} views\r\n              {video.duration && video.duration !== '00:00' && ` â€¢ ${video.duration}`}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Success Message */}\r\n        {shareSuccess && (\r\n          <div className=\"mx-4 mt-3 px-4 py-2.5 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-xl flex items-center gap-2 animate-fade-in\">\r\n            <FiCheck className=\"w-4 h-4 text-green-600 dark:text-green-400\" />\r\n            <span className=\"text-sm font-medium text-green-700 dark:text-green-400\">\r\n              {shareSuccess === 'Shared!' ? 'Shared successfully!' : `Opening ${shareSuccess}...`}\r\n            </span>\r\n          </div>\r\n        )}\r\n\r\n        {/* Share Platforms */}\r\n        <div className=\"p-4\">\r\n          <div className=\"grid grid-cols-4 gap-3 mb-5\">\r\n            {platforms.map((platform) => (\r\n              <button\r\n                key={platform.name}\r\n                onClick={platform.onClick}\r\n                className=\"flex flex-col items-center gap-2 group focus:outline-none\"\r\n                aria-label={`Share to ${platform.name}`}\r\n              >\r\n                <div\r\n                  className={`\r\n                    w-14 h-14 rounded-full flex items-center justify-center text-white \r\n                    ${platform.color} ${platform.shadow}\r\n                    transform transition-all duration-200 \r\n                    group-hover:scale-110 group-active:scale-95\r\n                    ${platform.priority ? 'ring-2 ring-offset-2 ring-blue-400 dark:ring-offset-[#1a1a2e]' : ''}\r\n                  `}\r\n                >\r\n                  {platform.icon}\r\n                </div>\r\n                <span className=\"text-[11px] text-gray-600 dark:text-gray-400 font-medium leading-tight text-center\">\r\n                  {platform.name}\r\n                </span>\r\n                {platform.priority && (\r\n                  <span className=\"text-[9px] text-blue-500 font-semibold -mt-1\">\r\n                    â˜… BEST\r\n                  </span>\r\n                )}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Native Share Button (Mobile) */}\r\n          {navigator.share && (\r\n            <button\r\n              onClick={handleNativeShare}\r\n              className=\"w-full py-3 mb-4 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-blue-800 transition-all flex items-center justify-center gap-2 shadow-lg shadow-blue-500/25 active:scale-[0.98]\"\r\n            >\r\n              <FiExternalLink className=\"w-5 h-5\" />\r\n              More Share Options\r\n            </button>\r\n          )}\r\n\r\n          {/* Copy Link */}\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\r\n              Video Link\r\n            </label>\r\n            <div className=\"flex items-center gap-2 p-2 bg-gray-100 dark:bg-white/5 border border-gray-200 dark:border-gray-700/50 rounded-xl\">\r\n              <input\r\n                type=\"text\"\r\n                readOnly\r\n                value={videoPageUrl}\r\n                className=\"flex-1 bg-transparent text-sm text-gray-700 dark:text-gray-300 outline-none truncate px-2 font-mono\"\r\n                onClick={(e) => e.target.select()}\r\n              />\r\n              <button\r\n                onClick={handleCopyLink}\r\n                className={`\r\n                  flex items-center gap-1.5 px-4 py-2.5 rounded-lg text-sm font-semibold transition-all whitespace-nowrap\r\n                  ${\r\n                    copied\r\n                      ? 'bg-green-500 text-white shadow-lg shadow-green-500/25'\r\n                      : 'bg-blue-600 text-white hover:bg-blue-700 shadow-lg shadow-blue-500/25'\r\n                  }\r\n                `}\r\n              >\r\n                {copied ? (\r\n                  <>\r\n                    <FiCheck className=\"w-4 h-4\" />\r\n                    Copied!\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <FiCopy className=\"w-4 h-4\" />\r\n                    Copy\r\n                  </>\r\n                )}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tip for Telegram */}\r\n          <div className=\"mt-4 p-3 bg-blue-50 dark:bg-blue-900/10 border border-blue-100 dark:border-blue-800/30 rounded-xl\">\r\n            <p className=\"text-xs text-blue-700 dark:text-blue-400 leading-relaxed\">\r\n              <strong>ðŸ’¡ Tip:</strong> For the best preview with thumbnail on Telegram, use the\r\n              Telegram share button above. The link will show a rich preview card with the video\r\n              thumbnail.\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Bottom safe area for mobile */}\r\n        <div className=\"h-2 sm:h-0\" />\r\n      </div>\r\n\r\n      {/* Animations */}\r\n      <style>{`\r\n        @keyframes share-slide-up {\r\n          from {\r\n            transform: translateY(100%);\r\n            opacity: 0;\r\n          }\r\n          to {\r\n            transform: translateY(0);\r\n            opacity: 1;\r\n          }\r\n        }\r\n        .animate-share-slide-up {\r\n          animation: share-slide-up 0.3s cubic-bezier(0.16, 1, 0.3, 1);\r\n        }\r\n        @keyframes fade-in {\r\n          from { opacity: 0; transform: translateY(-4px); }\r\n          to { opacity: 1; transform: translateY(0); }\r\n        }\r\n        .animate-fade-in {\r\n          animation: fade-in 0.2s ease-out;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\n// ==========================================\r\n// SHARE BUTTON (Exported Component)\r\n// ==========================================\r\n\r\nconst ShareButton = ({ video, className = '', variant = 'default' }) => {\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  const handleClick = useCallback(() => {\r\n    setShowModal(true);\r\n  }, []);\r\n\r\n  const handleClose = useCallback(() => {\r\n    setShowModal(false);\r\n  }, []);\r\n\r\n  if (variant === 'icon-only') {\r\n    return (\r\n      <>\r\n        <button\r\n          onClick={handleClick}\r\n          className={`p-2 rounded-full hover:bg-gray-100 dark:hover:bg-white/10 transition-colors ${className}`}\r\n          aria-label=\"Share video\"\r\n          title=\"Share\"\r\n        >\r\n          <FiShare2 className=\"w-5 h-5 text-gray-600 dark:text-gray-400\" />\r\n        </button>\r\n        <ShareModal video={video} isOpen={showModal} onClose={handleClose} />\r\n      </>\r\n    );\r\n  }\r\n\r\n  if (variant === 'compact') {\r\n    return (\r\n      <>\r\n        <button\r\n          onClick={handleClick}\r\n          className={`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-200 transition-all ${className}`}\r\n        >\r\n          <FiShare2 className=\"w-3.5 h-3.5\" />\r\n          Share\r\n        </button>\r\n        <ShareModal video={video} isOpen={showModal} onClose={handleClose} />\r\n      </>\r\n    );\r\n  }\r\n\r\n  // Default variant\r\n  return (\r\n    <>\r\n      <button\r\n        onClick={handleClick}\r\n        className={`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium bg-gray-100 dark:bg-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-200 transition-all ${className}`}\r\n      >\r\n        <FiShare2 className=\"w-4 h-4\" />\r\n        <span className=\"hidden sm:inline\">Share</span>\r\n      </button>\r\n      <ShareModal video={video} isOpen={showModal} onClose={handleClose} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ShareButton;\r\nexport { ShareModal };","// frontend/src/pages/public/WatchPage.jsx\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport {\n  FiEye, FiCalendar, FiClock, FiThumbsUp, FiThumbsDown,\n  FiFlag, FiChevronDown, FiChevronUp,\n} from \"react-icons/fi\";\nimport { publicAPI } from \"../../services/api\";\nimport LoadingSpinner from \"../../components/common/LoadingSpinner\";\nimport ShareButton from '../../components/video/ShareButton';\n\n// ==================== CONSTANTS ====================\nconst PLACEHOLDER =\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=\";\n\n// ==================== AD CODES ====================\nconst ADS = {\n  sidebar300x250: `<script>\n    atOptions = {\n      'key' : '14ec0d1a96c62198d09309e2e93cdbe1',\n      'format' : 'iframe',\n      'height' : 250,\n      'width' : 300,\n      'params' : {}\n    };\n  </script>\n  <script src=\"https://www.highperformanceformat.com/14ec0d1a96c62198d09309e2e93cdbe1/invoke.js\"></script>`,\n\n  bottom728x90: `<script>\n    atOptions = {\n      'key' : '63bdafcb22010cae5f0bf88ebb77480d',\n      'format' : 'iframe',\n      'height' : 90,\n      'width' : 728,\n      'params' : {}\n    };\n  </script>\n  <script src=\"https://www.highperformanceformat.com/63bdafcb22010cae5f0bf88ebb77480d/invoke.js\"></script>`,\n\n  mobile320x50: `<script>\n    atOptions = {\n      'key' : '6234f16279422f68f13fae0f6cd38e19',\n      'format' : 'iframe',\n      'height' : 50,\n      'width' : 320,\n      'params' : {}\n    };\n  </script>\n  <script src=\"https://www.highperformanceformat.com/6234f16279422f68f13fae0f6cd38e19/invoke.js\"></script>`,\n\n  nativeBanner: `<script async=\"async\" data-cfasync=\"false\" src=\"https://pl28697514.effectivegatecpm.com/ff1ceb8407fd04d767e71ec9b3d366ef/invoke.js\"></script>\n  <div id=\"container-ff1ceb8407fd04d767e71ec9b3d366ef\"></div>`,\n\n  socialBar: `<script src=\"https://pl28697422.effectivegatecpm.com/7e/56/ba/7e56ba1b0754a8958ee3f0800dac7a0d.js\"></script>`,\n};\n\n// ==================== HELPERS ====================\nconst formatViews = (views) => {\n  if (!views) return \"0\";\n  if (views >= 1000000) return (views / 1000000).toFixed(1).replace(/\\.0$/, \"\") + \"M\";\n  if (views >= 1000) return (views / 1000).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\n  return views.toString();\n};\n\nconst formatDate = (date) => {\n  if (!date) return \"Unknown\";\n  const d = new Date(date);\n  if (isNaN(d.getTime())) return \"Unknown\";\n  return d.toLocaleDateString(\"en-US\", { year: \"numeric\", month: \"short\", day: \"numeric\" });\n};\n\nconst formatRelativeDate = (date) => {\n  if (!date) return \"\";\n  const now = new Date();\n  const past = new Date(date);\n  if (isNaN(past.getTime())) return \"\";\n  const diff = Math.floor((now - past) / 1000);\n  if (diff < 60) return \"Just now\";\n  if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;\n  if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;\n  if (diff < 604800) return `${Math.floor(diff / 86400)}d ago`;\n  if (diff < 2592000) return `${Math.floor(diff / 604800)}w ago`;\n  return formatDate(date);\n};\n\nconst getThumbnail = (v) => {\n  if (!v) return PLACEHOLDER;\n  const thumb = v.thumbnail;\n  if (thumb && thumb.startsWith(\"http\")) return thumb;\n  if (thumb && thumb.length > 3) return `https://abyss.to/splash/${thumb}.jpg`;\n  if (v.file_code) return `https://abyss.to/splash/${v.file_code}.jpg`;\n  return PLACEHOLDER;\n};\n\n// Helper to get category name from various formats\nconst getCategoryName = (cat) => {\n  if (!cat) return null;\n  if (typeof cat === 'string') return cat;\n  if (cat.name) return cat.name;\n  return null;\n};\n\nconst getCategorySlug = (cat) => {\n  if (!cat) return null;\n  if (typeof cat === 'string') return cat.toLowerCase().replace(/[^a-z0-9]+/g, '-');\n  if (cat.slug) return cat.slug;\n  if (cat.name) return cat.name.toLowerCase().replace(/[^a-z0-9]+/g, '-');\n  return null;\n};\n\n// ==================== AD INJECTOR COMPONENT ====================\nconst AdSlot = ({ adCode, label = \"Sponsored\", className = \"\" }) => {\n  const containerRef = useRef(null);\n  const loaded = useRef(false);\n\n  useEffect(() => {\n    if (!adCode || !containerRef.current || loaded.current) return;\n    const container = containerRef.current;\n    container.innerHTML = \"\";\n    loaded.current = true;\n\n    const tempDiv = document.createElement(\"div\");\n    tempDiv.innerHTML = adCode;\n    const scripts = tempDiv.querySelectorAll(\"script\");\n    const nonScript = adCode.replace(/<script[\\s\\S]*?<\\/script>/gi, \"\");\n\n    if (nonScript.trim()) {\n      const div = document.createElement(\"div\");\n      div.innerHTML = nonScript;\n      container.appendChild(div);\n    }\n\n    scripts.forEach((orig) => {\n      const s = document.createElement(\"script\");\n      Array.from(orig.attributes).forEach((a) => s.setAttribute(a.name, a.value));\n      if (orig.textContent) s.textContent = orig.textContent;\n      if (orig.src) { s.src = orig.src; s.async = true; }\n      container.appendChild(s);\n    });\n\n    return () => {\n      if (container) container.innerHTML = \"\";\n      loaded.current = false;\n    };\n  }, [adCode]);\n\n  if (!adCode) return null;\n\n  return (\n    <div className={`ad-slot ${className}`}>\n      {label && (\n        <span className=\"text-[10px] text-gray-500 dark:text-gray-600 uppercase tracking-wider mb-1 block\">\n          {label}\n        </span>\n      )}\n      <div ref={containerRef} className=\"ad-content flex justify-center items-center bg-gray-50 dark:bg-dark-200 rounded-xl overflow-hidden\" />\n    </div>\n  );\n};\n\n// ==================== SOCIAL BAR LOADER ====================\nconst SocialBarLoader = () => {\n  const loaded = useRef(false);\n  useEffect(() => {\n    if (loaded.current) return;\n    loaded.current = true;\n    const script = document.createElement(\"script\");\n    script.src = \"https://pl28697422.effectivegatecpm.com/7e/56/ba/7e56ba1b0754a8958ee3f0800dac7a0d.js\";\n    script.async = true;\n    document.body.appendChild(script);\n    return () => {\n      if (document.body.contains(script)) document.body.removeChild(script);\n      loaded.current = false;\n    };\n  }, []);\n  return null;\n};\n\n// ==================== MAIN WATCH PAGE ====================\nfunction WatchPage() {\n  const { id } = useParams();\n  const [video, setVideo] = useState(null);\n  const [relatedVideos, setRelatedVideos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [descExpanded, setDescExpanded] = useState(false);\n  const [likes, setLikes] = useState(0);\n  const [dislikes, setDislikes] = useState(0);\n  const [liked, setLiked] = useState(false);\n  const [disliked, setDisliked] = useState(false);\n  const [showReport, setShowReport] = useState(false);\n  const [reportReason, setReportReason] = useState(\"\");\n  const [isMobile, setIsMobile] = useState(window.innerWidth < 1024);\n\n  useEffect(() => {\n    const handleResize = () => setIsMobile(window.innerWidth < 1024);\n    window.addEventListener(\"resize\", handleResize);\n    return () => window.removeEventListener(\"resize\", handleResize);\n  }, []);\n\n  useEffect(() => {\n    if (!video) return;\n    const thumbnail = getThumbnail(video);\n    document.title = `${video.title} - Xmaster`;\n\n    const updateMeta = (property, content, isName = false) => {\n      const attr = isName ? \"name\" : \"property\";\n      let tag = document.querySelector(`meta[${attr}=\"${property}\"]`);\n      if (!tag) {\n        tag = document.createElement(\"meta\");\n        tag.setAttribute(attr, property);\n        document.head.appendChild(tag);\n      }\n      tag.setAttribute(\"content\", content);\n    };\n\n    updateMeta(\"og:title\", video.title);\n    updateMeta(\"og:description\", video.description || `Watch ${video.title} on Xmaster`);\n    updateMeta(\"og:image\", thumbnail);\n    updateMeta(\"og:url\", window.location.href);\n    updateMeta(\"og:type\", \"video.other\");\n    updateMeta(\"og:site_name\", \"Xmaster\");\n    updateMeta(\"twitter:card\", \"summary_large_image\", true);\n    updateMeta(\"twitter:title\", video.title, true);\n    updateMeta(\"twitter:description\", video.description || `Watch ${video.title} on Xmaster`, true);\n    updateMeta(\"twitter:image\", thumbnail, true);\n\n    return () => { document.title = \"Xmaster - Watch Videos Online\"; };\n  }, [video]);\n\n  // â˜… UPDATED: Fetch data with random seed for recommendations\n  useEffect(() => {\n    const fetchData = async () => {\n      setLoading(true);\n      setError(null);\n      setRelatedVideos([]); // Clear previous recommendations\n      try {\n        const response = await publicAPI.getVideo(id);\n        const videoData = response.data?.video || response.data?.data || response.data;\n        setVideo(videoData);\n        setLikes(videoData.likes || 0);\n        setDislikes(videoData.dislikes || 0);\n\n        try { await publicAPI.recordView(id); } catch (e) {}\n\n        // â˜… Fetch related videos - seed is auto-added by api.js\n        try {\n          const relRes = await publicAPI.getRelatedVideos(id, 15);\n          if (relRes.data?.success) setRelatedVideos(relRes.data.videos || []);\n        } catch (e) {\n          // Fallback to random videos\n          try {\n            const randRes = await publicAPI.getRandomVideos(15, id);\n            if (randRes.data?.success)\n              setRelatedVideos(randRes.data.videos || []);\n          } catch (e2) {}\n        }\n      } catch (err) {\n        setError(\"Failed to load video\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  }, [id]);\n\n  const handleLike = async () => {\n    if (liked) return;\n    try {\n      await publicAPI.likeVideo(id);\n      setLikes((p) => p + 1);\n      setLiked(true);\n      if (disliked) { setDislikes((p) => p - 1); setDisliked(false); }\n    } catch (e) {}\n  };\n\n  const handleDislike = async () => {\n    if (disliked) return;\n    try {\n      await publicAPI.dislikeVideo(id);\n      setDislikes((p) => p + 1);\n      setDisliked(true);\n      if (liked) { setLikes((p) => p - 1); setLiked(false); }\n    } catch (e) {}\n  };\n\n  const handleReport = async () => {\n    if (!reportReason.trim()) return;\n    try {\n      await publicAPI.reportVideo(id, { reason: reportReason });\n      setShowReport(false);\n      setReportReason(\"\");\n      alert(\"Report submitted!\");\n    } catch (e) {\n      alert(\"Failed to submit report\");\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-dark-400 flex items-center justify-center\">\n        <LoadingSpinner />\n      </div>\n    );\n  }\n\n  if (error || !video) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 dark:bg-dark-400 flex flex-col items-center justify-center px-4\">\n        <div className=\"text-6xl mb-4\">ðŸ˜•</div>\n        <h2 className=\"text-2xl font-bold text-white mb-2\">Video Not Found</h2>\n        <p className=\"text-gray-400 mb-6\">{error || \"This video may have been removed.\"}</p>\n        <Link to=\"/\" className=\"btn-primary px-6 py-3\">Go Home</Link>\n      </div>\n    );\n  }\n\n  const embedUrl = video.embed_code || video.embedUrl || \"\";\n  const duration = video.duration && video.duration !== \"00:00\" ? video.duration : null;\n  const filtered = relatedVideos.filter((v) => v._id !== id);\n\n  // â˜… UPDATED: Get all categories for this video\n  const allCategories = [];\n  if (video.category && getCategoryName(video.category)) {\n    allCategories.push(video.category);\n  }\n  if (video.categories && Array.isArray(video.categories)) {\n    video.categories.forEach(cat => {\n      const name = getCategoryName(cat);\n      if (name && !allCategories.find(c => getCategoryName(c) === name)) {\n        allCategories.push(cat);\n      }\n    });\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 dark:bg-dark-400\">\n      <SocialBarLoader />\n\n      <div className=\"max-w-[1400px] mx-auto px-0 sm:px-4 lg:px-6 py-0 sm:py-4\">\n        <div className=\"flex flex-col lg:flex-row gap-0 sm:gap-6\">\n          {/* ==================== LEFT COLUMN ==================== */}\n          <div className=\"flex-1 min-w-0\">\n            {/* Video Player */}\n            <div className=\"relative w-full bg-black sm:rounded-xl overflow-hidden\">\n              <div className=\"relative pt-[56.25%]\">\n                {embedUrl ? (\n                  <iframe\n                    src={embedUrl}\n                    className=\"absolute inset-0 w-full h-full\"\n                    frameBorder=\"0\"\n                    scrolling=\"no\"\n                    allowFullScreen\n                    title={video.title}\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                  />\n                ) : (\n                  <div className=\"absolute inset-0 flex items-center justify-center text-gray-400\">\n                    <p>Video not available</p>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Video Info */}\n            <div className=\"px-4 sm:px-0 mt-3\">\n              <h1 className=\"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 dark:text-white leading-tight\">\n                {video.title}\n              </h1>\n\n              <div className=\"flex flex-wrap items-center gap-x-3 gap-y-1 mt-2 text-sm text-gray-500 dark:text-gray-400\">\n                <span className=\"flex items-center gap-1\">\n                  <FiEye className=\"w-4 h-4\" />\n                  {formatViews(video.views || 0)} views\n                </span>\n                <span>â€¢</span>\n                <span className=\"flex items-center gap-1\">\n                  <FiCalendar className=\"w-4 h-4\" />\n                  {formatDate(video.uploadDate || video.createdAt)}\n                </span>\n                {duration && (\n                  <>\n                    <span>â€¢</span>\n                    <span className=\"flex items-center gap-1\">\n                      <FiClock className=\"w-4 h-4\" />\n                      {duration}\n                    </span>\n                  </>\n                )}\n              </div>\n\n              {/* Social Bar */}\n              <div className=\"flex flex-wrap items-center gap-2 mt-4 pb-4 border-b border-gray-200 dark:border-dark-100\">\n                <button\n                  onClick={handleLike}\n                  className={`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-all ${\n                    liked\n                      ? \"bg-primary-600 text-white\"\n                      : \"bg-gray-100 dark:bg-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-200\"\n                  }`}\n                >\n                  <FiThumbsUp className=\"w-4 h-4\" />\n                  <span>{formatViews(likes)}</span>\n                </button>\n\n                <button\n                  onClick={handleDislike}\n                  className={`flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition-all ${\n                    disliked\n                      ? \"bg-gray-600 text-white\"\n                      : \"bg-gray-100 dark:bg-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-200\"\n                  }`}\n                >\n                  <FiThumbsDown className=\"w-4 h-4\" />\n                  <span>{formatViews(dislikes)}</span>\n                </button>\n\n                <ShareButton video={video} />\n\n                <button\n                  onClick={() => setShowReport(!showReport)}\n                  className=\"flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium bg-gray-100 dark:bg-dark-100 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-200 transition-all ml-auto\"\n                >\n                  <FiFlag className=\"w-4 h-4\" />\n                  <span className=\"hidden sm:inline\">Report</span>\n                </button>\n              </div>\n\n              {/* Report Form */}\n              {showReport && (\n                <div className=\"mt-3 p-4 bg-gray-100 dark:bg-dark-200 rounded-xl animate-fade-in\">\n                  <h4 className=\"text-sm font-semibold text-gray-900 dark:text-white mb-2\">Report Video</h4>\n                  <select\n                    value={reportReason}\n                    onChange={(e) => setReportReason(e.target.value)}\n                    className=\"w-full px-3 py-2 bg-white dark:bg-dark-100 border border-gray-200 dark:border-dark-100 rounded-lg text-sm text-gray-900 dark:text-white mb-2\"\n                  >\n                    <option value=\"\">Select reason...</option>\n                    <option value=\"inappropriate\">Inappropriate Content</option>\n                    <option value=\"copyright\">Copyright Violation</option>\n                    <option value=\"spam\">Spam / Misleading</option>\n                    <option value=\"broken\">Video Not Working</option>\n                    <option value=\"other\">Other</option>\n                  </select>\n                  <div className=\"flex gap-2\">\n                    <button onClick={handleReport} disabled={!reportReason} className=\"px-4 py-2 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 disabled:opacity-50\">Submit</button>\n                    <button onClick={() => setShowReport(false)} className=\"px-4 py-2 bg-gray-200 dark:bg-dark-100 text-gray-700 dark:text-gray-300 text-sm rounded-lg\">Cancel</button>\n                  </div>\n                </div>\n              )}\n\n              {/* Description */}\n              {video.description && (\n                <div className=\"mt-4\">\n                  <div\n                    className={`bg-gray-100 dark:bg-dark-200 rounded-xl p-4 cursor-pointer transition-all ${descExpanded ? \"\" : \"max-h-24 overflow-hidden\"}`}\n                    onClick={() => setDescExpanded(!descExpanded)}\n                  >\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300 whitespace-pre-wrap leading-relaxed\">\n                      {video.description}\n                    </p>\n                  </div>\n                  {video.description.length > 150 && (\n                    <button\n                      onClick={() => setDescExpanded(!descExpanded)}\n                      className=\"flex items-center gap-1 mt-2 text-sm text-primary-600 hover:text-primary-700 font-medium\"\n                    >\n                      {descExpanded ? (<>Show less <FiChevronUp className=\"w-4 h-4\" /></>) : (<>Show more <FiChevronDown className=\"w-4 h-4\" /></>)}\n                    </button>\n                  )}\n                </div>\n              )}\n\n              {/* â˜… UPDATED: Categories + Tags Section */}\n              <div className=\"flex flex-wrap items-center gap-2 mt-4\">\n                {/* Categories as clickable links */}\n                {allCategories.map((cat, i) => {\n                  const name = getCategoryName(cat);\n                  const slug = getCategorySlug(cat);\n                  if (!name) return null;\n                  return (\n                    <Link\n                      key={i}\n                      to={`/category/${slug}`}\n                      className=\"px-3 py-1 bg-primary-600/10 text-primary-600 text-xs font-medium rounded-full hover:bg-primary-600/20 transition-colors\"\n                    >\n                      {name}\n                    </Link>\n                  );\n                })}\n\n                {/* Tags */}\n                {video.tags?.map((tag, i) => (\n                  <Link\n                    key={`tag-${i}`}\n                    to={`/tag/${tag}`}\n                    className=\"px-3 py-1 bg-gray-100 dark:bg-dark-100 text-gray-600 dark:text-gray-400 text-xs rounded-full hover:bg-gray-200 dark:hover:bg-dark-200 transition-colors\"\n                  >\n                    #{tag}\n                  </Link>\n                ))}\n              </div>\n\n              {!isMobile && (\n                <div className=\"mt-6\">\n                  <AdSlot adCode={ADS.nativeBanner} label=\"Suggested for you\" className=\"rounded-xl overflow-hidden\" />\n                </div>\n              )}\n\n              {!isMobile && (\n                <div className=\"mt-6 mb-6\">\n                  <AdSlot adCode={ADS.bottom728x90} label=\"Sponsored\" className=\"flex justify-center\" />\n                </div>\n              )}\n\n              {isMobile && (\n                <div className=\"mt-6\">\n                  <AdSlot adCode={ADS.mobile320x50} label=\"Sponsored\" className=\"flex justify-center\" />\n                </div>\n              )}\n            </div>\n\n            {/* MOBILE: Related Videos */}\n            <div className=\"lg:hidden px-4 sm:px-0 mt-6 mb-8\">\n              <h3 className=\"text-base font-bold text-gray-900 dark:text-white mb-4\">\n                Recommended Videos\n              </h3>\n              <div className=\"space-y-3\">\n                {filtered.slice(0, 10).map((v) => (\n                  <RelatedVideoCard key={v._id} video={v} />\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {/* ==================== RIGHT SIDEBAR ==================== */}\n          <div className=\"hidden lg:block w-[400px] flex-shrink-0\">\n            <div className=\"sticky top-20\">\n              <h3 className=\"text-base font-bold text-gray-900 dark:text-white mb-4\">\n                Recommended Videos\n              </h3>\n              <div className=\"space-y-3\">\n                {filtered.slice(0, 3).map((v) => (\n                  <RelatedVideoCard key={v._id} video={v} />\n                ))}\n                <div className=\"py-2\">\n                  <AdSlot adCode={ADS.sidebar300x250} label=\"Sponsored\" className=\"rounded-xl overflow-hidden bg-gray-50 dark:bg-dark-200 p-3\" />\n                </div>\n                {filtered.slice(3, 12).map((v) => (\n                  <RelatedVideoCard key={v._id} video={v} />\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// ==================== RELATED VIDEO CARD ====================\nconst RelatedVideoCard = ({ video }) => {\n  const [imgError, setImgError] = useState(false);\n\n  return (\n    <Link\n      to={`/watch/${video._id}${video.slug ? `/${video.slug}` : \"\"}`}\n      className=\"flex gap-3 group rounded-xl hover:bg-gray-100 dark:hover:bg-dark-200 p-2 transition-colors\"\n    >\n      <div className=\"relative w-[168px] min-w-[168px] sm:w-[180px] sm:min-w-[180px]\">\n        <div className=\"aspect-video rounded-lg overflow-hidden bg-gray-200 dark:bg-dark-100\">\n          <img\n            src={imgError ? PLACEHOLDER : getThumbnail(video)}\n            alt={video.title}\n            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300\"\n            loading=\"lazy\"\n            onError={() => setImgError(true)}\n          />\n        </div>\n        {video.duration && video.duration !== \"00:00\" && (\n          <span className=\"absolute bottom-1.5 right-1.5 px-1.5 py-0.5 bg-black/80 text-white text-[10px] font-medium rounded\">\n            {video.duration}\n          </span>\n        )}\n      </div>\n\n      <div className=\"flex-1 min-w-0 py-0.5\">\n        <h4 className=\"text-sm font-medium text-gray-900 dark:text-white group-hover:text-primary-600 dark:group-hover:text-primary-500 line-clamp-2 leading-snug transition-colors\">\n          {video.title}\n        </h4>\n        <div className=\"mt-2 space-y-0.5\">\n          <p className=\"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1\">\n            <FiEye className=\"w-3 h-3\" />\n            {formatViews(video.views || 0)} views\n          </p>\n          <p className=\"text-xs text-gray-500 dark:text-gray-400\">\n            {formatRelativeDate(video.uploadDate || video.createdAt)}\n          </p>\n          {/* â˜… Show category on related video card */}\n          {video.category && getCategoryName(video.category) && (\n            <p className=\"text-xs text-primary-500\">\n              {getCategoryName(video.category)}\n            </p>\n          )}\n        </div>\n      </div>\n    </Link>\n  );\n};\n\nexport default WatchPage;"],"names":["API_BASE","process","PLACEHOLDER","TelegramIcon","_jsx","viewBox","className","fill","children","d","WhatsAppIcon","FacebookIcon","TwitterIcon","trackShare","async","videoId","platform","fetch","concat","method","headers","body","JSON","stringify","e","ShareModal","_ref","video","isOpen","onClose","copied","setCopied","useState","shareSuccess","setShareSuccess","modalRef","useRef","useEffect","handleEsc","key","document","addEventListener","style","overflow","removeEventListener","thumbnail","thumb","startsWith","length","file_code","getThumbnail","shareUrl","_id","videoPageUrl","window","location","origin","slug","shareTitle","title","shareText","platforms","name","icon","color","shadow","onClick","handleTelegramShare","url","encodeURIComponent","open","setTimeout","priority","handleWhatsAppShare","handleFacebookShare","handleTwitterShare","_jsxs","ref","stopPropagation","FiShare2","FiX","src","alt","onError","target","duration","views","toFixed","replace","toString","FiCheck","map","navigator","share","text","console","error","FiExternalLink","type","readOnly","value","select","clipboard","writeText","input","createElement","position","opacity","appendChild","execCommand","removeChild","_Fragment","FiCopy","_ref2","variant","showModal","setShowModal","handleClick","useCallback","handleClose","ADS","formatViews","formatDate","date","Date","isNaN","getTime","toLocaleDateString","year","month","day","formatRelativeDate","now","past","diff","Math","floor","v","getCategoryName","cat","AdSlot","adCode","label","containerRef","loaded","current","container","innerHTML","tempDiv","scripts","querySelectorAll","nonScript","trim","div","forEach","orig","s","Array","from","attributes","a","setAttribute","textContent","SocialBarLoader","script","contains","RelatedVideoCard","imgError","setImgError","Link","to","loading","FiEye","uploadDate","createdAt","category","_video$tags","id","useParams","setVideo","relatedVideos","setRelatedVideos","setLoading","setError","descExpanded","setDescExpanded","likes","setLikes","dislikes","setDislikes","liked","setLiked","disliked","setDisliked","showReport","setShowReport","reportReason","setReportReason","isMobile","setIsMobile","innerWidth","handleResize","updateMeta","property","content","attr","arguments","undefined","tag","querySelector","head","description","href","_response$data","_response$data2","response","publicAPI","getVideo","videoData","data","recordView","_relRes$data","relRes","getRelatedVideos","success","videos","_randRes$data","randRes","getRandomVideos","e2","err","fetchData","scrollTo","top","behavior","LoadingSpinner","embedUrl","embed_code","filtered","filter","allCategories","push","categories","isArray","find","c","frameBorder","scrolling","allowFullScreen","allow","FiCalendar","FiClock","likeVideo","p","FiThumbsUp","dislikeVideo","FiThumbsDown","ShareButton","FiFlag","onChange","reportVideo","reason","alert","disabled","FiChevronUp","FiChevronDown","i","toLowerCase","getCategorySlug","tags","slice"],"sourceRoot":""}