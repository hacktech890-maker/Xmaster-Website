"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[802],{8227(e,a,t){t.d(a,{A:()=>d});var s=t(5043),r=t(6305),l=t(579);const d=e=>{let{placement:a="home_top",className:t=""}=e;const[d,o]=(0,s.useState)(null);if((0,s.useEffect)(()=>{(async()=>{try{var e,t;const l=window.innerWidth<768?"mobile":"desktop",d=await r.G.getAdByPlacement(a,l);if(null!==(e=d.data)&&void 0!==e&&e.success&&null!==(t=d.data)&&void 0!==t&&t.ad){o(d.data.ad);try{await r.G.recordAdImpression(d.data.ad._id)}catch(s){}}}catch(l){}})()},[a]),!d)return null;return"html"===d.type||"script"===d.type?(0,l.jsx)("div",{className:"ad-container ".concat(t),children:(0,l.jsx)("div",{dangerouslySetInnerHTML:{__html:d.content||d.code}})}):(0,l.jsx)("div",{className:"ad-container ".concat(t),children:(0,l.jsx)("a",{href:d.url||d.link||"#",target:"_blank",rel:"noopener noreferrer nofollow",onClick:async()=>{try{await r.G.recordAdClick(d._id)}catch(e){}},className:"block",children:d.image&&(0,l.jsx)("img",{src:d.image,alt:d.title||"Advertisement",className:"w-full rounded-lg",loading:"lazy"})})})}},4533(e,a,t){t.d(a,{A:()=>d});var s=t(5043),r=t(5772),l=t(579);const d=e=>{let{currentPage:a,totalPages:t,onPageChange:d}=e;if(t<=1)return null;return(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2 mt-8",children:[(0,l.jsxs)("button",{onClick:()=>d(a-1),disabled:1===a,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,l.jsx)(r.irw,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(()=>{const e=[];if(t<=5)for(let a=1;a<=t;a++)e.push(a);else{e.push(1);let s=Math.max(2,a-1),r=Math.min(t-1,a+1);a<=3&&(r=Math.min(4,t-1)),a>=t-2&&(s=Math.max(t-3,2)),s>2&&e.push("...");for(let a=s;a<=r;a++)e.push(a);r<t-1&&e.push("..."),e.push(t)}return e})().map((e,t)=>(0,l.jsx)(s.Fragment,{children:"..."===e?(0,l.jsx)("span",{className:"px-2 py-2 text-gray-500 text-sm",children:"..."}):(0,l.jsx)("button",{onClick:()=>d(e),className:"min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ".concat(a===e?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100"),children:e})},t)),(0,l.jsxs)("button",{onClick:()=>d(a+1),disabled:a===t,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,l.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,l.jsx)(r.fOo,{className:"w-4 h-4"})]})]})}},1932(e,a,t){t.d(a,{A:()=>c});var s=t(5043),r=t(5475),l=t(5772),d=t(579);const o=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",i=e=>{if(!e)return"Unknown Date";const a=new Date,t=new Date(e);if(isNaN(t.getTime()))return"Unknown Date";const s=Math.floor((a-t)/1e3);return s<60?"Just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):s<2592e3?"".concat(Math.floor(s/604800),"w ago"):s<31536e3?"".concat(Math.floor(s/2592e3),"mo ago"):"".concat(Math.floor(s/31536e3),"y ago")},n="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjM2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=",c=e=>{let{video:a,size:t="normal"}=e;const[c,g]=(0,s.useState)(!1),[m,x]=(0,s.useState)(!1);if(!a)return null;const{_id:h,title:p,thumbnail:u,views:b,duration:v,uploadDate:y,createdAt:f,category:j,slug:k,file_code:N}=a,w=null!==b&&void 0!==b?b:0,M=y||f,I=(e=>{if(!e)return"";if("string"===typeof e&&e.includes(":"))return"00:00"===e||"0:00"===e?"":e;if("number"===typeof e&&e>0){const a=Math.floor(e/60),t=Math.floor(e%60);return"".concat(a,":").concat(t.toString().padStart(2,"0"))}return""})(v),A={small:{title:"text-sm line-clamp-2",meta:"text-xs"},normal:{title:"text-sm sm:text-base line-clamp-2",meta:"text-xs sm:text-sm"},large:{title:"text-lg line-clamp-2",meta:"text-sm"}},C=A[t]||A.normal;return(0,d.jsx)(r.N_,{to:"/watch/".concat(h).concat(k?"/".concat(k):""),className:"group block w-full",children:(0,d.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer",children:[(0,d.jsxs)("div",{className:"relative aspect-video bg-gray-800 overflow-hidden",children:[!m&&!c&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse"}),(0,d.jsx)("img",{src:c?n:u&&u.startsWith("http")?u:u&&u.length>3?"https://abyss.to/splash/".concat(u,".jpg"):N?"https://abyss.to/splash/".concat(N,".jpg"):n,alt:p||"Video",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ".concat(m?"opacity-100":"opacity-0"),loading:"lazy",onError:()=>g(!0),onLoad:()=>x(!0)}),I&&(0,d.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/80 rounded text-white text-xs font-medium flex items-center gap-1",children:[(0,d.jsx)(l.Ohp,{className:"w-3 h-3"}),I]}),(0,d.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:(0,d.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-red-600/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transform scale-75 group-hover:scale-100 transition-all duration-300",children:(0,d.jsx)("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}),(0,d.jsxs)("div",{className:"p-2.5 sm:p-3",children:[(0,d.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-500 transition-colors ".concat(C.title),children:p||"Untitled Video"}),(0,d.jsxs)("div",{className:"mt-1.5 flex items-center gap-2 sm:gap-3 text-gray-500 dark:text-gray-400 ".concat(C.meta),children:[(0,d.jsxs)("span",{className:"flex items-center gap-1",children:[(0,d.jsx)(l.Vap,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),o(w)," views"]}),(0,d.jsx)("span",{children:"\u2022"}),(0,d.jsx)("span",{children:i(M)})]}),j&&(0,d.jsx)("div",{className:"mt-1.5",children:(0,d.jsx)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-dark-100 text-gray-600 dark:text-gray-400 rounded-full",children:"string"===typeof j?j:(null===j||void 0===j?void 0:j.name)||"General"})})]})]})})}},958(e,a,t){t.d(a,{A:()=>o,F:()=>d});t(5043);var s=t(1932),r=t(6630),l=t(579);const d=e=>{let{count:a=8,columns:t=4}=e;const s={4:"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"};return(0,l.jsx)("div",{className:"grid ".concat(s[t]||s[4]," gap-3 sm:gap-4 md:gap-6"),children:[...Array(a)].map((e,a)=>(0,l.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-xl overflow-hidden animate-pulse",children:[(0,l.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-dark-100"}),(0,l.jsxs)("div",{className:"p-3 space-y-2",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-dark-100 rounded w-3/4"}),(0,l.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-dark-100 rounded w-1/2"})]})]},a))})},o=e=>{let{videos:a=[],loading:t=!1,error:d=null,emptyMessage:o="No videos found",columns:i=4}=e;if(t)return(0,l.jsx)(r.A,{});if(d)return(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-red-500 mb-2",children:"\u26a0\ufe0f"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:d})]});if(!a||0===a.length)return(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfac"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:o})]});const n={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-2 sm:grid-cols-2 lg:grid-cols-3",4:"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",5:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",6:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"};return(0,l.jsx)("div",{className:"grid ".concat(n[i]||n[4]," gap-3 sm:gap-4 md:gap-6"),children:a.map(e=>(0,l.jsx)(s.A,{video:e},e._id))})}},802(e,a,t){t.r(a),t.d(a,{default:()=>x});var s=t(5043),r=t(5475),l=t(3216),d=t(1344),o=t(5772),i=t(6305),n=t(958),c=t(4533),g=t(8227),m=t(579);const x=()=>{const[e,a]=(0,r.ok)(),{tag:t}=(0,l.g)(),x=e.get("q")||"",h=e.get("sort")||"relevance",p=e.get("category")||"",u=parseInt(e.get("page"))||1,[b,v]=(0,s.useState)([]),[y,f]=(0,s.useState)(!0),[j,k]=(0,s.useState)({page:1,pages:1,total:0}),[N,w]=(0,s.useState)([]),[M,I]=(0,s.useState)(!1);(0,s.useEffect)(()=>{i.G.getCategories().then(e=>{e.data.success&&w(e.data.categories)}).catch(console.error)},[]),(0,s.useEffect)(()=>{(async()=>{f(!0);try{let e;e=t?await i.G.searchByTag(t,{page:u,sort:h,limit:20}):await i.G.searchVideos({q:x,page:u,sort:h,category:p,limit:20}),e.data.success&&(v(e.data.videos),k(e.data.pagination))}catch(e){console.error("Search failed:",e)}finally{f(!1)}})()},[x,h,p,u,t]);const A=e=>{a(a=>(e?a.set("category",e):a.delete("category"),a.set("page","1"),a))},C=t?"#".concat(t," - Tag Results"):x?"Search: ".concat(x):"Browse Videos";return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(d.mg,{children:(0,m.jsxs)("title",{children:[C," - Xmaster"]})}),(0,m.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:[(0,m.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100",children:(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:t?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{className:"text-primary-500",children:"#"}),t]}):x?(0,m.jsxs)(m.Fragment,{children:['Results for "',(0,m.jsx)("span",{className:"text-primary-500",children:x}),'"']}):"Browse Videos"}),(0,m.jsxs)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:[j.total," videos found"]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("select",{value:h,onChange:e=>{return t=e.target.value,void a(e=>(e.set("sort",t),e.set("page","1"),e));var t},className:"input-field py-2 pr-8",children:[{value:"relevance",label:"Relevance"},{value:"newest",label:"Newest"},{value:"oldest",label:"Oldest"},{value:"views",label:"Most Viewed"},{value:"likes",label:"Most Liked"}].map(e=>(0,m.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,m.jsx)("button",{onClick:()=>I(!M),className:"sm:hidden p-2 bg-gray-100 dark:bg-dark-200 rounded-lg",children:(0,m.jsx)(o.K7R,{className:"w-5 h-5"})})]})]}),(0,m.jsx)("div",{className:"mt-4 ".concat(M?"block":"hidden sm:block"),children:(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,m.jsx)("button",{onClick:()=>A(""),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(p?"bg-gray-100 dark:bg-dark-200 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-100":"bg-primary-600 text-white"),children:"All"}),N.map(e=>(0,m.jsx)("button",{onClick:()=>A(e._id),className:"px-4 py-2 rounded-full text-sm font-medium transition-colors ".concat(p===e._id?"bg-primary-600 text-white":"bg-gray-100 dark:bg-dark-200 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-100"),children:e.name},e._id))]})})]})}),(0,m.jsx)(g.A,{placement:"search_top",className:"max-w-7xl mx-auto px-4 pt-6"}),(0,m.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,m.jsx)(n.A,{videos:b,loading:y,emptyMessage:x?'No videos found for "'.concat(x,'"'):"No videos found"}),(0,m.jsx)(c.A,{currentPage:j.page,totalPages:j.pages,onPageChange:e=>{a(a=>(a.set("page",e.toString()),a)),window.scrollTo({top:0,behavior:"smooth"})}})]})]})]})}}}]);
//# sourceMappingURL=802.18ea07f1.chunk.js.map