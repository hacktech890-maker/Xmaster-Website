{"version":3,"file":"static/js/802.18ea07f1.chunk.js","mappings":"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","sources":["components/ads/AdBanner.jsx","components/common/Pagination.jsx","components/video/VideoCard.jsx","components/video/VideoGrid.jsx","pages/public/SearchPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { publicAPI } from '../../services/api';\r\n\r\nconst AdBanner = ({ placement = 'home_top', className = '' }) => {\r\n  const [ad, setAd] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchAd = async () => {\r\n      try {\r\n        const device = window.innerWidth < 768 ? 'mobile' : 'desktop';\r\n        const response = await publicAPI.getAdByPlacement(placement, device);\r\n        if (response.data?.success && response.data?.ad) {\r\n          setAd(response.data.ad);\r\n          // Record impression\r\n          try {\r\n            await publicAPI.recordAdImpression(response.data.ad._id);\r\n          } catch (e) {\r\n            // Silent fail\r\n          }\r\n        }\r\n      } catch (error) {\r\n        // No ad available - that's fine\r\n      }\r\n    };\r\n\r\n    fetchAd();\r\n  }, [placement]);\r\n\r\n  if (!ad) return null;\r\n\r\n  const handleClick = async () => {\r\n    try {\r\n      await publicAPI.recordAdClick(ad._id);\r\n    } catch (e) {\r\n      // Silent fail\r\n    }\r\n  };\r\n\r\n  // HTML ad (like AdSense or custom script)\r\n  if (ad.type === 'html' || ad.type === 'script') {\r\n    return (\r\n      <div className={`ad-container ${className}`}>\r\n        <div dangerouslySetInnerHTML={{ __html: ad.content || ad.code }} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Image/Banner ad\r\n  return (\r\n    <div className={`ad-container ${className}`}>\r\n      <a\r\n        href={ad.url || ad.link || '#'}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer nofollow\"\r\n        onClick={handleClick}\r\n        className=\"block\"\r\n      >\r\n        {ad.image && (\r\n          <img\r\n            src={ad.image}\r\n            alt={ad.title || 'Advertisement'}\r\n            className=\"w-full rounded-lg\"\r\n            loading=\"lazy\"\r\n          />\r\n        )}\r\n      </a>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdBanner;","import React from 'react';\r\nimport { FiChevronLeft, FiChevronRight } from 'react-icons/fi';\r\n\r\nconst Pagination = ({ currentPage, totalPages, onPageChange }) => {\r\n  if (totalPages <= 1) return null;\r\n\r\n  const getPageNumbers = () => {\r\n    const pages = [];\r\n    const maxVisible = 5;\r\n\r\n    if (totalPages <= maxVisible) {\r\n      for (let i = 1; i <= totalPages; i++) pages.push(i);\r\n    } else {\r\n      pages.push(1);\r\n\r\n      let start = Math.max(2, currentPage - 1);\r\n      let end = Math.min(totalPages - 1, currentPage + 1);\r\n\r\n      if (currentPage <= 3) {\r\n        end = Math.min(4, totalPages - 1);\r\n      }\r\n      if (currentPage >= totalPages - 2) {\r\n        start = Math.max(totalPages - 3, 2);\r\n      }\r\n\r\n      if (start > 2) pages.push('...');\r\n      for (let i = start; i <= end; i++) pages.push(i);\r\n      if (end < totalPages - 1) pages.push('...');\r\n\r\n      pages.push(totalPages);\r\n    }\r\n\r\n    return pages;\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center gap-1 sm:gap-2 mt-8\">\r\n      {/* Previous */}\r\n      <button\r\n        onClick={() => onPageChange(currentPage - 1)}\r\n        disabled={currentPage === 1}\r\n        className=\"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n      >\r\n        <FiChevronLeft className=\"w-4 h-4\" />\r\n        <span className=\"hidden sm:inline\">Prev</span>\r\n      </button>\r\n\r\n      {/* Page Numbers */}\r\n      {getPageNumbers().map((page, i) => (\r\n        <React.Fragment key={i}>\r\n          {page === '...' ? (\r\n            <span className=\"px-2 py-2 text-gray-500 text-sm\">...</span>\r\n          ) : (\r\n            <button\r\n              onClick={() => onPageChange(page)}\r\n              className={`min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ${\r\n                currentPage === page\r\n                  ? 'bg-primary-600 text-white'\r\n                  : 'text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100'\r\n              }`}\r\n            >\r\n              {page}\r\n            </button>\r\n          )}\r\n        </React.Fragment>\r\n      ))}\r\n\r\n      {/* Next */}\r\n      <button\r\n        onClick={() => onPageChange(currentPage + 1)}\r\n        disabled={currentPage === totalPages}\r\n        className=\"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n      >\r\n        <span className=\"hidden sm:inline\">Next</span>\r\n        <FiChevronRight className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Pagination;","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { FiEye, FiClock } from \"react-icons/fi\";\r\n\r\nconst formatViews = (views) => {\r\n  if (!views) return \"0\";\r\n  if (views >= 1000000) return (views / 1000000).toFixed(1).replace(/\\.0$/, \"\") + \"M\";\r\n  if (views >= 1000) return (views / 1000).toFixed(1).replace(/\\.0$/, \"\") + \"K\";\r\n  return views.toString();\r\n};\r\n\r\nconst formatDate = (date) => {\r\n  if (!date) return \"Unknown Date\";\r\n  const now = new Date();\r\n  const past = new Date(date);\r\n  if (isNaN(past.getTime())) return \"Unknown Date\";\r\n  const diff = Math.floor((now - past) / 1000);\r\n  if (diff < 60) return \"Just now\";\r\n  if (diff < 3600) return `${Math.floor(diff / 60)}m ago`;\r\n  if (diff < 86400) return `${Math.floor(diff / 3600)}h ago`;\r\n  if (diff < 604800) return `${Math.floor(diff / 86400)}d ago`;\r\n  if (diff < 2592000) return `${Math.floor(diff / 604800)}w ago`;\r\n  if (diff < 31536000) return `${Math.floor(diff / 2592000)}mo ago`;\r\n  return `${Math.floor(diff / 31536000)}y ago`;\r\n};\r\n\r\nconst formatDuration = (duration) => {\r\n  if (!duration) return \"\";\r\n  if (typeof duration === \"string\" && duration.includes(\":\")) {\r\n    if (duration === \"00:00\" || duration === \"0:00\") return \"\";\r\n    return duration;\r\n  }\r\n  if (typeof duration === \"number\" && duration > 0) {\r\n    const mins = Math.floor(duration / 60);\r\n    const secs = Math.floor(duration % 60);\r\n    return `${mins}:${secs.toString().padStart(2, \"0\")}`;\r\n  }\r\n  return \"\";\r\n};\r\n\r\nconst PLACEHOLDER =\r\n  \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjM2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=\";\r\n\r\nconst VideoCard = ({ video, size = \"normal\" }) => {\r\n  const [imageError, setImageError] = useState(false);\r\n  const [imageLoaded, setImageLoaded] = useState(false);\r\n\r\n  if (!video) return null;\r\n\r\n  const { _id, title, thumbnail, views, duration, uploadDate, createdAt, category, slug, file_code } = video;\r\n\r\n  const realViews = views ?? 0;\r\n  const realDate = uploadDate || createdAt;\r\n  const formattedDuration = formatDuration(duration);\r\n\r\n  const sizes = {\r\n    small: { title: \"text-sm line-clamp-2\", meta: \"text-xs\" },\r\n    normal: { title: \"text-sm sm:text-base line-clamp-2\", meta: \"text-xs sm:text-sm\" },\r\n    large: { title: \"text-lg line-clamp-2\", meta: \"text-sm\" },\r\n  };\r\n  const currentSize = sizes[size] || sizes.normal;\r\n\r\n  const getThumbnailUrl = () => {\r\n    if (imageError) return PLACEHOLDER;\r\n    if (thumbnail && thumbnail.startsWith(\"http\")) return thumbnail;\r\n    if (thumbnail && thumbnail.length > 3) return `https://abyss.to/splash/${thumbnail}.jpg`;\r\n    if (file_code) return `https://abyss.to/splash/${file_code}.jpg`;\r\n    return PLACEHOLDER;\r\n  };\r\n\r\n  return (\r\n    <Link to={`/watch/${_id}${slug ? `/${slug}` : \"\"}`} className=\"group block w-full\">\r\n      <div className=\"bg-white dark:bg-dark-200 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer\">\r\n        {/* Thumbnail */}\r\n        <div className=\"relative aspect-video bg-gray-800 overflow-hidden\">\r\n          {!imageLoaded && !imageError && (\r\n            <div className=\"absolute inset-0 bg-gray-800 animate-pulse\" />\r\n          )}\r\n          <img\r\n            src={getThumbnailUrl()}\r\n            alt={title || \"Video\"}\r\n            className={`w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ${imageLoaded ? \"opacity-100\" : \"opacity-0\"}`}\r\n            loading=\"lazy\"\r\n            onError={() => setImageError(true)}\r\n            onLoad={() => setImageLoaded(true)}\r\n          />\r\n          {formattedDuration && (\r\n            <div className=\"absolute bottom-2 right-2 px-2 py-1 bg-black/80 rounded text-white text-xs font-medium flex items-center gap-1\">\r\n              <FiClock className=\"w-3 h-3\" />\r\n              {formattedDuration}\r\n            </div>\r\n          )}\r\n          <div className=\"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center\">\r\n            <div className=\"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-red-600/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transform scale-75 group-hover:scale-100 transition-all duration-300\">\r\n              <svg className=\"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                <path d=\"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z\" />\r\n              </svg>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Info */}\r\n        <div className=\"p-2.5 sm:p-3\">\r\n          <h3 className={`font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-500 transition-colors ${currentSize.title}`}>\r\n            {title || \"Untitled Video\"}\r\n          </h3>\r\n          <div className={`mt-1.5 flex items-center gap-2 sm:gap-3 text-gray-500 dark:text-gray-400 ${currentSize.meta}`}>\r\n            <span className=\"flex items-center gap-1\">\r\n              <FiEye className=\"w-3 h-3 sm:w-3.5 sm:h-3.5\" />\r\n              {formatViews(realViews)} views\r\n            </span>\r\n            <span>‚Ä¢</span>\r\n            <span>{formatDate(realDate)}</span>\r\n          </div>\r\n          {category && (\r\n            <div className=\"mt-1.5\">\r\n              <span className=\"text-xs px-2 py-0.5 bg-gray-100 dark:bg-dark-100 text-gray-600 dark:text-gray-400 rounded-full\">\r\n                {typeof category === \"string\" ? category : category?.name || \"General\"}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default VideoCard;","import React from 'react';\r\nimport VideoCard from './VideoCard';\r\nimport LoadingSpinner from '../common/LoadingSpinner';\r\n\r\nconst VideoGrid = ({ videos = [], loading = false, error = null, emptyMessage = 'No videos found', columns = 4 }) => {\r\n  if (loading) return <LoadingSpinner />;\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-red-500 mb-2\">‚ö†Ô∏è</div>\r\n        <p className=\"text-gray-600 dark:text-gray-400\">{error}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!videos || videos.length === 0) {\r\n    return (\r\n      <div className=\"text-center py-12\">\r\n        <div className=\"text-4xl mb-4\">üé¨</div>\r\n        <p className=\"text-gray-600 dark:text-gray-400\">{emptyMessage}</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const gridCols = {\r\n    1: 'grid-cols-1',\r\n    2: 'grid-cols-1 sm:grid-cols-2',\r\n    3: 'grid-cols-2 sm:grid-cols-2 lg:grid-cols-3',\r\n    4: 'grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4',\r\n    5: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5',\r\n    6: 'grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${gridCols[columns] || gridCols[4]} gap-3 sm:gap-4 md:gap-6`}>\r\n      {videos.map((video) => (\r\n        <VideoCard key={video._id} video={video} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const VideoGridSkeleton = ({ count = 8, columns = 4 }) => {\r\n  const gridCols = {\r\n    4: 'grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4',\r\n  };\r\n\r\n  return (\r\n    <div className={`grid ${gridCols[columns] || gridCols[4]} gap-3 sm:gap-4 md:gap-6`}>\r\n      {[...Array(count)].map((_, i) => (\r\n        <div key={i} className=\"bg-white dark:bg-dark-200 rounded-xl overflow-hidden animate-pulse\">\r\n          <div className=\"aspect-video bg-gray-200 dark:bg-dark-100\"></div>\r\n          <div className=\"p-3 space-y-2\">\r\n            <div className=\"h-4 bg-gray-200 dark:bg-dark-100 rounded w-3/4\"></div>\r\n            <div className=\"h-3 bg-gray-200 dark:bg-dark-100 rounded w-1/2\"></div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default VideoGrid;","import React, { useState, useEffect } from 'react';\nimport { useSearchParams, useParams } from 'react-router-dom';\nimport { Helmet } from 'react-helmet-async';\nimport { FiSearch, FiFilter, FiX } from 'react-icons/fi';\nimport { publicAPI } from '../../services/api';\nimport VideoGrid from '../../components/video/VideoGrid';\nimport Pagination from '../../components/common/Pagination';\nimport AdBanner from '../../components/ads/AdBanner';\n\nconst SearchPage = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const { tag } = useParams();\n  \n  const query = searchParams.get('q') || '';\n  const sort = searchParams.get('sort') || 'relevance';\n  const category = searchParams.get('category') || '';\n  const page = parseInt(searchParams.get('page')) || 1;\n\n  const [videos, setVideos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [pagination, setPagination] = useState({ page: 1, pages: 1, total: 0 });\n  const [categories, setCategories] = useState([]);\n  const [showFilters, setShowFilters] = useState(false);\n\n  // Fetch categories for filter\n  useEffect(() => {\n    publicAPI.getCategories()\n      .then(res => {\n        if (res.data.success) {\n          setCategories(res.data.categories);\n        }\n      })\n      .catch(console.error);\n  }, []);\n\n  // Fetch search results\n  useEffect(() => {\n    const fetchResults = async () => {\n      setLoading(true);\n      try {\n        let response;\n        \n        if (tag) {\n          // Search by tag\n          response = await publicAPI.searchByTag(tag, { page, sort, limit: 20 });\n        } else {\n          // Normal search\n          response = await publicAPI.searchVideos({ \n            q: query, \n            page, \n            sort, \n            category,\n            limit: 20 \n          });\n        }\n\n        if (response.data.success) {\n          setVideos(response.data.videos);\n          setPagination(response.data.pagination);\n        }\n      } catch (error) {\n        console.error('Search failed:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchResults();\n  }, [query, sort, category, page, tag]);\n\n  const handleSortChange = (newSort) => {\n    setSearchParams(prev => {\n      prev.set('sort', newSort);\n      prev.set('page', '1');\n      return prev;\n    });\n  };\n\n  const handleCategoryChange = (newCategory) => {\n    setSearchParams(prev => {\n      if (newCategory) {\n        prev.set('category', newCategory);\n      } else {\n        prev.delete('category');\n      }\n      prev.set('page', '1');\n      return prev;\n    });\n  };\n\n  const handlePageChange = (newPage) => {\n    setSearchParams(prev => {\n      prev.set('page', newPage.toString());\n      return prev;\n    });\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const sortOptions = [\n    { value: 'relevance', label: 'Relevance' },\n    { value: 'newest', label: 'Newest' },\n    { value: 'oldest', label: 'Oldest' },\n    { value: 'views', label: 'Most Viewed' },\n    { value: 'likes', label: 'Most Liked' },\n  ];\n\n  const pageTitle = tag \n    ? `#${tag} - Tag Results` \n    : query \n      ? `Search: ${query}` \n      : 'Browse Videos';\n\n  return (\n    <>\n      <Helmet>\n        <title>{pageTitle} - Xmaster</title>\n      </Helmet>\n\n      <div className=\"min-h-screen bg-gray-50 dark:bg-dark-400\">\n        {/* Search Header */}\n        <div className=\"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100\">\n          <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n            <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4\">\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\n                  {tag ? (\n                    <>\n                      <span className=\"text-primary-500\">#</span>{tag}\n                    </>\n                  ) : query ? (\n                    <>\n                      Results for \"<span className=\"text-primary-500\">{query}</span>\"\n                    </>\n                  ) : (\n                    'Browse Videos'\n                  )}\n                </h1>\n                <p className=\"text-gray-600 dark:text-gray-400 mt-1\">\n                  {pagination.total} videos found\n                </p>\n              </div>\n\n              <div className=\"flex items-center gap-3\">\n                {/* Sort Dropdown */}\n                <select\n                  value={sort}\n                  onChange={(e) => handleSortChange(e.target.value)}\n                  className=\"input-field py-2 pr-8\"\n                >\n                  {sortOptions.map(option => (\n                    <option key={option.value} value={option.value}>\n                      {option.label}\n                    </option>\n                  ))}\n                </select>\n\n                {/* Filter Toggle (Mobile) */}\n                <button\n                  onClick={() => setShowFilters(!showFilters)}\n                  className=\"sm:hidden p-2 bg-gray-100 dark:bg-dark-200 rounded-lg\"\n                >\n                  <FiFilter className=\"w-5 h-5\" />\n                </button>\n              </div>\n            </div>\n\n            {/* Filters */}\n            <div className={`mt-4 ${showFilters ? 'block' : 'hidden sm:block'}`}>\n              <div className=\"flex flex-wrap gap-2\">\n                <button\n                  onClick={() => handleCategoryChange('')}\n                  className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\n                    !category\n                      ? 'bg-primary-600 text-white'\n                      : 'bg-gray-100 dark:bg-dark-200 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-100'\n                  }`}\n                >\n                  All\n                </button>\n                {categories.map(cat => (\n                  <button\n                    key={cat._id}\n                    onClick={() => handleCategoryChange(cat._id)}\n                    className={`px-4 py-2 rounded-full text-sm font-medium transition-colors ${\n                      category === cat._id\n                        ? 'bg-primary-600 text-white'\n                        : 'bg-gray-100 dark:bg-dark-200 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-100'\n                    }`}\n                  >\n                    {cat.name}\n                  </button>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Top Ad */}\n        <AdBanner placement=\"search_top\" className=\"max-w-7xl mx-auto px-4 pt-6\" />\n\n        {/* Results */}\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\n          <VideoGrid \n            videos={videos} \n            loading={loading}\n            emptyMessage={\n              query \n                ? `No videos found for \"${query}\"`\n                : 'No videos found'\n            }\n          />\n\n          {/* Pagination */}\n          <Pagination\n            currentPage={pagination.page}\n            totalPages={pagination.pages}\n            onPageChange={handlePageChange}\n          />\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default SearchPage;"],"names":["_ref","placement","className","ad","setAd","useState","useEffect","async","_response$data","_response$data2","device","window","innerWidth","response","publicAPI","getAdByPlacement","data","success","recordAdImpression","_id","e","error","fetchAd","type","_jsx","concat","children","dangerouslySetInnerHTML","__html","content","code","href","url","link","target","rel","onClick","recordAdClick","image","src","alt","title","loading","currentPage","totalPages","onPageChange","_jsxs","disabled","FiChevronLeft","getPageNumbers","pages","i","push","start","Math","max","end","min","map","page","React","FiChevronRight","formatViews","views","toFixed","replace","toString","formatDate","date","now","Date","past","isNaN","getTime","diff","floor","PLACEHOLDER","video","size","imageError","setImageError","imageLoaded","setImageLoaded","thumbnail","duration","uploadDate","createdAt","category","slug","file_code","realViews","realDate","formattedDuration","includes","mins","secs","padStart","formatDuration","sizes","small","meta","normal","large","currentSize","Link","to","startsWith","length","onError","onLoad","FiClock","fill","viewBox","d","FiEye","name","VideoGridSkeleton","_ref2","count","columns","gridCols","Array","_","videos","emptyMessage","LoadingSpinner","VideoCard","SearchPage","searchParams","setSearchParams","useSearchParams","tag","useParams","query","get","sort","parseInt","setVideos","setLoading","pagination","setPagination","total","categories","setCategories","showFilters","setShowFilters","getCategories","then","res","catch","console","searchByTag","limit","searchVideos","q","fetchResults","handleCategoryChange","newCategory","prev","set","delete","pageTitle","_Fragment","Helmet","value","onChange","handleSortChange","newSort","label","option","FiFilter","cat","AdBanner","VideoGrid","Pagination","newPage","scrollTo","top","behavior"],"sourceRoot":""}