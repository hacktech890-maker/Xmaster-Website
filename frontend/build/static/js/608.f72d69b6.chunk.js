"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[608],{5992(e,s,a){a.d(s,{A:()=>x});var t=a(5043),l=a(5772),r=a(3216),d=a(5475),i=a(5187),n=a(579);const c=e=>{let{isOpen:s,onClose:a}=e;const t=(0,r.zy)(),c=(0,r.Zp)(),{logout:o}=(0,i.A)(),x=[{path:"/admin/dashboard",icon:l.V5Y,label:"Dashboard"},{path:"/admin/videos",icon:l.pVQ,label:"Videos"},{path:"/admin/upload",icon:l.B88,label:"Upload"},{path:"/admin/categories",icon:l.QPV,label:"Categories"},{path:"/admin/ads",icon:l.z8N,label:"Ads"},{path:"/admin/reports",icon:l.QsL,label:"Reports"}];return(0,n.jsxs)(n.Fragment,{children:[s&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:a}),(0,n.jsx)("aside",{className:"fixed lg:static inset-y-0 left-0 z-50 w-64 bg-dark-300 transform transition-transform duration-300 lg:transform-none ".concat(s?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-dark-100",children:[(0,n.jsxs)(d.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center",children:(0,n.jsx)("span",{className:"text-white font-bold text-xl",children:"X"})}),(0,n.jsx)("span",{className:"text-lg font-bold text-white",children:"Admin"})]}),(0,n.jsx)("button",{onClick:a,className:"lg:hidden p-2 hover:bg-dark-200 rounded-lg",children:(0,n.jsx)(l.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,n.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(e=>{return(0,n.jsxs)(d.N_,{to:e.path,onClick:a,className:"flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat((s=e.path,t.pathname===s?"bg-primary-600 text-white":"text-gray-400 hover:bg-dark-200 hover:text-white")),children:[(0,n.jsx)(e.icon,{className:"w-5 h-5"}),(0,n.jsx)("span",{className:"font-medium",children:e.label})]},e.path);var s})}),(0,n.jsxs)("div",{className:"p-4 border-t border-dark-100 space-y-2",children:[(0,n.jsxs)(d.N_,{to:"/",target:"_blank",className:"flex items-center gap-3 px-4 py-3 rounded-lg text-gray-400 hover:bg-dark-200 hover:text-white transition-all",children:[(0,n.jsx)(l.vQY,{className:"w-5 h-5"}),(0,n.jsx)("span",{className:"font-medium",children:"View Site"})]}),(0,n.jsxs)("button",{onClick:()=>{o(),c("/xmaster-admin")},className:"flex items-center gap-3 px-4 py-3 rounded-lg text-red-400 hover:bg-red-500/10 hover:text-red-500 transition-all w-full",children:[(0,n.jsx)(l.QeK,{className:"w-5 h-5"}),(0,n.jsx)("span",{className:"font-medium",children:"Logout"})]})]})]})})]})};var o=a(9362);const x=e=>{let{children:s,title:a}=e;const[r,d]=(0,t.useState)(!1);return(0,n.jsxs)("div",{className:"min-h-screen bg-dark-400 flex",children:[(0,n.jsx)(c,{isOpen:r,onClose:()=>d(!1)}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,n.jsx)("header",{className:"bg-dark-300 border-b border-dark-100 px-4 lg:px-6 py-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsx)("button",{onClick:()=>d(!0),className:"lg:hidden p-2 hover:bg-dark-200 rounded-lg text-gray-400",children:(0,n.jsx)(l.ND1,{className:"w-6 h-6"})}),(0,n.jsx)("h1",{className:"text-xl font-semibold text-white",children:a})]}),(0,n.jsx)(o.A,{})]})}),(0,n.jsx)("main",{className:"flex-1 p-4 lg:p-6 overflow-auto",children:s})]})]})}},4533(e,s,a){a.d(s,{A:()=>d});var t=a(5043),l=a(5772),r=a(579);const d=e=>{let{currentPage:s,totalPages:a,onPageChange:d}=e;if(a<=1)return null;return(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-8",children:[(0,r.jsx)("button",{onClick:()=>d(s-1),disabled:1===s,className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-200 hover:bg-gray-200 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(l.irw,{className:"w-5 h-5"})}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:(()=>{const e=[];if(a>7)if(s<=4){for(let s=1;s<=5;s++)e.push(s);e.push("..."),e.push(a)}else if(s>=a-3){e.push(1),e.push("...");for(let s=a-4;s<=a;s++)e.push(s)}else{e.push(1),e.push("...");for(let a=s-1;a<=s+1;a++)e.push(a);e.push("..."),e.push(a)}else for(let s=1;s<=a;s++)e.push(s);return e})().map((e,a)=>(0,r.jsx)(t.Fragment,{children:"..."===e?(0,r.jsx)("span",{className:"px-3 py-2 text-gray-500",children:"..."}):(0,r.jsx)("button",{onClick:()=>d(e),className:"min-w-[40px] h-10 rounded-lg font-medium transition-colors ".concat(s===e?"bg-primary-600 text-white":"bg-gray-100 dark:bg-dark-200 hover:bg-gray-200 dark:hover:bg-dark-100 text-gray-700 dark:text-gray-300"),children:e})},a))}),(0,r.jsx)("button",{onClick:()=>d(s+1),disabled:s===a,className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-200 hover:bg-gray-200 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(l.fOo,{className:"w-5 h-5"})})]})}},3608(e,s,a){a.r(s),a.d(s,{default:()=>p});var t=a(9379),l=a(5043),r=a(5475),d=a(5772),i=a(3768),n=a(6305),c=a(5992),o=a(4533),x=a(6630),h=a(6047),m=a(579);const u=e=>{var s;let{video:a,onClose:r,onSave:c}=e;const[o,x]=(0,l.useState)({title:a.title||"",description:a.description||"",tags:(null===(s=a.tags)||void 0===s?void 0:s.join(", "))||"",status:a.status||"public",featured:a.featured||!1}),[h,u]=(0,l.useState)(!1);return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-dark-100",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Edit Video"}),(0,m.jsx)("button",{onClick:r,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,m.jsx)(d.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{const e=await n.Er.updateVideo(a._id,(0,t.A)((0,t.A)({},o),{},{tags:o.tags.split(",").map(e=>e.trim()).filter(Boolean)}));e.data.success&&c(e.data.video)}catch(s){i.Ay.error("Failed to update video")}finally{u(!1)}},className:"p-6 space-y-4",children:[(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsx)("img",{src:a.thumbnail,alt:a.title,className:"w-40 h-24 object-cover rounded-lg"}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"File Code"}),(0,m.jsx)("p",{className:"text-white font-mono",children:a.file_code})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),(0,m.jsx)("input",{type:"text",value:o.title,onChange:e=>x((0,t.A)((0,t.A)({},o),{},{title:e.target.value})),className:"input-field",required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,m.jsx)("textarea",{value:o.description,onChange:e=>x((0,t.A)((0,t.A)({},o),{},{description:e.target.value})),rows:4,className:"input-field resize-none"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),(0,m.jsx)("input",{type:"text",value:o.tags,onChange:e=>x((0,t.A)((0,t.A)({},o),{},{tags:e.target.value})),className:"input-field",placeholder:"tag1, tag2, tag3"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,m.jsxs)("select",{value:o.status,onChange:e=>x((0,t.A)((0,t.A)({},o),{},{status:e.target.value})),className:"input-field",children:[(0,m.jsx)("option",{value:"public",children:"Public"}),(0,m.jsx)("option",{value:"private",children:"Private"}),(0,m.jsx)("option",{value:"unlisted",children:"Unlisted"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Featured"}),(0,m.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-dark-100 rounded-lg cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:o.featured,onChange:e=>x((0,t.A)((0,t.A)({},o),{},{featured:e.target.checked})),className:"rounded"}),(0,m.jsx)("span",{className:"text-gray-300",children:"Featured on homepage"})]})]})]}),(0,m.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,m.jsx)("button",{type:"button",onClick:r,className:"flex-1 btn-secondary",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",disabled:h,className:"flex-1 btn-primary",children:h?"Saving...":"Save Changes"})]})]})]})})},p=()=>{const[e,s]=(0,l.useState)([]),[a,p]=(0,l.useState)(!0),[g,b]=(0,l.useState)({page:1,pages:1,total:0}),[j,f]=(0,l.useState)([]),[v,N]=(0,l.useState)(null),[y,k]=(0,l.useState)(""),[w,C]=(0,l.useState)(""),[A,S]=(0,l.useState)(""),[_,V]=(0,l.useState)("newest"),[F,P]=(0,l.useState)(1),D=(0,l.useCallback)(async()=>{p(!0);try{const e=await n.Er.getVideos({page:F,limit:20,search:y,status:w,featured:A,sort:_});e.data.success&&(s(e.data.videos),b(e.data.pagination))}catch(e){console.error("Failed to fetch videos:",e),i.Ay.error("Failed to load videos")}finally{p(!1)}},[F,y,w,A,_]);(0,l.useEffect)(()=>{D()},[D]);const E=(0,h.sg)(e=>{k(e),P(1)},500);return(0,m.jsxs)(c.A,{title:"Videos Manager",children:[(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 mb-6 border border-dark-100",children:[(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,m.jsxs)("div",{className:"flex-1 relative",children:[(0,m.jsx)(d.CKj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),(0,m.jsx)("input",{type:"text",placeholder:"Search videos...",onChange:e=>E(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-white"})]}),(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsxs)("select",{value:w,onChange:e=>{C(e.target.value),P(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,m.jsx)("option",{value:"",children:"All Status"}),(0,m.jsx)("option",{value:"public",children:"Public"}),(0,m.jsx)("option",{value:"private",children:"Private"}),(0,m.jsx)("option",{value:"unlisted",children:"Unlisted"})]}),(0,m.jsxs)("select",{value:A,onChange:e=>{S(e.target.value),P(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,m.jsx)("option",{value:"",children:"All Videos"}),(0,m.jsx)("option",{value:"true",children:"Featured"}),(0,m.jsx)("option",{value:"false",children:"Not Featured"})]}),(0,m.jsxs)("select",{value:_,onChange:e=>{V(e.target.value),P(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,m.jsx)("option",{value:"newest",children:"Newest"}),(0,m.jsx)("option",{value:"oldest",children:"Oldest"}),(0,m.jsx)("option",{value:"views",children:"Most Viewed"}),(0,m.jsx)("option",{value:"title",children:"Title A-Z"})]})]}),(0,m.jsxs)(r.N_,{to:"/admin/upload",className:"btn-primary",children:[(0,m.jsx)(d.GGD,{className:"w-5 h-5"}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"Add Video"})]})]}),j.length>0&&(0,m.jsxs)("div",{className:"mt-4 flex items-center gap-4 pt-4 border-t border-dark-100",children:[(0,m.jsxs)("span",{className:"text-gray-400",children:[j.length," selected"]}),(0,m.jsxs)("button",{onClick:async()=>{if(0!==j.length&&window.confirm("Delete ".concat(j.length," videos? This cannot be undone.")))try{await n.Er.bulkDeleteVideos(j),s(e.filter(e=>!j.includes(e._id))),f([]),i.Ay.success("".concat(j.length," videos deleted"))}catch(a){i.Ay.error("Failed to delete videos")}},className:"px-4 py-2 bg-red-500/10 text-red-500 hover:bg-red-500/20 rounded-lg transition-colors",children:[(0,m.jsx)(d.IXo,{className:"w-4 h-4 inline mr-2"}),"Delete Selected"]})]})]}),(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100 overflow-hidden",children:[a?(0,m.jsx)(x.A,{}):0===e.length?(0,m.jsx)("div",{className:"text-center py-12",children:(0,m.jsx)("p",{className:"text-gray-400",children:"No videos found"})}):(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full",children:[(0,m.jsx)("thead",{className:"bg-dark-300",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-4 py-3 text-left",children:(0,m.jsx)("input",{type:"checkbox",onChange:s=>{s.target.checked?f(e.map(e=>e._id)):f([])},checked:j.length===e.length,className:"rounded"})}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Video"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Views"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Featured"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"}),(0,m.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-400",children:"Actions"})]})}),(0,m.jsx)("tbody",{children:e.map(a=>(0,m.jsxs)("tr",{className:"border-t border-dark-100 hover:bg-dark-100/50 transition-colors",children:[(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsx)("input",{type:"checkbox",checked:j.includes(a._id),onChange:()=>{return e=a._id,void f(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]);var e},className:"rounded"})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("img",{src:a.thumbnail,alt:a.title,className:"w-24 h-14 object-cover rounded"}),(0,m.jsxs)("div",{className:"min-w-0",children:[(0,m.jsx)("p",{className:"text-white font-medium truncate max-w-xs",children:a.title}),(0,m.jsx)("p",{className:"text-gray-500 text-sm",children:a.file_code})]})]})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("span",{className:"flex items-center gap-1 text-gray-300",children:[(0,m.jsx)(d.Vap,{className:"w-4 h-4"}),(0,h.OO)(a.views)]})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsx)("span",{className:"badge ".concat("public"===a.status?"badge-success":"private"===a.status?"badge-danger":"badge-warning"),children:a.status})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsx)("button",{onClick:()=>(async a=>{try{const l=await n.Er.toggleFeatured(a._id);l.data.success&&(s(e.map(e=>e._id===a._id?(0,t.A)((0,t.A)({},e),{},{featured:l.data.featured}):e)),i.Ay.success(l.data.message))}catch(l){i.Ay.error("Failed to update featured status")}})(a),className:"p-2 rounded-lg transition-colors ".concat(a.featured?"bg-yellow-500/20 text-yellow-500":"bg-dark-100 text-gray-500 hover:text-yellow-500"),children:(0,m.jsx)(d.usP,{className:"w-5 h-5",fill:a.featured?"currentColor":"none"})})}),(0,m.jsx)("td",{className:"px-4 py-3 text-gray-400 text-sm",children:(0,h.Yq)(a.uploadDate)}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>N(a),className:"p-2 hover:bg-dark-100 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,m.jsx)(d.WXf,{className:"w-4 h-4"})}),(0,m.jsx)("button",{onClick:()=>(async a=>{if(window.confirm('Delete "'.concat(a.title,'"? This cannot be undone.')))try{await n.Er.deleteVideo(a._id),s(e.filter(e=>e._id!==a._id)),i.Ay.success("Video deleted successfully")}catch(t){i.Ay.error("Failed to delete video")}})(a),className:"p-2 hover:bg-red-500/10 rounded-lg text-gray-400 hover:text-red-500 transition-colors",children:(0,m.jsx)(d.IXo,{className:"w-4 h-4"})})]})})]},a._id))})]})}),(0,m.jsx)("div",{className:"p-4 border-t border-dark-100",children:(0,m.jsx)(o.A,{currentPage:g.page,totalPages:g.pages,onPageChange:P})})]}),v&&(0,m.jsx)(u,{video:v,onClose:()=>N(null),onSave:a=>{s(e.map(e=>e._id===a._id?a:e)),N(null),i.Ay.success("Video updated successfully")}})]})}}}]);
//# sourceMappingURL=608.f72d69b6.chunk.js.map