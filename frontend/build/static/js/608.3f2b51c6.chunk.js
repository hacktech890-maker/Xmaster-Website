"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[608],{5992(e,a,t){t.d(a,{A:()=>c});var s=t(5043),r=t(3216),l=t(5475),d=t(5772),n=t(5187),i=t(579);const o=()=>{const[e,a]=(0,s.useState)(!1),t=(0,r.zy)(),o=(0,r.Zp)(),{logout:c}=(0,n.As)(),x=[{name:"Dashboard",path:"/admin/dashboard",icon:d.V5Y},{name:"Videos",path:"/admin/videos",icon:d.pVQ},{name:"Upload",path:"/admin/upload",icon:d.B88},{name:"Categories",path:"/admin/categories",icon:d.QPV},{name:"Ads",path:"/admin/ads",icon:d.z8N},{name:"Reports",path:"/admin/reports",icon:d.QsL}],h=()=>{c(),o("/xmaster-admin")},m=()=>(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-dark-100",children:(0,i.jsxs)(l.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,i.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center",children:(0,i.jsx)("span",{className:"text-white font-bold text-xl",children:"X"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Xmaster"}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),(0,i.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(e=>{return(0,i.jsxs)(l.N_,{to:e.path,onClick:()=>a(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all ".concat((s=e.path,t.pathname===s?"bg-primary-600 text-white shadow-lg shadow-primary-600/30":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100")),children:[(0,i.jsx)(e.icon,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:e.name})]},e.path);var s})}),(0,i.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-100 space-y-1",children:[(0,i.jsxs)(l.N_,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 rounded-lg transition-all",children:[(0,i.jsx)(d.VSk,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"View Site"})]}),(0,i.jsxs)("button",{onClick:h,className:"flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all w-full",children:[(0,i.jsx)(d.QeK,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Logout"})]})]})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>a(!e),className:"fixed top-4 left-4 z-50 md:hidden p-2 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg shadow-lg",children:e?(0,i.jsx)(d.yGN,{className:"w-5 h-5"}):(0,i.jsx)(d.ND1,{className:"w-5 h-5"})}),e&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>a(!1)}),(0,i.jsx)("aside",{className:"fixed top-0 left-0 h-full w-64 bg-white dark:bg-dark-300 border-r border-gray-200 dark:border-dark-100 z-40 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:(0,i.jsx)(m,{})})]})},c=e=>{let{children:a,title:t=""}=e;return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(o,{}),(0,i.jsxs)("div",{className:"flex-1 ml-0 md:ml-64",children:[t&&(0,i.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,i.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:t})}),(0,i.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:a})]})]})})}},4533(e,a,t){t.d(a,{A:()=>d});var s=t(5043),r=t(5772),l=t(579);const d=e=>{let{currentPage:a,totalPages:t,onPageChange:d}=e;if(t<=1)return null;return(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2 mt-8",children:[(0,l.jsxs)("button",{onClick:()=>d(a-1),disabled:1===a,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,l.jsx)(r.irw,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(()=>{const e=[];if(t<=5)for(let a=1;a<=t;a++)e.push(a);else{e.push(1);let s=Math.max(2,a-1),r=Math.min(t-1,a+1);a<=3&&(r=Math.min(4,t-1)),a>=t-2&&(s=Math.max(t-3,2)),s>2&&e.push("...");for(let a=s;a<=r;a++)e.push(a);r<t-1&&e.push("..."),e.push(t)}return e})().map((e,t)=>(0,l.jsx)(s.Fragment,{children:"..."===e?(0,l.jsx)("span",{className:"px-2 py-2 text-gray-500 text-sm",children:"..."}):(0,l.jsx)("button",{onClick:()=>d(e),className:"min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ".concat(a===e?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100"),children:e})},t)),(0,l.jsxs)("button",{onClick:()=>d(a+1),disabled:a===t,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,l.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,l.jsx)(r.fOo,{className:"w-4 h-4"})]})]})}},3608(e,a,t){t.r(a),t.d(a,{default:()=>g});var s=t(9379),r=t(5043),l=t(5475),d=t(5772),n=t(3768),i=t(6305),o=t(5992),c=t(4533),x=t(6630),h=t(6047),m=t(579);const u=e=>{var a;let{video:t,onClose:l,onSave:o}=e;const[c,x]=(0,r.useState)({title:t.title||"",description:t.description||"",tags:(null===(a=t.tags)||void 0===a?void 0:a.join(", "))||"",status:t.status||"public",featured:t.featured||!1}),[h,u]=(0,r.useState)(!1);return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-dark-100",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Edit Video"}),(0,m.jsx)("button",{onClick:l,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,m.jsx)(d.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{const e=await i.Er.updateVideo(t._id,(0,s.A)((0,s.A)({},c),{},{tags:c.tags.split(",").map(e=>e.trim()).filter(Boolean)}));e.data.success&&o(e.data.video)}catch(a){n.Ay.error("Failed to update video")}finally{u(!1)}},className:"p-6 space-y-4",children:[(0,m.jsxs)("div",{className:"flex gap-4",children:[(0,m.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-40 h-24 object-cover rounded-lg"}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"File Code"}),(0,m.jsx)("p",{className:"text-white font-mono",children:t.file_code})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),(0,m.jsx)("input",{type:"text",value:c.title,onChange:e=>x((0,s.A)((0,s.A)({},c),{},{title:e.target.value})),className:"input-field",required:!0})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,m.jsx)("textarea",{value:c.description,onChange:e=>x((0,s.A)((0,s.A)({},c),{},{description:e.target.value})),rows:4,className:"input-field resize-none"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),(0,m.jsx)("input",{type:"text",value:c.tags,onChange:e=>x((0,s.A)((0,s.A)({},c),{},{tags:e.target.value})),className:"input-field",placeholder:"tag1, tag2, tag3"})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,m.jsxs)("select",{value:c.status,onChange:e=>x((0,s.A)((0,s.A)({},c),{},{status:e.target.value})),className:"input-field",children:[(0,m.jsx)("option",{value:"public",children:"Public"}),(0,m.jsx)("option",{value:"private",children:"Private"}),(0,m.jsx)("option",{value:"unlisted",children:"Unlisted"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Featured"}),(0,m.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-dark-100 rounded-lg cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:c.featured,onChange:e=>x((0,s.A)((0,s.A)({},c),{},{featured:e.target.checked})),className:"rounded"}),(0,m.jsx)("span",{className:"text-gray-300",children:"Featured on homepage"})]})]})]}),(0,m.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,m.jsx)("button",{type:"button",onClick:l,className:"flex-1 btn-secondary",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",disabled:h,className:"flex-1 btn-primary",children:h?"Saving...":"Save Changes"})]})]})]})})},g=()=>{const[e,a]=(0,r.useState)([]),[t,g]=(0,r.useState)(!0),[p,b]=(0,r.useState)({page:1,pages:1,total:0}),[j,f]=(0,r.useState)([]),[y,v]=(0,r.useState)(null),[N,k]=(0,r.useState)(""),[w,A]=(0,r.useState)(""),[C,S]=(0,r.useState)(""),[_,V]=(0,r.useState)("newest"),[F,M]=(0,r.useState)(1),P=(0,r.useCallback)(async()=>{g(!0);try{const e=await i.Er.getVideos({page:F,limit:20,search:N,status:w,featured:C,sort:_});e.data.success&&(a(e.data.videos),b(e.data.pagination))}catch(e){console.error("Failed to fetch videos:",e),n.Ay.error("Failed to load videos")}finally{g(!1)}},[F,N,w,C,_]);(0,r.useEffect)(()=>{P()},[P]);const D=(0,h.sg)(e=>{k(e),M(1)},500);return(0,m.jsxs)(o.A,{title:"Videos Manager",children:[(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 mb-6 border border-dark-100",children:[(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,m.jsxs)("div",{className:"flex-1 relative",children:[(0,m.jsx)(d.CKj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),(0,m.jsx)("input",{type:"text",placeholder:"Search videos...",onChange:e=>D(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-white"})]}),(0,m.jsxs)("div",{className:"flex gap-3",children:[(0,m.jsxs)("select",{value:w,onChange:e=>{A(e.target.value),M(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,m.jsx)("option",{value:"",children:"All Status"}),(0,m.jsx)("option",{value:"public",children:"Public"}),(0,m.jsx)("option",{value:"private",children:"Private"}),(0,m.jsx)("option",{value:"unlisted",children:"Unlisted"})]}),(0,m.jsxs)("select",{value:C,onChange:e=>{S(e.target.value),M(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,m.jsx)("option",{value:"",children:"All Videos"}),(0,m.jsx)("option",{value:"true",children:"Featured"}),(0,m.jsx)("option",{value:"false",children:"Not Featured"})]}),(0,m.jsxs)("select",{value:_,onChange:e=>{V(e.target.value),M(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,m.jsx)("option",{value:"newest",children:"Newest"}),(0,m.jsx)("option",{value:"oldest",children:"Oldest"}),(0,m.jsx)("option",{value:"views",children:"Most Viewed"}),(0,m.jsx)("option",{value:"title",children:"Title A-Z"})]})]}),(0,m.jsxs)(l.N_,{to:"/admin/upload",className:"btn-primary",children:[(0,m.jsx)(d.GGD,{className:"w-5 h-5"}),(0,m.jsx)("span",{className:"hidden sm:inline",children:"Add Video"})]})]}),j.length>0&&(0,m.jsxs)("div",{className:"mt-4 flex items-center gap-4 pt-4 border-t border-dark-100",children:[(0,m.jsxs)("span",{className:"text-gray-400",children:[j.length," selected"]}),(0,m.jsxs)("button",{onClick:async()=>{if(0!==j.length&&window.confirm("Delete ".concat(j.length," videos? This cannot be undone.")))try{await i.Er.bulkDeleteVideos(j),a(e.filter(e=>!j.includes(e._id))),f([]),n.Ay.success("".concat(j.length," videos deleted"))}catch(t){n.Ay.error("Failed to delete videos")}},className:"px-4 py-2 bg-red-500/10 text-red-500 hover:bg-red-500/20 rounded-lg transition-colors",children:[(0,m.jsx)(d.IXo,{className:"w-4 h-4 inline mr-2"}),"Delete Selected"]})]})]}),(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100 overflow-hidden",children:[t?(0,m.jsx)(x.A,{}):0===e.length?(0,m.jsx)("div",{className:"text-center py-12",children:(0,m.jsx)("p",{className:"text-gray-400",children:"No videos found"})}):(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"w-full",children:[(0,m.jsx)("thead",{className:"bg-dark-300",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-4 py-3 text-left",children:(0,m.jsx)("input",{type:"checkbox",onChange:a=>{a.target.checked?f(e.map(e=>e._id)):f([])},checked:j.length===e.length,className:"rounded"})}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Video"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Views"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Featured"}),(0,m.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"}),(0,m.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-400",children:"Actions"})]})}),(0,m.jsx)("tbody",{children:e.map(t=>(0,m.jsxs)("tr",{className:"border-t border-dark-100 hover:bg-dark-100/50 transition-colors",children:[(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsx)("input",{type:"checkbox",checked:j.includes(t._id),onChange:()=>{return e=t._id,void f(a=>a.includes(e)?a.filter(a=>a!==e):[...a,e]);var e},className:"rounded"})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)("img",{src:t.thumbnail,alt:t.title,className:"w-24 h-14 object-cover rounded"}),(0,m.jsxs)("div",{className:"min-w-0",children:[(0,m.jsx)("p",{className:"text-white font-medium truncate max-w-xs",children:t.title}),(0,m.jsx)("p",{className:"text-gray-500 text-sm",children:t.file_code})]})]})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("span",{className:"flex items-center gap-1 text-gray-300",children:[(0,m.jsx)(d.Vap,{className:"w-4 h-4"}),(0,h.OO)(t.views)]})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsx)("span",{className:"badge ".concat("public"===t.status?"badge-success":"private"===t.status?"badge-danger":"badge-warning"),children:t.status})}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsx)("button",{onClick:()=>(async t=>{try{const r=await i.Er.toggleFeatured(t._id);r.data.success&&(a(e.map(e=>e._id===t._id?(0,s.A)((0,s.A)({},e),{},{featured:r.data.featured}):e)),n.Ay.success(r.data.message))}catch(r){n.Ay.error("Failed to update featured status")}})(t),className:"p-2 rounded-lg transition-colors ".concat(t.featured?"bg-yellow-500/20 text-yellow-500":"bg-dark-100 text-gray-500 hover:text-yellow-500"),children:(0,m.jsx)(d.usP,{className:"w-5 h-5",fill:t.featured?"currentColor":"none"})})}),(0,m.jsx)("td",{className:"px-4 py-3 text-gray-400 text-sm",children:(0,h.Yq)(t.uploadDate)}),(0,m.jsx)("td",{className:"px-4 py-3",children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>v(t),className:"p-2 hover:bg-dark-100 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,m.jsx)(d.WXf,{className:"w-4 h-4"})}),(0,m.jsx)("button",{onClick:()=>(async t=>{if(window.confirm('Delete "'.concat(t.title,'"? This cannot be undone.')))try{await i.Er.deleteVideo(t._id),a(e.filter(e=>e._id!==t._id)),n.Ay.success("Video deleted successfully")}catch(s){n.Ay.error("Failed to delete video")}})(t),className:"p-2 hover:bg-red-500/10 rounded-lg text-gray-400 hover:text-red-500 transition-colors",children:(0,m.jsx)(d.IXo,{className:"w-4 h-4"})})]})})]},t._id))})]})}),(0,m.jsx)("div",{className:"p-4 border-t border-dark-100",children:(0,m.jsx)(c.A,{currentPage:p.page,totalPages:p.pages,onPageChange:M})})]}),y&&(0,m.jsx)(u,{video:y,onClose:()=>v(null),onSave:t=>{a(e.map(e=>e._id===t._id?t:e)),v(null),n.Ay.success("Video updated successfully")}})]})}},6047(e,a,t){t.d(a,{OO:()=>s,Yq:()=>r,sg:()=>l});const s=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",r=e=>{if(!e)return"Unknown";const a=new Date,t=new Date(e);if(isNaN(t.getTime()))return"Unknown";const s=Math.floor((a-t)/1e3);return s<60?"Just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):s<2592e3?"".concat(Math.floor(s/604800),"w ago"):s<31536e3?"".concat(Math.floor(s/2592e3),"mo ago"):"".concat(Math.floor(s/31536e3),"y ago")},l=function(e){let a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var s=arguments.length,r=new Array(s),l=0;l<s;l++)r[l]=arguments[l];clearTimeout(a),a=setTimeout(()=>e(...r),t)}}}}]);
//# sourceMappingURL=608.3f2b51c6.chunk.js.map