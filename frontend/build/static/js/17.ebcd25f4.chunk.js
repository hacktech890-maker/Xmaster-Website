"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[17],{5992(e,a,r){r.d(a,{A:()=>c});var s=r(5043),t=r(3216),d=r(5475),n=r(5772),i=r(5187),l=r(579);const o=()=>{const[e,a]=(0,s.useState)(!1),r=(0,t.zy)(),o=(0,t.Zp)(),{logout:c}=(0,i.As)(),x=[{name:"Dashboard",path:"/admin/dashboard",icon:n.V5Y},{name:"Videos",path:"/admin/videos",icon:n.pVQ},{name:"Upload",path:"/admin/upload",icon:n.B88},{name:"Categories",path:"/admin/categories",icon:n.QPV},{name:"Ads",path:"/admin/ads",icon:n.z8N},{name:"Reports",path:"/admin/reports",icon:n.QsL}],m=()=>{c(),o("/xmaster-admin")},g=()=>(0,l.jsxs)("div",{className:"flex flex-col h-full",children:[(0,l.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-dark-100",children:(0,l.jsxs)(d.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-700 rounded-lg flex items-center justify-center",children:(0,l.jsx)("span",{className:"text-white font-bold text-xl",children:"X"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Xmaster"}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),(0,l.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(e=>{return(0,l.jsxs)(d.N_,{to:e.path,onClick:()=>a(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all ".concat((s=e.path,r.pathname===s?"bg-primary-600 text-white shadow-lg shadow-primary-600/30":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100")),children:[(0,l.jsx)(e.icon,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:e.name})]},e.path);var s})}),(0,l.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-100 space-y-1",children:[(0,l.jsxs)(d.N_,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 rounded-lg transition-all",children:[(0,l.jsx)(n.VSk,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"View Site"})]}),(0,l.jsxs)("button",{onClick:m,className:"flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all w-full",children:[(0,l.jsx)(n.QeK,{className:"w-5 h-5"}),(0,l.jsx)("span",{children:"Logout"})]})]})]});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>a(!e),className:"fixed top-4 left-4 z-50 md:hidden p-2 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg shadow-lg",children:e?(0,l.jsx)(n.yGN,{className:"w-5 h-5"}):(0,l.jsx)(n.ND1,{className:"w-5 h-5"})}),e&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>a(!1)}),(0,l.jsx)("aside",{className:"fixed top-0 left-0 h-full w-64 bg-white dark:bg-dark-300 border-r border-gray-200 dark:border-dark-100 z-40 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:(0,l.jsx)(g,{})})]})},c=e=>{let{children:a,title:r=""}=e;return(0,l.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:(0,l.jsxs)("div",{className:"flex",children:[(0,l.jsx)(o,{}),(0,l.jsxs)("div",{className:"flex-1 ml-0 md:ml-64",children:[r&&(0,l.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,l.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:r})}),(0,l.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:a})]})]})})}},4533(e,a,r){r.d(a,{A:()=>n});var s=r(5043),t=r(5772),d=r(579);const n=e=>{let{currentPage:a,totalPages:r,onPageChange:n}=e;if(r<=1)return null;return(0,d.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2 mt-8",children:[(0,d.jsxs)("button",{onClick:()=>n(a-1),disabled:1===a,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,d.jsx)(t.irw,{className:"w-4 h-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(()=>{const e=[];if(r<=5)for(let a=1;a<=r;a++)e.push(a);else{e.push(1);let s=Math.max(2,a-1),t=Math.min(r-1,a+1);a<=3&&(t=Math.min(4,r-1)),a>=r-2&&(s=Math.max(r-3,2)),s>2&&e.push("...");for(let a=s;a<=t;a++)e.push(a);t<r-1&&e.push("..."),e.push(r)}return e})().map((e,r)=>(0,d.jsx)(s.Fragment,{children:"..."===e?(0,d.jsx)("span",{className:"px-2 py-2 text-gray-500 text-sm",children:"..."}):(0,d.jsx)("button",{onClick:()=>n(e),className:"min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ".concat(a===e?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100"),children:e})},r)),(0,d.jsxs)("button",{onClick:()=>n(a+1),disabled:a===r,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,d.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,d.jsx)(t.fOo,{className:"w-4 h-4"})]})]})}},6017(e,a,r){r.r(a),r.d(a,{default:()=>p});var s=r(9379),t=r(5043),d=r(5475),n=r(5772),i=r(3768),l=r(6305),o=r(5992),c=r(4533),x=r(6630),m=r(6047),g=r(579);const h=e=>{let{label:a,value:r,color:s}=e;return(0,g.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 border border-dark-100",children:[(0,g.jsx)("p",{className:"text-gray-400 text-sm",children:a}),(0,g.jsx)("p",{className:"text-2xl font-bold mt-1 ".concat({yellow:"text-yellow-500",blue:"text-blue-500",green:"text-green-500",red:"text-red-500"}[s]),children:r})]})},p=()=>{const[e,a]=(0,t.useState)([]),[r,p]=(0,t.useState)(!0),[b,u]=(0,t.useState)({page:1,pages:1,total:0}),[y,j]=(0,t.useState)({}),[v,k]=(0,t.useState)(""),[N,f]=(0,t.useState)(1),[w,C]=(0,t.useState)(null);(0,t.useEffect)(()=>{_()},[v,N]);const _=async()=>{p(!0);try{const e=await l.Er.getReports({status:v,page:N,limit:20});e.data.success&&(a(e.data.reports),u(e.data.pagination),j(e.data.statusCounts||{}))}catch(e){i.Ay.error("Failed to load reports")}finally{p(!1)}},A=async(r,t)=>{try{(await l.Er.updateReport(r,{status:t})).data.success&&(a(e.map(e=>e._id===r?(0,s.A)((0,s.A)({},e),{},{status:t}):e)),i.Ay.success("Report updated"),C(null))}catch(d){i.Ay.error("Failed to update report")}},M={broken:"Video is broken",copyright:"Copyright violation",inappropriate:"Inappropriate content",spam:"Spam or misleading",misleading:"Misleading content",other:"Other"},S={pending:"badge-warning",reviewing:"badge-primary",resolved:"badge-success",dismissed:"badge-danger"};return(0,g.jsxs)(o.A,{title:"Reports",children:[(0,g.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,g.jsx)(h,{label:"Pending",value:y.pending||0,color:"yellow"}),(0,g.jsx)(h,{label:"Reviewing",value:y.reviewing||0,color:"blue"}),(0,g.jsx)(h,{label:"Resolved",value:y.resolved||0,color:"green"}),(0,g.jsx)(h,{label:"Dismissed",value:y.dismissed||0,color:"red"})]}),(0,g.jsx)("div",{className:"bg-dark-200 rounded-xl p-4 mb-6 border border-dark-100",children:(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)(n.K7R,{className:"w-5 h-5 text-gray-400"}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)("button",{onClick:()=>{k(""),f(1)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(v?"bg-dark-100 text-gray-400 hover:text-white":"bg-primary-600 text-white"),children:"All"}),["pending","reviewing","resolved","dismissed"].map(e=>(0,g.jsx)("button",{onClick:()=>{k(e),f(1)},className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-colors ".concat(v===e?"bg-primary-600 text-white":"bg-dark-100 text-gray-400 hover:text-white"),children:e},e))]})]})}),(0,g.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100 overflow-hidden",children:[r?(0,g.jsx)(x.A,{}):0===e.length?(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)(n.QsL,{className:"w-12 h-12 mx-auto text-gray-500 mb-4"}),(0,g.jsx)("p",{className:"text-gray-400",children:"No reports found"})]}):(0,g.jsx)("div",{className:"divide-y divide-dark-100",children:e.map(e=>{var a;return(0,g.jsx)("div",{className:"p-4 hover:bg-dark-100/50 transition-colors",children:(0,g.jsxs)("div",{className:"flex items-start gap-4",children:[e.videoId&&(0,g.jsx)(d.N_,{to:"/watch/".concat(e.videoId._id),target:"_blank",className:"w-24 h-14 bg-dark-100 rounded overflow-hidden flex-shrink-0",children:(0,g.jsx)("img",{src:e.videoId.thumbnail,alt:e.videoId.title,className:"w-full h-full object-cover"})}),(0,g.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,g.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h4",{className:"text-white font-medium",children:(null===(a=e.videoId)||void 0===a?void 0:a.title)||"Video Deleted"}),(0,g.jsxs)("p",{className:"text-gray-500 text-sm mt-1",children:["Reason: ",(0,g.jsx)("span",{className:"text-gray-300",children:M[e.reason]||e.reason})]}),e.description&&(0,g.jsx)("p",{className:"text-gray-400 text-sm mt-2 line-clamp-2",children:e.description})]}),(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("span",{className:"badge ".concat(S[e.status]),children:e.status}),(0,g.jsx)("span",{className:"text-gray-500 text-sm",children:(0,m.Yq)(e.createdAt)})]})]}),(0,g.jsxs)("div",{className:"flex items-center gap-2 mt-3",children:["pending"===e.status&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("button",{onClick:()=>A(e._id,"reviewing"),className:"px-3 py-1.5 bg-blue-500/10 text-blue-500 hover:bg-blue-500/20 rounded text-sm transition-colors",children:"Start Review"}),(0,g.jsx)("button",{onClick:()=>A(e._id,"dismissed"),className:"px-3 py-1.5 bg-gray-500/10 text-gray-400 hover:bg-gray-500/20 rounded text-sm transition-colors",children:"Dismiss"})]}),"reviewing"===e.status&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("button",{onClick:()=>A(e._id,"resolved"),className:"px-3 py-1.5 bg-green-500/10 text-green-500 hover:bg-green-500/20 rounded text-sm transition-colors",children:[(0,g.jsx)(n.YrT,{className:"w-4 h-4 inline mr-1"}),"Resolve"]}),(0,g.jsxs)("button",{onClick:()=>A(e._id,"dismissed"),className:"px-3 py-1.5 bg-gray-500/10 text-gray-400 hover:bg-gray-500/20 rounded text-sm transition-colors",children:[(0,g.jsx)(n.yGN,{className:"w-4 h-4 inline mr-1"}),"Dismiss"]})]}),e.videoId&&(0,g.jsxs)(d.N_,{to:"/watch/".concat(e.videoId._id),target:"_blank",className:"px-3 py-1.5 bg-dark-100 text-gray-400 hover:text-white rounded text-sm transition-colors",children:[(0,g.jsx)(n.HaR,{className:"w-4 h-4 inline mr-1"}),"View Video"]})]})]})]})},e._id)})}),(0,g.jsx)("div",{className:"p-4 border-t border-dark-100",children:(0,g.jsx)(c.A,{currentPage:b.page,totalPages:b.pages,onPageChange:f})})]})]})}},6047(e,a,r){r.d(a,{OO:()=>s,Yq:()=>t,sg:()=>d});const s=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",t=e=>{if(!e)return"Unknown";const a=new Date,r=new Date(e);if(isNaN(r.getTime()))return"Unknown";const s=Math.floor((a-r)/1e3);return s<60?"Just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):s<2592e3?"".concat(Math.floor(s/604800),"w ago"):s<31536e3?"".concat(Math.floor(s/2592e3),"mo ago"):"".concat(Math.floor(s/31536e3),"y ago")},d=function(e){let a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var s=arguments.length,t=new Array(s),d=0;d<s;d++)t[d]=arguments[d];clearTimeout(a),a=setTimeout(()=>e(...t),r)}}}}]);
//# sourceMappingURL=17.ebcd25f4.chunk.js.map