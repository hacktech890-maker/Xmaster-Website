"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[71],{8227(e,t,s){s.d(t,{A:()=>c});var a=s(5043),r=s(6305),l=s(579);const c=e=>{let{placement:t="home_top",className:s=""}=e;const[c,i]=(0,a.useState)(null),n=(0,a.useRef)(null),o=(0,a.useRef)(!1);if((0,a.useEffect)(()=>{(async()=>{try{var e,s;const l=window.innerWidth<768?"mobile":"desktop",c=await r.G.getAdByPlacement(t,l);if(null!==(e=c.data)&&void 0!==e&&e.success&&null!==(s=c.data)&&void 0!==s&&s.ad){i(c.data.ad);try{await r.G.recordAdImpression(c.data.ad._id)}catch(a){}}}catch(l){}})()},[t]),(0,a.useEffect)(()=>{if(!c||!n.current||o.current)return;const e=n.current,t=c.code||c.content||"";if(!t.trim())return;e.innerHTML="",o.current=!0;const s=document.createElement("div");s.innerHTML=t;const a=s.querySelectorAll("script"),r=t.replace(/<script[\s\S]*?<\/script>/gi,"");if(r.trim()){const t=document.createElement("div");t.innerHTML=r,e.appendChild(t)}return a.forEach(t=>{const s=document.createElement("script");Array.from(t.attributes).forEach(e=>{s.setAttribute(e.name,e.value)}),t.textContent&&(s.textContent=t.textContent),t.src&&(s.src=t.src,s.async=!0),e.appendChild(s)}),()=>{e&&(e.innerHTML=""),o.current=!1}},[c]),(0,a.useEffect)(()=>{o.current=!1},[t]),!c)return null;if("image"===c.type||"banner"===c.type){const e=c.imageUrl||c.image||"",t=c.targetUrl||c.url||c.link||"#";return e?(0,l.jsx)("div",{className:"ad-banner flex justify-center ".concat(s),children:(0,l.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer nofollow",onClick:async()=>{try{await r.G.recordAdClick(c._id)}catch(e){}},children:(0,l.jsx)("img",{src:e,alt:c.name||"Advertisement",className:"rounded-lg max-w-full",loading:"lazy"})})}):null}return(0,l.jsx)("div",{className:"ad-banner flex justify-center ".concat(s),children:(0,l.jsx)("div",{ref:n,className:"ad-content"})})}},1932(e,t,s){s.d(t,{A:()=>d});var a=s(5043),r=s(5475),l=s(5772),c=s(579);const i=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",n=e=>{if(!e)return"Unknown Date";const t=new Date,s=new Date(e);if(isNaN(s.getTime()))return"Unknown Date";const a=Math.floor((t-s)/1e3);return a<60?"Just now":a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):a<604800?"".concat(Math.floor(a/86400),"d ago"):a<2592e3?"".concat(Math.floor(a/604800),"w ago"):a<31536e3?"".concat(Math.floor(a/2592e3),"mo ago"):"".concat(Math.floor(a/31536e3),"y ago")},o="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjM2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=",d=e=>{let{video:t,size:s="normal"}=e;const[d,m]=(0,a.useState)(!1),[x,g]=(0,a.useState)(!1);if(!t)return null;const{_id:h,title:u,thumbnail:p,views:j,duration:f,uploadDate:v,createdAt:y,category:N,slug:b,file_code:w}=t,k=null!==j&&void 0!==j?j:0,A=v||y,I=(e=>{if(!e)return"";if("string"===typeof e&&e.includes(":"))return"00:00"===e||"0:00"===e?"":e;if("number"===typeof e&&e>0){const t=Math.floor(e/60),s=Math.floor(e%60);return"".concat(t,":").concat(s.toString().padStart(2,"0"))}return""})(f),M={small:{title:"text-sm line-clamp-2",meta:"text-xs"},normal:{title:"text-sm sm:text-base line-clamp-2",meta:"text-xs sm:text-sm"},large:{title:"text-lg line-clamp-2",meta:"text-sm"}},C=M[s]||M.normal;return(0,c.jsx)(r.N_,{to:"/watch/".concat(h).concat(b?"/".concat(b):""),className:"group block w-full",children:(0,c.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer",children:[(0,c.jsxs)("div",{className:"relative aspect-video bg-gray-800 overflow-hidden",children:[!x&&!d&&(0,c.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse"}),(0,c.jsx)("img",{src:d?o:p&&p.startsWith("http")?p:p&&p.length>3?"https://abyss.to/splash/".concat(p,".jpg"):w?"https://abyss.to/splash/".concat(w,".jpg"):o,alt:u||"Video",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ".concat(x?"opacity-100":"opacity-0"),loading:"lazy",onError:()=>m(!0),onLoad:()=>g(!0)}),I&&(0,c.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/80 rounded text-white text-xs font-medium flex items-center gap-1",children:[(0,c.jsx)(l.Ohp,{className:"w-3 h-3"}),I]}),(0,c.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:(0,c.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-red-600/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transform scale-75 group-hover:scale-100 transition-all duration-300",children:(0,c.jsx)("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,c.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}),(0,c.jsxs)("div",{className:"p-2.5 sm:p-3",children:[(0,c.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-500 transition-colors ".concat(C.title),children:u||"Untitled Video"}),(0,c.jsxs)("div",{className:"mt-1.5 flex items-center gap-2 sm:gap-3 text-gray-500 dark:text-gray-400 ".concat(C.meta),children:[(0,c.jsxs)("span",{className:"flex items-center gap-1",children:[(0,c.jsx)(l.Vap,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),i(k)," views"]}),(0,c.jsx)("span",{children:"\u2022"}),(0,c.jsx)("span",{children:n(A)})]}),N&&(0,c.jsx)("div",{className:"mt-1.5",children:(0,c.jsx)("span",{className:"text-xs px-2 py-0.5 bg-gray-100 dark:bg-dark-100 text-gray-600 dark:text-gray-400 rounded-full",children:"string"===typeof N?N:(null===N||void 0===N?void 0:N.name)||"General"})})]})]})})}},958(e,t,s){s.d(t,{A:()=>i,F:()=>c});s(5043);var a=s(1932),r=s(6630),l=s(579);const c=e=>{let{count:t=8,columns:s=4}=e;const a={4:"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"};return(0,l.jsx)("div",{className:"grid ".concat(a[s]||a[4]," gap-3 sm:gap-4 md:gap-6"),children:[...Array(t)].map((e,t)=>(0,l.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-xl overflow-hidden animate-pulse",children:[(0,l.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-dark-100"}),(0,l.jsxs)("div",{className:"p-3 space-y-2",children:[(0,l.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-dark-100 rounded w-3/4"}),(0,l.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-dark-100 rounded w-1/2"})]})]},t))})},i=e=>{let{videos:t=[],loading:s=!1,error:c=null,emptyMessage:i="No videos found",columns:n=4}=e;if(s)return(0,l.jsx)(r.A,{});if(c)return(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-red-500 mb-2",children:"\u26a0\ufe0f"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:c})]});if(!t||0===t.length)return(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfac"}),(0,l.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:i})]});const o={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-2 sm:grid-cols-2 lg:grid-cols-3",4:"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",5:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",6:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"};return(0,l.jsx)("div",{className:"grid ".concat(o[n]||o[4]," gap-3 sm:gap-4 md:gap-6"),children:t.map(e=>(0,l.jsx)(a.A,{video:e},e._id))})}},9071(e,t,s){s.r(t),s.d(t,{default:()=>h});var a=s(5043),r=s(5475),l=s(1344),c=s(5772),i=s(6305),n=s(958),o=s(1932),d=s(8227),m=s(579);const x=e=>{let{icon:t,title:s,link:a,linkText:l,iconColor:i="text-primary-500"}=e;return(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsxs)("h2",{className:"flex items-center gap-2 text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:[t&&(0,m.jsx)(t,{className:"w-5 h-5 sm:w-6 sm:h-6 ".concat(i)}),s]}),a&&(0,m.jsxs)(r.N_,{to:a,className:"flex items-center gap-1 text-sm text-primary-600 hover:text-primary-700 font-medium transition-colors",children:[l,(0,m.jsx)(c.fOo,{className:"w-4 h-4"})]})]})},g=e=>{let{category:t}=e;return(0,m.jsxs)(r.N_,{to:"/category/".concat(t.slug),className:"group card p-4 text-center hover:shadow-lg transition-all",style:{borderTop:"3px solid ".concat(t.color||"#ef4444")},children:[(0,m.jsx)("div",{className:"text-3xl mb-2",children:t.icon||"\ud83d\udcc1"}),(0,m.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-primary-600 transition-colors text-sm sm:text-base",children:t.name}),(0,m.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500 dark:text-gray-400 mt-1",children:[t.videoCount||0," videos"]})]})},h=()=>{const[e,t]=(0,a.useState)({featuredVideos:[],latestVideos:[],trendingVideos:[],categories:[]}),[s,h]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{const e=await i.G.getHomeData();e.data.success&&t(e.data.data)}catch(e){console.error("Failed to fetch home data:",e)}finally{h(!1)}})()},[]),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(l.mg,{children:[(0,m.jsx)("title",{children:"Xmaster - Watch Videos Online"}),(0,m.jsx)("meta",{name:"description",content:"Watch and enjoy high-quality videos on Xmaster."})]}),(0,m.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:[(0,m.jsx)(d.A,{placement:"home_top",className:"max-w-7xl mx-auto px-4 pt-4"}),(0,m.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,m.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6",children:[(0,m.jsxs)("div",{className:"flex-1",children:[e.featuredVideos.length>0&&(0,m.jsxs)("section",{className:"mb-10",children:[(0,m.jsx)(x,{icon:c.usP,title:"Featured Videos",iconColor:"text-yellow-500"}),s?(0,m.jsx)(n.F,{count:6,columns:3}):(0,m.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4",children:e.featuredVideos.slice(0,6).map(e=>(0,m.jsx)(o.A,{video:e},e._id))})]}),(0,m.jsx)(d.A,{placement:"home_infeed",className:"mb-8"}),(0,m.jsxs)("section",{className:"mb-10",children:[(0,m.jsx)(x,{icon:c.Ohp,title:"Latest Videos",link:"/search?sort=newest",linkText:"View All",iconColor:"text-blue-500"}),s?(0,m.jsx)(n.F,{count:8}):(0,m.jsx)(n.A,{videos:e.latestVideos,columns:4})]}),(0,m.jsx)(d.A,{placement:"home_infeed",className:"mb-8"}),(0,m.jsxs)("section",{className:"mb-10",children:[(0,m.jsx)(x,{icon:c.ARf,title:"Trending Now",link:"/trending",linkText:"View All",iconColor:"text-red-500"}),s?(0,m.jsx)(n.F,{count:8}):(0,m.jsx)(n.A,{videos:e.trendingVideos,columns:4})]}),e.categories.length>0&&(0,m.jsxs)("section",{id:"categories",className:"mb-10",children:[(0,m.jsx)(x,{title:"Browse Categories",iconColor:"text-purple-500"}),(0,m.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 sm:gap-4",children:e.categories.map(e=>(0,m.jsx)(g,{category:e},e._id))})]})]}),(0,m.jsx)("aside",{className:"w-full lg:w-80 flex-shrink-0",children:(0,m.jsxs)("div",{className:"sticky top-20 space-y-6",children:[(0,m.jsx)(d.A,{placement:"home_sidebar"}),(0,m.jsxs)("div",{className:"card p-4",children:[(0,m.jsx)("h3",{className:"font-semibold text-gray-900 dark:text-white mb-4",children:"Quick Links"}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsxs)(r.N_,{to:"/trending",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-100 transition-colors",children:[(0,m.jsx)(c.ARf,{className:"w-5 h-5 text-primary-500"}),(0,m.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Trending Videos"})]}),(0,m.jsxs)(r.N_,{to:"/search?sort=newest",className:"flex items-center gap-3 p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-100 transition-colors",children:[(0,m.jsx)(c.Ohp,{className:"w-5 h-5 text-blue-500"}),(0,m.jsx)("span",{className:"text-gray-700 dark:text-gray-300",children:"Latest Uploads"})]})]})]}),(0,m.jsx)(d.A,{placement:"home_sidebar"})]})})]})}),(0,m.jsx)(d.A,{placement:"home_footer",className:"max-w-7xl mx-auto px-4 pb-6"})]})]})}}}]);
//# sourceMappingURL=71.56acafd8.chunk.js.map