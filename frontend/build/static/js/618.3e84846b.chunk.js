"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[618],{5992(e,a,s){s.d(a,{A:()=>o});var t=s(5043),r=s(3216),d=s(5475),l=s(5772),n=s(5187),i=s(579);const c=()=>{const[e,a]=(0,t.useState)(!1),s=(0,r.zy)(),c=(0,r.Zp)(),{logout:o}=(0,n.As)(),m=[{name:"Dashboard",path:"/admin/dashboard",icon:l.V5Y},{name:"Videos",path:"/admin/videos",icon:l.pVQ},{name:"Upload",path:"/admin/upload",icon:l.B88},{name:"Categories",path:"/admin/categories",icon:l.QPV},{name:"Comments",path:"/admin/comments",icon:l.mEP},{name:"Duplicates",path:"/admin/duplicates",icon:l.nxz},{name:"Ads",path:"/admin/ads",icon:l.z8N},{name:"Reports",path:"/admin/reports",icon:l.QsL}],x=()=>{o(),c("/xmaster-admin")},h=()=>(0,i.jsxs)("div",{className:"flex flex-col h-full",children:[(0,i.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-dark-100",children:(0,i.jsxs)(d.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,i.jsx)("img",{src:"/logo.jpg",alt:"Xmaster",className:"w-10 h-10 rounded-lg object-cover"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Xmaster"}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),(0,i.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:m.map(e=>{return(0,i.jsxs)(d.N_,{to:e.path,onClick:()=>a(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all ".concat((t=e.path,s.pathname===t?"bg-primary-600 text-white shadow-lg shadow-primary-600/30":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100")),children:[(0,i.jsx)(e.icon,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:e.name})]},e.path);var t})}),(0,i.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-100 space-y-1",children:[(0,i.jsxs)(d.N_,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 rounded-lg transition-all",children:[(0,i.jsx)(l.VSk,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"View Site"})]}),(0,i.jsxs)("button",{onClick:x,className:"flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all w-full",children:[(0,i.jsx)(l.QeK,{className:"w-5 h-5"}),(0,i.jsx)("span",{children:"Logout"})]})]})]});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("button",{onClick:()=>a(!e),className:"fixed top-4 left-4 z-50 md:hidden p-2 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg shadow-lg",children:e?(0,i.jsx)(l.yGN,{className:"w-5 h-5"}):(0,i.jsx)(l.ND1,{className:"w-5 h-5"})}),e&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>a(!1)}),(0,i.jsx)("aside",{className:"fixed top-0 left-0 h-full w-64 bg-white dark:bg-dark-300 border-r border-gray-200 dark:border-dark-100 z-40 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:(0,i.jsx)(h,{})})]})},o=e=>{let{children:a,title:s=""}=e;return(0,i.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)(c,{}),(0,i.jsxs)("div",{className:"flex-1 ml-0 md:ml-64",children:[s&&(0,i.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,i.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:s})}),(0,i.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:a})]})]})})}},618(e,a,s){s.r(a),s.d(a,{default:()=>h});var t=s(9379),r=s(5043),d=s(5772),l=s(3768),n=s(6305),i=s(5992),c=s(6630),o=s(6047),m=s(579);const x=e=>{let{ad:a,placements:s,onClose:n,onSave:i}=e;const[c,o]=(0,r.useState)({name:(null===a||void 0===a?void 0:a.name)||"",placement:(null===a||void 0===a?void 0:a.placement)||"home_top",type:(null===a||void 0===a?void 0:a.type)||"script",code:(null===a||void 0===a?void 0:a.code)||"",device:(null===a||void 0===a?void 0:a.device)||"all",enabled:!1!==(null===a||void 0===a?void 0:a.enabled),priority:(null===a||void 0===a?void 0:a.priority)||0}),[x,h]=(0,r.useState)(!1);return(0,m.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-dark-100",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-white",children:a?"Edit Ad":"Create Ad"}),(0,m.jsx)("button",{onClick:n,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,m.jsx)(d.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c.name.trim()&&c.code.trim()?(h(!0),await i(c),h(!1)):l.Ay.error("Name and code are required")},className:"p-6 space-y-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ad Name *"}),(0,m.jsx)("input",{type:"text",value:c.name,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{name:e.target.value})),className:"input-field",placeholder:"e.g., Homepage Banner Ad",required:!0})]}),(0,m.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Placement *"}),(0,m.jsx)("select",{value:c.placement,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{placement:e.target.value})),className:"input-field",children:s.map(e=>(0,m.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Device"}),(0,m.jsxs)("select",{value:c.device,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{device:e.target.value})),className:"input-field",children:[(0,m.jsx)("option",{value:"all",children:"All Devices"}),(0,m.jsx)("option",{value:"desktop",children:"Desktop Only"}),(0,m.jsx)("option",{value:"mobile",children:"Mobile Only"})]})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ad Type"}),(0,m.jsxs)("select",{value:c.type,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{type:e.target.value})),className:"input-field",children:[(0,m.jsx)("option",{value:"script",children:"Script (JavaScript)"}),(0,m.jsx)("option",{value:"html",children:"HTML"}),(0,m.jsx)("option",{value:"banner",children:"Banner Image"})]})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ad Code *"}),(0,m.jsx)("textarea",{value:c.code,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{code:e.target.value})),className:"input-field font-mono text-sm resize-none",rows:8,placeholder:"Paste your ad code here...",required:!0}),(0,m.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Paste the complete ad code from your ad network (Google Ads, etc.)"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Priority"}),(0,m.jsx)("input",{type:"number",value:c.priority,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{priority:parseInt(e.target.value)||0})),className:"input-field w-32",min:"0",max:"100"}),(0,m.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Higher priority ads show first (0-100)"})]}),(0,m.jsx)("div",{children:(0,m.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-dark-100 rounded-lg cursor-pointer",children:[(0,m.jsx)("input",{type:"checkbox",checked:c.enabled,onChange:e=>o((0,t.A)((0,t.A)({},c),{},{enabled:e.target.checked})),className:"rounded"}),(0,m.jsx)("span",{className:"text-gray-300",children:"Enabled (show to users)"})]})}),(0,m.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,m.jsx)("button",{type:"button",onClick:n,className:"flex-1 btn-secondary",children:"Cancel"}),(0,m.jsx)("button",{type:"submit",disabled:x,className:"flex-1 btn-primary",children:x?"Saving...":"Save Ad"})]})]})]})})},h=()=>{const[e,a]=(0,r.useState)([]),[s,h]=(0,r.useState)([]),[p,g]=(0,r.useState)(!0),[u,b]=(0,r.useState)(!1),[j,v]=(0,r.useState)(null);(0,r.useEffect)(()=>{y()},[]);const y=async()=>{try{const[e,s]=await Promise.all([n.Er.getAllAds(),n.Er.getAdPlacements()]);e.data.success&&a(e.data.ads),s.data.success&&h(s.data.placements)}catch(e){l.Ay.error("Failed to load ads")}finally{g(!1)}};if(p)return(0,m.jsx)(i.A,{title:"Ads Manager",children:(0,m.jsx)(c.A,{})});const N=s.reduce((a,s)=>(a[s.id]=(0,t.A)((0,t.A)({},s),{},{ads:e.filter(e=>e.placement===s.id)}),a),{});return(0,m.jsxs)(i.A,{title:"Ads Manager",children:[(0,m.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl p-6 border border-dark-100",children:[(0,m.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Ads"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:e.length})]}),(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl p-6 border border-dark-100",children:[(0,m.jsx)("p",{className:"text-gray-400 text-sm",children:"Active Ads"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-green-500 mt-1",children:e.filter(e=>e.enabled).length})]}),(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl p-6 border border-dark-100",children:[(0,m.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Impressions"}),(0,m.jsx)("p",{className:"text-2xl font-bold text-blue-500 mt-1",children:(0,o.OO)(e.reduce((e,a)=>e+(a.impressions||0),0))})]})]}),(0,m.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,m.jsx)("p",{className:"text-gray-400",children:"Manage ad placements across your site"}),(0,m.jsxs)("button",{onClick:()=>{v(null),b(!0)},className:"btn-primary",children:[(0,m.jsx)(d.GGD,{className:"w-5 h-5"}),"Add Ad"]})]}),(0,m.jsx)("div",{className:"space-y-6",children:Object.values(N).map(s=>(0,m.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100",children:[(0,m.jsxs)("div",{className:"p-4 border-b border-dark-100 flex items-center justify-between",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-white font-medium",children:s.name}),(0,m.jsxs)("p",{className:"text-gray-500 text-sm",children:["Size: ",s.size]})]}),(0,m.jsxs)("span",{className:"text-gray-400 text-sm",children:[s.ads.length," ad",1!==s.ads.length?"s":""]})]}),s.ads.length>0?(0,m.jsx)("div",{className:"divide-y divide-dark-100",children:s.ads.map(s=>(0,m.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(s.enabled?"bg-green-500/20 text-green-500":"bg-gray-500/20 text-gray-500"),children:(0,m.jsx)(d.z8N,{className:"w-5 h-5"})}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-white font-medium",children:s.name}),(0,m.jsxs)("p",{className:"text-gray-500 text-sm",children:[(0,o.OO)(s.impressions||0)," impressions \u2022 ",(0,o.OO)(s.clicks||0)," clicks",s.impressions>0&&(0,m.jsxs)("span",{className:"text-primary-500 ml-2",children:["(",(s.clicks/s.impressions*100).toFixed(2),"% CTR)"]})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("span",{className:"badge ".concat("all"===s.device?"badge-success":"badge-warning"),children:s.device}),(0,m.jsx)("button",{onClick:()=>(async s=>{try{const r=await n.Er.toggleAd(s._id);r.data.success&&(a(e.map(e=>e._id===s._id?(0,t.A)((0,t.A)({},e),{},{enabled:r.data.enabled}):e)),l.Ay.success(r.data.message))}catch(r){l.Ay.error("Failed to toggle ad")}})(s),className:"p-2 rounded-lg transition-colors ".concat(s.enabled?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-gray-500/20 text-gray-500 hover:bg-gray-500/30"),children:s.enabled?(0,m.jsx)(d.Vap,{className:"w-4 h-4"}):(0,m.jsx)(d._NO,{className:"w-4 h-4"})}),(0,m.jsx)("button",{onClick:()=>(e=>{v(e),b(!0)})(s),className:"p-2 hover:bg-dark-100 rounded-lg text-gray-400 hover:text-white",children:(0,m.jsx)(d.WXf,{className:"w-4 h-4"})}),(0,m.jsx)("button",{onClick:()=>(async s=>{if(window.confirm('Delete "'.concat(s.name,'"?')))try{await n.Er.deleteAd(s._id),a(e.filter(e=>e._id!==s._id)),l.Ay.success("Ad deleted")}catch(t){l.Ay.error("Failed to delete ad")}})(s),className:"p-2 hover:bg-red-500/10 rounded-lg text-gray-400 hover:text-red-500",children:(0,m.jsx)(d.IXo,{className:"w-4 h-4"})})]})]},s._id))}):(0,m.jsx)("div",{className:"p-8 text-center",children:(0,m.jsx)("p",{className:"text-gray-500",children:"No ads in this placement"})})]},s.id))}),u&&(0,m.jsx)(x,{ad:j,placements:s,onClose:()=>b(!1),onSave:async s=>{try{if(j){const t=await n.Er.updateAd(j._id,s);t.data.success&&(a(e.map(e=>e._id===j._id?t.data.ad:e)),l.Ay.success("Ad updated"))}else{const t=await n.Er.createAd(s);t.data.success&&(a([...e,t.data.ad]),l.Ay.success("Ad created"))}b(!1)}catch(d){var t,r;l.Ay.error((null===(t=d.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.error)||"Failed to save ad")}}})]})}},6047(e,a,s){s.d(a,{OO:()=>t,Yq:()=>r,sg:()=>d});const t=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",r=e=>{if(!e)return"Unknown";const a=new Date,s=new Date(e);if(isNaN(s.getTime()))return"Unknown";const t=Math.floor((a-s)/1e3);return t<60?"Just now":t<3600?"".concat(Math.floor(t/60),"m ago"):t<86400?"".concat(Math.floor(t/3600),"h ago"):t<604800?"".concat(Math.floor(t/86400),"d ago"):t<2592e3?"".concat(Math.floor(t/604800),"w ago"):t<31536e3?"".concat(Math.floor(t/2592e3),"mo ago"):"".concat(Math.floor(t/31536e3),"y ago")},d=function(e){let a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var t=arguments.length,r=new Array(t),d=0;d<t;d++)r[d]=arguments[d];clearTimeout(a),a=setTimeout(()=>e(...r),s)}}}}]);
//# sourceMappingURL=618.3e84846b.chunk.js.map