"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[608],{5992(e,t,s){s.d(t,{A:()=>c});var a=s(5043),r=s(3216),l=s(5475),n=s(5772),i=s(5187),d=s(579);const o=()=>{const[e,t]=(0,a.useState)(!1),s=(0,r.zy)(),o=(0,r.Zp)(),{logout:c}=(0,i.As)(),x=[{name:"Dashboard",path:"/admin/dashboard",icon:n.V5Y},{name:"Videos",path:"/admin/videos",icon:n.pVQ},{name:"Upload",path:"/admin/upload",icon:n.B88},{name:"Categories",path:"/admin/categories",icon:n.QPV},{name:"Comments",path:"/admin/comments",icon:n.mEP},{name:"Duplicates",path:"/admin/duplicates",icon:n.nxz},{name:"Ads",path:"/admin/ads",icon:n.z8N},{name:"Reports",path:"/admin/reports",icon:n.QsL}],m=()=>{c(),o("/xmaster-admin")},h=()=>(0,d.jsxs)("div",{className:"flex flex-col h-full",children:[(0,d.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-dark-100",children:(0,d.jsxs)(l.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,d.jsx)("img",{src:"/logo.jpg",alt:"Xmaster",className:"w-10 h-10 rounded-lg object-cover"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Xmaster"}),(0,d.jsx)("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),(0,d.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(e=>{return(0,d.jsxs)(l.N_,{to:e.path,onClick:()=>t(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all ".concat((a=e.path,s.pathname===a?"bg-primary-600 text-white shadow-lg shadow-primary-600/30":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100")),children:[(0,d.jsx)(e.icon,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:e.name})]},e.path);var a})}),(0,d.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-100 space-y-1",children:[(0,d.jsxs)(l.N_,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 rounded-lg transition-all",children:[(0,d.jsx)(n.VSk,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"View Site"})]}),(0,d.jsxs)("button",{onClick:m,className:"flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all w-full",children:[(0,d.jsx)(n.QeK,{className:"w-5 h-5"}),(0,d.jsx)("span",{children:"Logout"})]})]})]});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{onClick:()=>t(!e),className:"fixed top-4 left-4 z-50 md:hidden p-2 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg shadow-lg",children:e?(0,d.jsx)(n.yGN,{className:"w-5 h-5"}):(0,d.jsx)(n.ND1,{className:"w-5 h-5"})}),e&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>t(!1)}),(0,d.jsx)("aside",{className:"fixed top-0 left-0 h-full w-64 bg-white dark:bg-dark-300 border-r border-gray-200 dark:border-dark-100 z-40 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:(0,d.jsx)(h,{})})]})},c=e=>{let{children:t,title:s=""}=e;return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(o,{}),(0,d.jsxs)("div",{className:"flex-1 ml-0 md:ml-64",children:[s&&(0,d.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,d.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:s})}),(0,d.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:t})]})]})})}},4533(e,t,s){s.d(t,{A:()=>n});var a=s(5043),r=s(5772),l=s(579);const n=e=>{let{currentPage:t,totalPages:s,onPageChange:n}=e;if(s<=1)return null;return(0,l.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2 mt-8",children:[(0,l.jsxs)("button",{onClick:()=>n(t-1),disabled:1===t,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,l.jsx)(r.irw,{className:"w-4 h-4"}),(0,l.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(()=>{const e=[];if(s<=5)for(let t=1;t<=s;t++)e.push(t);else{e.push(1);let a=Math.max(2,t-1),r=Math.min(s-1,t+1);t<=3&&(r=Math.min(4,s-1)),t>=s-2&&(a=Math.max(s-3,2)),a>2&&e.push("...");for(let t=a;t<=r;t++)e.push(t);r<s-1&&e.push("..."),e.push(s)}return e})().map((e,s)=>(0,l.jsx)(a.Fragment,{children:"..."===e?(0,l.jsx)("span",{className:"px-2 py-2 text-gray-500 text-sm",children:"..."}):(0,l.jsx)("button",{onClick:()=>n(e),className:"min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ".concat(t===e?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100"),children:e})},s)),(0,l.jsxs)("button",{onClick:()=>n(t+1),disabled:t===s,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,l.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,l.jsx)(r.fOo,{className:"w-4 h-4"})]})]})}},3608(e,t,s){s.r(t),s.d(t,{default:()=>f});var a=s(9379),r=s(5043),l=s(5475),n=s(5772),i=s(3768),d=s(5992),o=s(4533),c=s(6630),x=s(6047),m=s(6305),h=s(579);const g=e=>{let{videos:t,onClose:s,onSave:a}=e;const[l,d]=(0,r.useState)(""),[o,c]=(0,r.useState)([]),[x,g]=(0,r.useState)(!1),[u,p]=(0,r.useState)("paste");return(0,h.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-dark-200 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col border border-dark-100",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-dark-100 flex-shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-xl flex items-center justify-center",children:(0,h.jsx)(n.WXf,{className:"w-5 h-5 text-white"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-bold text-white",children:"Bulk Edit Titles"}),(0,h.jsxs)("p",{className:"text-sm text-gray-400",children:["Paste ",t.length," titles from Excel (one per line)"]})]})]}),(0,h.jsx)("button",{onClick:s,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,h.jsx)(n.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,h.jsxs)("div",{className:"flex-1 overflow-y-auto p-5",children:["paste"===u&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsx)("div",{className:"flex gap-2",children:(0,h.jsx)("button",{onClick:()=>{const e=window.prompt("Enter base title name:","Post");if(!e)return;const s=t.map((t,s)=>"".concat(e," (").concat(String(s+1).padStart(2,"0"),")"));d(s.join("\n"))},className:"px-4 py-2 bg-purple-500/20 text-purple-400 rounded-lg text-sm hover:bg-purple-500/30 transition-colors",children:"\ud83d\udd22 Generate Numbered Titles"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Paste titles below (one per line, matching video order):"}),(0,h.jsx)("textarea",{value:l,onChange:e=>d(e.target.value),rows:15,className:"w-full px-4 py-3 bg-dark-100 border border-dark-100 rounded-xl text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none",placeholder:"Title Post (01)\nTitle Post (02)\nTitle Post (03)\n...paste from Excel here"}),(0,h.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:[l.split("\n").filter(e=>e.trim()).length," titles entered for ",t.length," videos"]})]}),(0,h.jsxs)("div",{className:"bg-dark-100 rounded-xl p-4",children:[(0,h.jsx)("h4",{className:"text-white font-medium mb-2 text-sm",children:"Current videos order:"}),(0,h.jsx)("div",{className:"max-h-40 overflow-y-auto space-y-1",children:t.map((e,t)=>(0,h.jsxs)("p",{className:"text-gray-400 text-xs font-mono",children:[String(t+1).padStart(2,"0"),". ",e.title]},e._id))})]}),(0,h.jsx)("button",{onClick:()=>{const e=l.split("\n").filter(e=>e.trim()),s=t.map((t,s)=>({id:t._id,currentTitle:t.title,newTitle:e[s]?e[s].trim():t.title,changed:!!e[s]&&e[s].trim()!==t.title}));c(s),p("preview")},disabled:!l.trim(),className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50",children:"Preview Changes \u2192"})]}),"preview"===u&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("h4",{className:"text-white font-semibold",children:[o.filter(e=>e.changed).length," changes to apply"]}),(0,h.jsx)("button",{onClick:()=>p("paste"),className:"px-3 py-2 bg-dark-100 text-gray-400 rounded-lg text-sm",children:"\u2190 Back to Edit"})]}),(0,h.jsx)("div",{className:"max-h-[400px] overflow-y-auto space-y-2",children:o.map((e,t)=>(0,h.jsxs)("div",{className:"p-3 rounded-xl ".concat(e.changed?"bg-blue-500/10 border border-blue-500/20":"bg-dark-100"),children:[(0,h.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-1",children:[(0,h.jsxs)("span",{className:"font-mono",children:["#",String(t+1).padStart(2,"0")]}),e.changed?(0,h.jsx)("span",{className:"text-blue-400 font-medium",children:"CHANGED"}):(0,h.jsx)("span",{className:"text-gray-600",children:"unchanged"})]}),e.changed?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("p",{className:"text-red-400 text-sm line-through",children:e.currentTitle}),(0,h.jsx)("p",{className:"text-green-400 text-sm font-medium",children:e.newTitle})]}):(0,h.jsx)("p",{className:"text-gray-400 text-sm",children:e.currentTitle})]},e.id))}),(0,h.jsx)("button",{onClick:async()=>{const e=o.filter(e=>e.changed).map(e=>({id:e.id,title:e.newTitle}));if(0!==e.length){g(!0);try{const t=await m.Er.bulkUpdateTitles(e);t.data.success&&(i.Ay.success("Updated ".concat(t.data.results.success," titles")),t.data.results.failed>0&&i.Ay.error("".concat(t.data.results.failed," failed")),a())}catch(t){i.Ay.error("Failed to update titles")}finally{g(!1)}}else(0,i.Ay)("No changes to save",{icon:"\ud83d\udcdd"})},disabled:x||0===o.filter(e=>e.changed).length,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Saving..."]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.YrT,{className:"w-5 h-5"}),"Apply ",o.filter(e=>e.changed).length," Changes"]})})]})]})]})})},u=e=>{let{videos:t,onClose:s,onSave:a}=e;const[l,d]=(0,r.useState)(""),[o,c]=(0,r.useState)("append"),[x,g]=(0,r.useState)(!1),[u,p]=(0,r.useState)("same");return(0,h.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-dark-200 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col border border-dark-100",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-dark-100 flex-shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-xl flex items-center justify-center",children:(0,h.jsx)(n.cnX,{className:"w-5 h-5 text-white"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-bold text-white",children:"Bulk Add Tags"}),(0,h.jsxs)("p",{className:"text-sm text-gray-400",children:["Add tags to ",t.length," selected videos"]})]})]}),(0,h.jsx)("button",{onClick:s,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,h.jsx)(n.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,h.jsxs)("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,h.jsx)("button",{onClick:()=>p("same"),className:"p-3 rounded-xl text-sm font-medium border transition-all ".concat("same"===u?"bg-green-500/20 text-green-400 border-green-500/30":"bg-dark-100 text-gray-400 border-dark-100 hover:text-white"),children:"\ud83c\udff7\ufe0f Same tags for all"}),(0,h.jsx)("button",{onClick:()=>p("perline"),className:"p-3 rounded-xl text-sm font-medium border transition-all ".concat("perline"===u?"bg-green-500/20 text-green-400 border-green-500/30":"bg-dark-100 text-gray-400 border-dark-100 hover:text-white"),children:"\ud83d\udccb Different tags per video"})]}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsx)("button",{onClick:()=>c("append"),className:"flex-1 p-2 rounded-lg text-sm ".concat("append"===o?"bg-blue-500/20 text-blue-400":"bg-dark-100 text-gray-400"),children:"\u2795 Append to existing"}),(0,h.jsx)("button",{onClick:()=>c("replace"),className:"flex-1 p-2 rounded-lg text-sm ".concat("replace"===o?"bg-red-500/20 text-red-400":"bg-dark-100 text-gray-400"),children:"\ud83d\udd04 Replace all tags"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"same"===u?"Enter tags (comma separated):":"Enter tags per video (one line per video, comma separated):"}),(0,h.jsx)("textarea",{value:l,onChange:e=>d(e.target.value),rows:8,className:"w-full px-4 py-3 bg-dark-100 border border-dark-100 rounded-xl text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-green-500 resize-none",placeholder:"same"===u?"tag1, tag2, tag3, tag4":"tag1, tag2 (for video 1)\ntag3, tag4 (for video 2)\ntag5, tag6 (for video 3)"})]}),(0,h.jsx)("button",{onClick:async()=>{if(l.trim()){g(!0);try{let e;if("same"===u){const s=l.split(/[,\n]/).map(e=>e.trim().toLowerCase()).filter(Boolean);e=t.map(e=>({id:e._id,tags:s,mode:o}))}else{const s=l.split("\n").filter(e=>e.trim());e=t.map((e,t)=>{const a=(s[t]||"").split(",").map(e=>e.trim().toLowerCase()).filter(Boolean);return{id:e._id,tags:a,mode:o}})}const s=await m.Er.bulkUpdateTags(e);s.data.success&&(i.Ay.success("Updated tags for ".concat(s.data.results.success," videos")),a())}catch(e){i.Ay.error("Failed to update tags")}finally{g(!1)}}else i.Ay.error("Enter at least one tag")},disabled:x||!l.trim(),className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:x?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Applying..."]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.cnX,{className:"w-5 h-5"}),"Apply Tags to ",t.length," Videos"]})})]})]})})},p=e=>{let{onClose:t}=e;const[s,a]=(0,r.useState)(50),[l,d]=(0,r.useState)([]),[o,c]=(0,r.useState)(!1),[x,g]=(0,r.useState)(-1),[u,p]=(0,r.useState)(!1),[b,y]=(0,r.useState)("setup");return(0,h.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-dark-200 rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col border border-dark-100",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-dark-100 flex-shrink-0",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-primary-500 rounded-xl flex items-center justify-center",children:(0,h.jsx)(n.ayE,{className:"w-5 h-5 text-white"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-bold text-white",children:"Generate Share Links"}),(0,h.jsx)("p",{className:"text-sm text-gray-400",children:"Get shareable video links for any platform"})]})]}),(0,h.jsx)("button",{onClick:t,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,h.jsx)(n.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,h.jsxs)("div",{className:"flex-1 overflow-y-auto p-5",children:["setup"===b&&(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"How many videos?"}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsx)("input",{type:"number",value:s,onChange:e=>a(parseInt(e.target.value)||0),min:"1",max:"5000",className:"flex-1 px-4 py-3 bg-dark-100 border border-dark-100 rounded-xl text-white text-lg font-medium focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,h.jsx)("button",{onClick:async()=>{if(s<1)i.Ay.error("Enter a number greater than 0");else{c(!0);try{const e=await m.Er.bulkShareLinks({mode:"first",count:s});e.data.success&&(d(e.data.videos),y("preview"),0===e.data.videos.length?(0,i.Ay)("No videos found",{icon:"\ud83d\udced"}):i.Ay.success("Found ".concat(e.data.videos.length," videos")))}catch(e){i.Ay.error("Failed to fetch videos")}finally{c(!1)}}},disabled:o||s<1,className:"px-6 py-3 bg-primary-600 hover:bg-primary-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center gap-2",children:o?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Loading..."]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.CKj,{className:"w-5 h-5"}),"Fetch Videos"]})})]})]}),(0,h.jsx)("div",{className:"flex flex-wrap gap-2",children:[10,25,50,100,200,500].map(e=>(0,h.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(s===e?"bg-primary-600 text-white":"bg-dark-100 text-gray-400 hover:text-white hover:bg-dark-300"),children:e},e))})]}),"preview"===b&&(0,h.jsxs)("div",{className:"space-y-4",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[(0,h.jsxs)("h4",{className:"text-white font-semibold",children:[l.length," Videos"]}),(0,h.jsxs)("div",{className:"flex gap-2",children:[(0,h.jsx)("button",{onClick:()=>{y("setup"),d([])},className:"px-3 py-2 bg-dark-100 text-gray-400 rounded-lg text-sm",children:"\u2190 Back"}),(0,h.jsx)("button",{onClick:async()=>{const e=l.map(e=>e.shareUrl).join("\n");try{await navigator.clipboard.writeText(e),p(!0),i.Ay.success("Copied ".concat(l.length," URLs to clipboard")),setTimeout(()=>p(!1),3e3)}catch(t){const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),p(!0),i.Ay.success("Copied ".concat(l.length," URLs to clipboard")),setTimeout(()=>p(!1),3e3)}},className:"px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ".concat(u?"bg-green-500 text-white":"bg-primary-600 hover:bg-primary-700 text-white"),children:u?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.YrT,{className:"w-4 h-4"})," Copied!"]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(n.nxz,{className:"w-4 h-4"})," Copy URLs"]})}),(0,h.jsxs)("button",{onClick:async()=>{const e=l.map(e=>"".concat(e.title,"\t").concat(e.shareUrl)).join("\n");try{await navigator.clipboard.writeText(e),i.Ay.success("Copied ".concat(l.length," titles + URLs (Excel format)"))}catch(t){const s=document.createElement("textarea");s.value=e,s.style.position="fixed",s.style.opacity="0",document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),i.Ay.success("Copied ".concat(l.length," titles + URLs (Excel format)"))}},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg text-sm font-medium flex items-center gap-2",children:[(0,h.jsx)(n.ydS,{className:"w-4 h-4"})," Copy with Titles"]})]})]}),(0,h.jsx)("div",{className:"space-y-2 max-h-[400px] overflow-y-auto pr-2",children:l.map((e,t)=>(0,h.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-dark-100 rounded-xl hover:bg-dark-300 transition-colors",children:[(0,h.jsx)("span",{className:"text-gray-500 text-sm font-mono w-8 text-right flex-shrink-0",children:t+1}),(0,h.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,h.jsx)("p",{className:"text-white text-sm truncate",children:e.title}),(0,h.jsx)("p",{className:"text-gray-500 text-xs truncate",children:e.shareUrl})]}),(0,h.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,h.jsx)("button",{onClick:()=>(async(e,t)=>{try{await navigator.clipboard.writeText(e),g(t),setTimeout(()=>g(-1),1500)}catch(s){const a=document.createElement("input");a.value=e,a.style.position="fixed",a.style.opacity="0",document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),g(t),setTimeout(()=>g(-1),1500)}})(e.shareUrl,t),className:"p-2 rounded-lg text-sm transition-colors ".concat(x===t?"bg-green-500/20 text-green-400":"hover:bg-dark-200 text-gray-400 hover:text-white"),children:x===t?(0,h.jsx)(n.YrT,{className:"w-4 h-4"}):(0,h.jsx)(n.nxz,{className:"w-4 h-4"})}),(0,h.jsx)("a",{href:e.shareUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-dark-200 rounded-lg text-gray-400 hover:text-white",children:(0,h.jsx)(n.HaR,{className:"w-4 h-4"})})]})]},e._id))})]})]})]})})},b=e=>{let{selectedIds:t,onClose:s}=e;const[a,l]=(0,r.useState)(!1),[d,o]=(0,r.useState)("all");return(0,h.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-dark-200 rounded-2xl max-w-lg w-full border border-dark-100",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-5 border-b border-dark-100",children:[(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-10 h-10 bg-yellow-500 rounded-xl flex items-center justify-center",children:(0,h.jsx)(n.a4x,{className:"w-5 h-5 text-white"})}),(0,h.jsx)("h3",{className:"text-lg font-bold text-white",children:"Export Video Metadata"})]}),(0,h.jsx)("button",{onClick:s,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,h.jsx)(n.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,h.jsxs)("div",{className:"p-5 space-y-4",children:[(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,h.jsx)("button",{onClick:()=>o("all"),className:"p-3 rounded-xl text-sm font-medium border transition-all ".concat("all"===d?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-dark-100 text-gray-400 border-dark-100"),children:"\ud83d\udce6 Export All Videos"}),(0,h.jsxs)("button",{onClick:()=>o("selected"),disabled:0===t.length,className:"p-3 rounded-xl text-sm font-medium border transition-all disabled:opacity-50 ".concat("selected"===d?"bg-yellow-500/20 text-yellow-400 border-yellow-500/30":"bg-dark-100 text-gray-400 border-dark-100"),children:["\u2611\ufe0f Selected (",t.length,")"]})]}),(0,h.jsxs)("div",{className:"bg-dark-100 rounded-xl p-4 text-sm text-gray-400",children:[(0,h.jsx)("p",{className:"font-medium text-white mb-2",children:"Export includes:"}),(0,h.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,h.jsx)("li",{children:"Video Title"}),(0,h.jsx)("li",{children:"Shareable Link"}),(0,h.jsx)("li",{children:"Tags"}),(0,h.jsx)("li",{children:"Views, Duration, Category"}),(0,h.jsx)("li",{children:"File Code, Upload Date"})]})]}),(0,h.jsxs)("div",{className:"space-y-2",children:[(0,h.jsxs)("button",{onClick:async()=>{l(!0);try{const e="selected"===d&&t.length>0?t:void 0,a=await m.Er.exportVideosCSV(e),r=new Blob([a.data],{type:"text/csv"}),l=window.URL.createObjectURL(r),n=document.createElement("a");n.href=l,n.download="xmaster-videos-".concat((new Date).toISOString().split("T")[0],".csv"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(l),document.body.removeChild(n),i.Ay.success("CSV downloaded!"),s()}catch(e){i.Ay.error("Failed to export")}finally{l(!1)}},disabled:a,className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,h.jsx)(n.jH2,{className:"w-5 h-5"}),"Download CSV (Excel)"]}),(0,h.jsxs)("button",{onClick:async()=>{l(!0);try{const e="selected"===d&&t.length>0?t.join(","):void 0,a=await m.Er.exportVideos({ids:e});if(a.data.success){const e=JSON.stringify(a.data.videos,null,2),t=new Blob([e],{type:"application/json"}),r=window.URL.createObjectURL(t),l=document.createElement("a");l.href=r,l.download="xmaster-videos-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(r),document.body.removeChild(l),i.Ay.success("JSON downloaded!"),s()}}catch(e){i.Ay.error("Failed to export")}finally{l(!1)}},disabled:a,className:"w-full py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,h.jsx)(n.a4x,{className:"w-5 h-5"}),"Download JSON"]}),(0,h.jsxs)("button",{onClick:async()=>{l(!0);try{const e="selected"===d&&t.length>0?t.join(","):void 0,a=await m.Er.exportVideos({ids:e});if(a.data.success){const e="Title\tShare URL\tTags\tViews\tDuration\tCategory\n"+a.data.videos.map(e=>"".concat(e.title,"\t").concat(e.shareUrl,"\t").concat(e.tags,"\t").concat(e.views,"\t").concat(e.duration,"\t").concat(e.category)).join("\n");await navigator.clipboard.writeText(e),i.Ay.success("Copied ".concat(a.data.videos.length," video metadata (paste into Excel)")),s()}}catch(e){i.Ay.error("Failed to copy")}finally{l(!1)}},disabled:a,className:"w-full py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,h.jsx)(n.ydS,{className:"w-5 h-5"}),"Copy to Clipboard (Excel Format)"]})]})]})]})})},y=e=>{var t,s;let{video:l,onClose:d,onSave:o}=e;const[c,x]=(0,r.useState)({title:l.title||"",description:l.description||"",tags:(null===(t=l.tags)||void 0===t?void 0:t.join(", "))||"",status:l.status||"public",featured:l.featured||!1,category:(null===(s=l.category)||void 0===s?void 0:s._id)||l.category||"",categories:(l.categories||[]).map(e=>e._id||e)}),[g,u]=(0,r.useState)(!1),[p,b]=(0,r.useState)([]),[y,f]=(0,r.useState)("");(0,r.useEffect)(()=>{m.G.getCategories().then(e=>{e.data.success&&b(e.data.categories||[])}).catch(console.error)},[]);const j=p.filter(e=>e.name.toLowerCase().includes(y.toLowerCase())),v=e=>{x(t=>{const s=t.categories||[];let r;r=s.includes(e)?s.filter(t=>t!==e):[...s,e];const l=r.length>0?r[0]:"";return(0,a.A)((0,a.A)({},t),{},{categories:r,category:l})})},N=c.categories.map(e=>p.find(t=>t._id===e)).filter(Boolean);return(0,h.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,h.jsxs)("div",{className:"bg-dark-200 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-dark-100",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Edit Video"}),(0,h.jsx)("button",{onClick:d,className:"p-2 hover:bg-dark-100 rounded-lg",children:(0,h.jsx)(n.yGN,{className:"w-5 h-5 text-gray-400"})})]}),(0,h.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{const e=await m.Er.updateVideo(l._id,{title:c.title,description:c.description,tags:c.tags.split(",").map(e=>e.trim()).filter(Boolean),status:c.status,featured:c.featured,category:c.category||null,categories:c.categories||[]});e.data.success&&o(e.data.video)}catch(t){i.Ay.error("Failed to update video")}finally{u(!1)}},className:"p-6 space-y-4",children:[(0,h.jsxs)("div",{className:"flex gap-4",children:[(0,h.jsx)("img",{src:l.thumbnail,alt:l.title,className:"w-40 h-24 object-cover rounded-lg",onError:e=>{e.target.style.display="none"}}),(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"File Code"}),(0,h.jsx)("p",{className:"text-white font-mono",children:l.file_code})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),(0,h.jsx)("input",{type:"text",value:c.title,onChange:e=>x((0,a.A)((0,a.A)({},c),{},{title:e.target.value})),className:"input-field",required:!0})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),(0,h.jsx)("textarea",{value:c.description,onChange:e=>x((0,a.A)((0,a.A)({},c),{},{description:e.target.value})),rows:3,className:"input-field resize-none"})]}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Categories",(0,h.jsxs)("span",{className:"text-gray-500 font-normal ml-2",children:["(",c.categories.length," selected)"]})]}),N.length>0&&(0,h.jsx)("div",{className:"flex flex-wrap gap-2 mb-3",children:N.map((e,t)=>(0,h.jsxs)("span",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary-500/20 text-primary-400 text-sm rounded-full border border-primary-500/30",children:[e.icon||"\ud83d\udcc1"," ",e.name,0===t&&(0,h.jsx)("span",{className:"text-[10px] text-primary-300 ml-1",children:"(Primary)"}),(0,h.jsx)("button",{type:"button",onClick:()=>v(e._id),className:"ml-1 hover:text-red-400 transition-colors",children:(0,h.jsx)(n.yGN,{className:"w-3.5 h-3.5"})})]},e._id))}),(0,h.jsxs)("div",{className:"relative mb-2",children:[(0,h.jsx)(n.CKj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 w-4 h-4"}),(0,h.jsx)("input",{type:"text",value:y,onChange:e=>f(e.target.value),placeholder:"Search categories...",className:"w-full pl-10 pr-4 py-2 bg-dark-100 border border-dark-100 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"})]}),(0,h.jsx)("div",{className:"max-h-40 overflow-y-auto bg-dark-100 rounded-lg p-2 space-y-1",children:0===j.length?(0,h.jsx)("p",{className:"text-gray-500 text-sm text-center py-2",children:"No categories found"}):j.map(e=>{const t=c.categories.includes(e._id);return(0,h.jsxs)("button",{type:"button",onClick:()=>v(e._id),className:"w-full flex items-center gap-2 px-3 py-2 rounded-lg text-sm text-left transition-all ".concat(t?"bg-primary-500/20 text-primary-400 border border-primary-500/30":"text-gray-300 hover:bg-dark-200 hover:text-white"),children:[(0,h.jsx)("span",{className:"text-base",children:e.icon||"\ud83d\udcc1"}),(0,h.jsx)("span",{className:"flex-1",children:e.name}),t&&(0,h.jsx)(n.YrT,{className:"w-4 h-4 text-primary-400"}),(0,h.jsx)("span",{className:"text-xs text-gray-500",children:e.videoCount||0})]},e._id)})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tags (comma separated)"}),(0,h.jsx)("input",{type:"text",value:c.tags,onChange:e=>x((0,a.A)((0,a.A)({},c),{},{tags:e.target.value})),className:"input-field",placeholder:"tag1, tag2, tag3"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,h.jsxs)("select",{value:c.status,onChange:e=>x((0,a.A)((0,a.A)({},c),{},{status:e.target.value})),className:"input-field",children:[(0,h.jsx)("option",{value:"public",children:"Public"}),(0,h.jsx)("option",{value:"private",children:"Private"}),(0,h.jsx)("option",{value:"unlisted",children:"Unlisted"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Featured"}),(0,h.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-dark-100 rounded-lg cursor-pointer",children:[(0,h.jsx)("input",{type:"checkbox",checked:c.featured,onChange:e=>x((0,a.A)((0,a.A)({},c),{},{featured:e.target.checked})),className:"rounded"}),(0,h.jsx)("span",{className:"text-gray-300",children:"Featured on homepage"})]})]})]}),(0,h.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,h.jsx)("button",{type:"button",onClick:d,className:"flex-1 btn-secondary",children:"Cancel"}),(0,h.jsx)("button",{type:"submit",disabled:g,className:"flex-1 btn-primary",children:g?"Saving...":"Save Changes"})]})]})]})})},f=()=>{const[e,t]=(0,r.useState)([]),[s,f]=(0,r.useState)(!0),[j,v]=(0,r.useState)({page:1,pages:1,total:0}),[N,w]=(0,r.useState)([]),[k,C]=(0,r.useState)(null),[S,A]=(0,r.useState)(!1),[E,T]=(0,r.useState)(!1),[F,_]=(0,r.useState)(!1),[U,V]=(0,r.useState)(!1),[L,P]=(0,r.useState)(""),[D,z]=(0,r.useState)(!1),[M,R]=(0,r.useState)(""),[G,O]=(0,r.useState)(""),[B,X]=(0,r.useState)(""),[I,Y]=(0,r.useState)("newest"),[K,Q]=(0,r.useState)(1),H=(0,r.useCallback)(async()=>{f(!0);try{const e=await m.Er.getVideos({page:K,limit:50,search:M,status:G,featured:B,sort:I});e.data.success&&(t(e.data.videos),v(e.data.pagination))}catch(e){console.error("Failed to fetch videos:",e),i.Ay.error("Failed to load videos")}finally{f(!1)}},[K,M,G,B,I]);(0,r.useEffect)(()=>{H()},[H]);const J=(0,x.sg)(e=>{R(e),Q(1)},500),q=()=>{const t=parseInt(L);if(!t||t<1)return void i.Ay.error("Enter a valid number");const s=e.slice(0,Math.min(t,e.length)).map(e=>e._id);w(s),z(!1),P(""),i.Ay.success("Selected ".concat(s.length," videos"))},W=e.filter(e=>N.includes(e._id));return(0,h.jsxs)(d.A,{title:"Videos Manager",children:[S&&(0,h.jsx)(p,{onClose:()=>A(!1)}),E&&W.length>0&&(0,h.jsx)(g,{videos:W,onClose:()=>T(!1),onSave:()=>{T(!1),H()}}),F&&W.length>0&&(0,h.jsx)(u,{videos:W,onClose:()=>_(!1),onSave:()=>{_(!1),H()}}),U&&(0,h.jsx)(b,{selectedIds:N,onClose:()=>V(!1)}),k&&(0,h.jsx)(y,{video:k,onClose:()=>C(null),onSave:s=>{t(e.map(e=>e._id===s._id?s:e)),C(null),i.Ay.success("Video updated successfully")}}),(0,h.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 mb-6 border border-dark-100",children:[(0,h.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,h.jsxs)("div",{className:"flex-1 relative",children:[(0,h.jsx)(n.CKj,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500"}),(0,h.jsx)("input",{type:"text",placeholder:"Search videos...",onChange:e=>J(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 text-white"})]}),(0,h.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,h.jsxs)("select",{value:G,onChange:e=>{O(e.target.value),Q(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,h.jsx)("option",{value:"",children:"All Status"}),(0,h.jsx)("option",{value:"public",children:"Public"}),(0,h.jsx)("option",{value:"private",children:"Private"}),(0,h.jsx)("option",{value:"unlisted",children:"Unlisted"})]}),(0,h.jsxs)("select",{value:B,onChange:e=>{X(e.target.value),Q(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,h.jsx)("option",{value:"",children:"All Videos"}),(0,h.jsx)("option",{value:"true",children:"Featured"}),(0,h.jsx)("option",{value:"false",children:"Not Featured"})]}),(0,h.jsxs)("select",{value:I,onChange:e=>{Y(e.target.value),Q(1)},className:"px-4 py-2.5 bg-dark-100 border border-dark-100 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-primary-500",children:[(0,h.jsx)("option",{value:"newest",children:"Newest"}),(0,h.jsx)("option",{value:"oldest",children:"Oldest"}),(0,h.jsx)("option",{value:"views",children:"Most Viewed"}),(0,h.jsx)("option",{value:"title",children:"Title A-Z"})]})]}),(0,h.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,h.jsxs)("button",{onClick:()=>A(!0),className:"px-4 py-2.5 bg-primary-600 hover:bg-primary-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[(0,h.jsx)(n.ayE,{className:"w-4 h-4"}),(0,h.jsx)("span",{className:"hidden sm:inline",children:"Share Links"})]}),(0,h.jsxs)("button",{onClick:()=>V(!0),className:"px-4 py-2.5 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg font-medium transition-colors flex items-center gap-2",children:[(0,h.jsx)(n.a4x,{className:"w-4 h-4"}),(0,h.jsx)("span",{className:"hidden sm:inline",children:"Export"})]}),(0,h.jsxs)(l.N_,{to:"/admin/upload",className:"btn-primary",children:[(0,h.jsx)(n.GGD,{className:"w-5 h-5"}),(0,h.jsx)("span",{className:"hidden sm:inline",children:"Add Video"})]})]})]}),(0,h.jsx)("div",{className:"mt-4 pt-4 border-t border-dark-100",children:(0,h.jsxs)("div",{className:"flex items-center gap-3 flex-wrap",children:[(0,h.jsx)("div",{className:"flex items-center gap-2",children:D?(0,h.jsxs)("div",{className:"flex items-center gap-2",children:[(0,h.jsx)("input",{type:"number",value:L,onChange:e=>P(e.target.value),placeholder:"e.g. 50",className:"w-24 px-3 py-2 bg-dark-100 border border-dark-100 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",onKeyDown:e=>{"Enter"===e.key&&q()}}),(0,h.jsx)("button",{onClick:q,className:"px-3 py-2 bg-blue-600 text-white rounded-lg text-sm",children:(0,h.jsx)(n.YrT,{className:"w-4 h-4"})}),(0,h.jsx)("button",{onClick:()=>{z(!1),P("")},className:"px-3 py-2 bg-dark-100 text-gray-400 rounded-lg text-sm",children:(0,h.jsx)(n.yGN,{className:"w-4 h-4"})})]}):(0,h.jsxs)("button",{onClick:()=>z(!0),className:"px-3 py-2 bg-dark-100 text-gray-400 hover:text-white rounded-lg text-sm transition-colors flex items-center gap-2",children:[(0,h.jsx)(n.Qz2,{className:"w-4 h-4"}),"Select by Number"]})}),N.length>0&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("span",{className:"text-sm text-primary-400 font-medium",children:[N.length," selected"]}),(0,h.jsx)("div",{className:"h-4 w-px bg-dark-100"}),(0,h.jsxs)("button",{onClick:()=>T(!0),className:"px-3 py-2 bg-blue-500/10 text-blue-400 hover:bg-blue-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.WXf,{className:"w-3.5 h-3.5"}),"Bulk Titles"]}),(0,h.jsxs)("button",{onClick:()=>_(!0),className:"px-3 py-2 bg-green-500/10 text-green-400 hover:bg-green-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.cnX,{className:"w-3.5 h-3.5"}),"Bulk Tags"]}),(0,h.jsxs)("button",{onClick:async()=>{if(0!==N.length)try{const e=await m.Er.bulkShareLinks({ids:N,mode:"selected"});if(e.data.success){const t=e.data.videos.map(e=>e.shareUrl).join("\n");await navigator.clipboard.writeText(t),i.Ay.success("Copied ".concat(e.data.videos.length," share links to clipboard"))}}catch(e){i.Ay.error("Failed to copy links")}else i.Ay.error("No videos selected")},className:"px-3 py-2 bg-purple-500/10 text-purple-400 hover:bg-purple-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.nxz,{className:"w-3.5 h-3.5"}),"Copy Links"]}),(0,h.jsxs)("button",{onClick:async()=>{if(0!==N.length)try{const e=await m.Er.bulkShareLinks({ids:N,mode:"selected"});if(e.data.success){const t=e.data.videos.map(e=>"".concat(e.title,"\t").concat(e.shareUrl)).join("\n");await navigator.clipboard.writeText(t),i.Ay.success("Copied ".concat(e.data.videos.length," titles + links (Excel format)"))}}catch(e){i.Ay.error("Failed to copy")}else i.Ay.error("No videos selected")},className:"px-3 py-2 bg-indigo-500/10 text-indigo-400 hover:bg-indigo-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.ydS,{className:"w-3.5 h-3.5"}),"Copy with Titles"]}),(0,h.jsxs)("button",{onClick:async()=>{try{const e=await m.Er.bulkUpdateStatus({ids:N,status:"public"});e.data.success&&(i.Ay.success("Published ".concat(e.data.modifiedCount," videos")),H(),w([]))}catch(e){i.Ay.error("Failed")}},className:"px-3 py-2 bg-green-500/10 text-green-400 hover:bg-green-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.A3x,{className:"w-3.5 h-3.5"}),"Publish"]}),(0,h.jsxs)("button",{onClick:async()=>{try{const e=await m.Er.bulkUpdateStatus({ids:N,status:"private"});e.data.success&&(i.Ay.success("Made ".concat(e.data.modifiedCount," videos private")),H(),w([]))}catch(e){i.Ay.error("Failed")}},className:"px-3 py-2 bg-yellow-500/10 text-yellow-400 hover:bg-yellow-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.F5$,{className:"w-3.5 h-3.5"}),"Make Private"]}),(0,h.jsxs)("button",{onClick:async()=>{if(0!==N.length&&window.confirm("Delete ".concat(N.length," videos? This cannot be undone.")))try{await m.Er.bulkDeleteVideos(N),t(e.filter(e=>!N.includes(e._id))),w([]),i.Ay.success("".concat(N.length," videos deleted"))}catch(s){i.Ay.error("Failed to delete videos")}},className:"px-3 py-2 bg-red-500/10 text-red-500 hover:bg-red-500/20 rounded-lg text-sm transition-colors flex items-center gap-1.5",children:[(0,h.jsx)(n.IXo,{className:"w-3.5 h-3.5"}),"Delete"]}),(0,h.jsx)("button",{onClick:()=>w([]),className:"px-3 py-2 bg-dark-100 text-gray-400 hover:text-white rounded-lg text-sm transition-colors",children:"Clear Selection"})]})]})})]}),(0,h.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100 overflow-hidden",children:[s?(0,h.jsx)(c.A,{}):0===e.length?(0,h.jsx)("div",{className:"text-center py-12",children:(0,h.jsx)("p",{className:"text-gray-400",children:"No videos found"})}):(0,h.jsx)("div",{className:"overflow-x-auto",children:(0,h.jsxs)("table",{className:"w-full",children:[(0,h.jsx)("thead",{className:"bg-dark-300",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{className:"px-4 py-3 text-left",children:(0,h.jsx)("input",{type:"checkbox",onChange:t=>{t.target.checked?w(e.map(e=>e._id)):w([])},checked:N.length===e.length&&e.length>0,className:"rounded"})}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Video"}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Views"}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Status"}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Featured"}),(0,h.jsx)("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400",children:"Date"}),(0,h.jsx)("th",{className:"px-4 py-3 text-right text-sm font-medium text-gray-400",children:"Actions"})]})}),(0,h.jsx)("tbody",{children:e.map(s=>(0,h.jsxs)("tr",{className:"border-t border-dark-100 hover:bg-dark-100/50 transition-colors",children:[(0,h.jsx)("td",{className:"px-4 py-3",children:(0,h.jsx)("input",{type:"checkbox",checked:N.includes(s._id),onChange:()=>{return e=s._id,void w(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e]);var e},className:"rounded"})}),(0,h.jsx)("td",{className:"px-4 py-3",children:(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("img",{src:s.thumbnail,alt:s.title,className:"w-24 h-14 object-cover rounded",onError:e=>{e.target.style.display="none"}}),(0,h.jsxs)("div",{className:"min-w-0",children:[(0,h.jsx)("p",{className:"text-white font-medium truncate max-w-xs",children:s.title}),(0,h.jsx)("p",{className:"text-gray-500 text-sm",children:s.file_code}),s.tags&&s.tags.length>0&&(0,h.jsxs)("div",{className:"flex gap-1 mt-1 flex-wrap",children:[s.tags.slice(0,3).map((e,t)=>(0,h.jsxs)("span",{className:"text-[10px] px-1.5 py-0.5 bg-dark-100 text-gray-500 rounded",children:["#",e]},t)),s.tags.length>3&&(0,h.jsxs)("span",{className:"text-[10px] text-gray-600",children:["+",s.tags.length-3]})]})]})]})}),(0,h.jsx)("td",{className:"px-4 py-3",children:(0,h.jsxs)("span",{className:"flex items-center gap-1 text-gray-300",children:[(0,h.jsx)(n.Vap,{className:"w-4 h-4"}),(0,x.OO)(s.views)]})}),(0,h.jsx)("td",{className:"px-4 py-3",children:(0,h.jsx)("span",{className:"badge ".concat("public"===s.status?"badge-success":"private"===s.status?"badge-danger":"badge-warning"),children:s.status})}),(0,h.jsx)("td",{className:"px-4 py-3",children:(0,h.jsx)("button",{onClick:()=>(async s=>{try{const r=await m.Er.toggleFeatured(s._id);r.data.success&&(t(e.map(e=>e._id===s._id?(0,a.A)((0,a.A)({},e),{},{featured:r.data.featured}):e)),i.Ay.success(r.data.message))}catch(r){i.Ay.error("Failed to update featured status")}})(s),className:"p-2 rounded-lg transition-colors ".concat(s.featured?"bg-yellow-500/20 text-yellow-500":"bg-dark-100 text-gray-500 hover:text-yellow-500"),children:(0,h.jsx)(n.usP,{className:"w-5 h-5",fill:s.featured?"currentColor":"none"})})}),(0,h.jsx)("td",{className:"px-4 py-3 text-gray-400 text-sm",children:(0,x.Yq)(s.uploadDate)}),(0,h.jsx)("td",{className:"px-4 py-3",children:(0,h.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,h.jsx)("button",{onClick:()=>C(s),className:"p-2 hover:bg-dark-100 rounded-lg text-gray-400 hover:text-white transition-colors",children:(0,h.jsx)(n.WXf,{className:"w-4 h-4"})}),(0,h.jsx)("button",{onClick:()=>(async s=>{if(window.confirm('Delete "'.concat(s.title,'"? This cannot be undone.')))try{await m.Er.deleteVideo(s._id),t(e.filter(e=>e._id!==s._id)),i.Ay.success("Video deleted successfully")}catch(a){i.Ay.error("Failed to delete video")}})(s),className:"p-2 hover:bg-red-500/10 rounded-lg text-gray-400 hover:text-red-500 transition-colors",children:(0,h.jsx)(n.IXo,{className:"w-4 h-4"})})]})})]},s._id))})]})}),(0,h.jsx)("div",{className:"p-4 border-t border-dark-100",children:(0,h.jsx)(o.A,{currentPage:j.page,totalPages:j.pages,onPageChange:Q})})]})]})}},6047(e,t,s){s.d(t,{OO:()=>a,Yq:()=>r,sg:()=>l});const a=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",r=e=>{if(!e)return"Unknown";const t=new Date,s=new Date(e);if(isNaN(s.getTime()))return"Unknown";const a=Math.floor((t-s)/1e3);return a<60?"Just now":a<3600?"".concat(Math.floor(a/60),"m ago"):a<86400?"".concat(Math.floor(a/3600),"h ago"):a<604800?"".concat(Math.floor(a/86400),"d ago"):a<2592e3?"".concat(Math.floor(a/604800),"w ago"):a<31536e3?"".concat(Math.floor(a/2592e3),"mo ago"):"".concat(Math.floor(a/31536e3),"y ago")},l=function(e){let t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];clearTimeout(t),t=setTimeout(()=>e(...r),s)}}}}]);
//# sourceMappingURL=608.f1e15186.chunk.js.map