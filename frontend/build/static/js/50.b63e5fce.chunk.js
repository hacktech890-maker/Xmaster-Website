"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[50],{8227(e,t,a){a.d(t,{A:()=>l});var s=a(5043),r=a(6305),n=a(579);const l=e=>{let{placement:t="home_top",className:a=""}=e;const[l,o]=(0,s.useState)(null),c=(0,s.useRef)(null),i=(0,s.useRef)(!1);if((0,s.useEffect)(()=>{(async()=>{try{var e,a;const n=window.innerWidth<768?"mobile":"desktop",l=await r.G.getAdByPlacement(t,n);if(null!==(e=l.data)&&void 0!==e&&e.success&&null!==(a=l.data)&&void 0!==a&&a.ad){o(l.data.ad);try{await r.G.recordAdImpression(l.data.ad._id)}catch(s){}}}catch(n){}})()},[t]),(0,s.useEffect)(()=>{if(!l||!c.current||i.current)return;const e=c.current,t=l.code||l.content||"";if(!t.trim())return;e.innerHTML="",i.current=!0;const a=document.createElement("div");a.innerHTML=t;const s=a.querySelectorAll("script"),r=t.replace(/<script[\s\S]*?<\/script>/gi,"");if(r.trim()){const t=document.createElement("div");t.innerHTML=r,e.appendChild(t)}return s.forEach(t=>{const a=document.createElement("script");Array.from(t.attributes).forEach(e=>{a.setAttribute(e.name,e.value)}),t.textContent&&(a.textContent=t.textContent),t.src&&(a.src=t.src,a.async=!0),e.appendChild(a)}),()=>{e&&(e.innerHTML=""),i.current=!1}},[l]),(0,s.useEffect)(()=>{i.current=!1},[t]),!l)return null;if("image"===l.type||"banner"===l.type){const e=l.imageUrl||l.image||"",t=l.targetUrl||l.url||l.link||"#";return e?(0,n.jsx)("div",{className:"ad-banner flex justify-center ".concat(a),children:(0,n.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer nofollow",onClick:async()=>{try{await r.G.recordAdClick(l._id)}catch(e){}},children:(0,n.jsx)("img",{src:e,alt:l.name||"Advertisement",className:"rounded-lg max-w-full",loading:"lazy"})})}):null}return(0,n.jsx)("div",{className:"ad-banner flex justify-center ".concat(a),children:(0,n.jsx)("div",{ref:c,className:"ad-content"})})}},4533(e,t,a){a.d(t,{A:()=>l});var s=a(5043),r=a(5772),n=a(579);const l=e=>{let{currentPage:t,totalPages:a,onPageChange:l}=e;if(a<=1)return null;return(0,n.jsxs)("div",{className:"flex items-center justify-center gap-1 sm:gap-2 mt-8",children:[(0,n.jsxs)("button",{onClick:()=>l(t-1),disabled:1===t,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,n.jsx)(r.irw,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:"Prev"})]}),(()=>{const e=[];if(a<=5)for(let t=1;t<=a;t++)e.push(t);else{e.push(1);let s=Math.max(2,t-1),r=Math.min(a-1,t+1);t<=3&&(r=Math.min(4,a-1)),t>=a-2&&(s=Math.max(a-3,2)),s>2&&e.push("...");for(let t=s;t<=r;t++)e.push(t);r<a-1&&e.push("..."),e.push(a)}return e})().map((e,a)=>(0,n.jsx)(s.Fragment,{children:"..."===e?(0,n.jsx)("span",{className:"px-2 py-2 text-gray-500 text-sm",children:"..."}):(0,n.jsx)("button",{onClick:()=>l(e),className:"min-w-[36px] h-9 flex items-center justify-center text-sm font-medium rounded-lg transition-colors ".concat(t===e?"bg-primary-600 text-white":"text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 hover:bg-gray-50 dark:hover:bg-dark-100"),children:e})},a)),(0,n.jsxs)("button",{onClick:()=>l(t+1),disabled:t===a,className:"flex items-center gap-1 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg hover:bg-gray-50 dark:hover:bg-dark-100 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[(0,n.jsx)("span",{className:"hidden sm:inline",children:"Next"}),(0,n.jsx)(r.fOo,{className:"w-4 h-4"})]})]})}},1932(e,t,a){a.d(t,{A:()=>d});var s=a(5043),r=a(5475),n=a(5772),l=a(579);const o=e=>e?e>=1e6?(e/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(e/1e3).toFixed(1).replace(/\.0$/,"")+"K":e.toString():"0",c=e=>{if(!e)return"Unknown Date";const t=new Date,a=new Date(e);if(isNaN(a.getTime()))return"Unknown Date";const s=Math.floor((t-a)/1e3);return s<60?"Just now":s<3600?"".concat(Math.floor(s/60),"m ago"):s<86400?"".concat(Math.floor(s/3600),"h ago"):s<604800?"".concat(Math.floor(s/86400),"d ago"):s<2592e3?"".concat(Math.floor(s/604800),"w ago"):s<31536e3?"".concat(Math.floor(s/2592e3),"mo ago"):"".concat(Math.floor(s/31536e3),"y ago")},i="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQwIiBoZWlnaHQ9IjM2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjMWUxZTFlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzY2NiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPk5vIFRodW1ibmFpbDwvdGV4dD48L3N2Zz4=",d=e=>{let{video:t,size:a="normal"}=e;const[d,m]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!1);if(!t)return null;const{_id:u,title:h,thumbnail:p,views:f,duration:v,uploadDate:b,createdAt:y,category:j,slug:w,file_code:N}=t,k=null!==f&&void 0!==f?f:0,M=b||y,C=(e=>{if(!e)return"";if("string"===typeof e&&e.includes(":"))return"00:00"===e||"0:00"===e?"":e;if("number"===typeof e&&e>0){const t=Math.floor(e/60),a=Math.floor(e%60);return"".concat(t,":").concat(a.toString().padStart(2,"0"))}return""})(v),I=(e=>e?"string"===typeof e?"General"===e||24===e.length?null:{name:e,slug:e.toLowerCase().replace(/[^a-z0-9]+/g,"-")}:e.name?{name:e.name,slug:e.slug||e.name.toLowerCase().replace(/[^a-z0-9]+/g,"-")}:null:null)(j),A={small:{title:"text-sm line-clamp-2",meta:"text-xs"},normal:{title:"text-sm sm:text-base line-clamp-2",meta:"text-xs sm:text-sm"},large:{title:"text-lg line-clamp-2",meta:"text-sm"}},S=A[a]||A.normal;return(0,l.jsx)(r.N_,{to:"/watch/".concat(u).concat(w?"/".concat(w):""),className:"group block w-full",children:(0,l.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-xl shadow-lg overflow-hidden transition-all duration-300 hover:shadow-xl hover:scale-[1.02] cursor-pointer",children:[(0,l.jsxs)("div",{className:"relative aspect-video bg-gray-800 overflow-hidden",children:[!g&&!d&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-800 animate-pulse"}),(0,l.jsx)("img",{src:d?i:p&&p.startsWith("http")?p:p&&p.length>3?"https://abyss.to/splash/".concat(p,".jpg"):N?"https://abyss.to/splash/".concat(N,".jpg"):i,alt:h||"Video",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 ".concat(g?"opacity-100":"opacity-0"),loading:"lazy",onError:()=>m(!0),onLoad:()=>x(!0)}),C&&(0,l.jsxs)("div",{className:"absolute bottom-2 right-2 px-2 py-1 bg-black/80 rounded text-white text-xs font-medium flex items-center gap-1",children:[(0,l.jsx)(n.Ohp,{className:"w-3 h-3"}),C]}),I&&(0,l.jsx)("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-black/70 rounded text-white text-[10px] font-medium",children:I.name}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300 flex items-center justify-center",children:(0,l.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full bg-red-600/90 flex items-center justify-center opacity-0 group-hover:opacity-100 transform scale-75 group-hover:scale-100 transition-all duration-300",children:(0,l.jsx)("svg",{className:"w-6 h-6 sm:w-8 sm:h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 20 20",children:(0,l.jsx)("path",{d:"M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"})})})})]}),(0,l.jsxs)("div",{className:"p-2.5 sm:p-3",children:[(0,l.jsx)("h3",{className:"font-medium text-gray-900 dark:text-white group-hover:text-red-600 dark:group-hover:text-red-500 transition-colors ".concat(S.title),children:h||"Untitled Video"}),(0,l.jsxs)("div",{className:"mt-1.5 flex items-center gap-2 sm:gap-3 text-gray-500 dark:text-gray-400 ".concat(S.meta),children:[(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)(n.Vap,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"}),o(k)," views"]}),(0,l.jsx)("span",{children:"\u2022"}),(0,l.jsx)("span",{children:c(M)})]})]})]})})}},958(e,t,a){a.d(t,{A:()=>o,F:()=>l});a(5043);var s=a(1932),r=a(6630),n=a(579);const l=e=>{let{count:t=8,columns:a=4}=e;const s={4:"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4"};return(0,n.jsx)("div",{className:"grid ".concat(s[a]||s[4]," gap-3 sm:gap-4 md:gap-6"),children:[...Array(t)].map((e,t)=>(0,n.jsxs)("div",{className:"bg-white dark:bg-dark-200 rounded-xl overflow-hidden animate-pulse",children:[(0,n.jsx)("div",{className:"aspect-video bg-gray-200 dark:bg-dark-100"}),(0,n.jsxs)("div",{className:"p-3 space-y-2",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 dark:bg-dark-100 rounded w-3/4"}),(0,n.jsx)("div",{className:"h-3 bg-gray-200 dark:bg-dark-100 rounded w-1/2"})]})]},t))})},o=e=>{let{videos:t=[],loading:a=!1,error:l=null,emptyMessage:o="No videos found",columns:c=4}=e;if(a)return(0,n.jsx)(r.A,{});if(l)return(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"text-red-500 mb-2",children:"\u26a0\ufe0f"}),(0,n.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:l})]});if(!t||0===t.length)return(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udfac"}),(0,n.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:o})]});const i={1:"grid-cols-1",2:"grid-cols-1 sm:grid-cols-2",3:"grid-cols-2 sm:grid-cols-2 lg:grid-cols-3",4:"grid-cols-2 sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4",5:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5",6:"grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6"};return(0,n.jsx)("div",{className:"grid ".concat(i[c]||i[4]," gap-3 sm:gap-4 md:gap-6"),children:t.map(e=>(0,n.jsx)(s.A,{video:e},e._id))})}},8050(e,t,a){a.r(t),a.d(t,{default:()=>m});var s=a(5043),r=a(3216),n=a(1344),l=a(6305),o=a(958),c=a(4533),i=a(8227),d=a(579);const m=()=>{const{slug:e}=(0,r.g)(),[t,a]=(0,s.useState)(null),[m,g]=(0,s.useState)([]),[x,u]=(0,s.useState)(!0),[h,p]=(0,s.useState)(1),[f,v]=(0,s.useState)({pages:1,total:0});(0,s.useEffect)(()=>{(async()=>{u(!0);try{var t,s;const r=await l.G.getCategory(e);null!==(t=r.data)&&void 0!==t&&t.success&&a(r.data.category);const n=await l.G.getCategoryVideos(e,{page:h,limit:20});null!==(s=n.data)&&void 0!==s&&s.success&&(g(n.data.videos||[]),n.data.pagination&&v(n.data.pagination))}catch(r){console.error("Failed to fetch category:",r)}finally{u(!1)}})(),window.scrollTo({top:0})},[e,h]);const b=(null===t||void 0===t?void 0:t.name)||(null===e||void 0===e?void 0:e.replace(/-/g," "))||"Category",y=(null===t||void 0===t?void 0:t.icon)||"\ud83d\udcc1",j=(null===t||void 0===t?void 0:t.color)||"#ef4444";return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(n.mg,{children:[(0,d.jsxs)("title",{children:[b," - Xmaster"]}),(0,d.jsx)("meta",{name:"description",content:"Watch ".concat(b," videos on Xmaster.")})]}),(0,d.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:(0,d.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,d.jsx)("div",{className:"mb-8",children:(0,d.jsxs)("div",{className:"flex items-center gap-4",children:[(0,d.jsx)("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl",style:{backgroundColor:"".concat(j,"20")},children:y}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:b}),(0,d.jsxs)("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:[f.total||m.length," videos"]})]})]})}),(0,d.jsx)(i.A,{placement:"category_top",className:"mb-6"}),x?(0,d.jsx)(o.F,{count:12}):(0,d.jsx)(o.A,{videos:m,columns:4,emptyMessage:"No videos found in ".concat(b)}),f.pages>1&&(0,d.jsx)(c.A,{currentPage:h,totalPages:f.pages,onPageChange:e=>{p(e),window.scrollTo({top:0,behavior:"smooth"})}})]})})]})}}}]);
//# sourceMappingURL=50.b63e5fce.chunk.js.map