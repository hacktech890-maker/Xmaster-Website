"use strict";(self.webpackChunkxmaster_frontend=self.webpackChunkxmaster_frontend||[]).push([[434],{5992(e,s,a){a.d(s,{A:()=>o});var t=a(5043),r=a(3216),l=a(5475),d=a(5772),i=a(5187),n=a(579);const c=()=>{const[e,s]=(0,t.useState)(!1),a=(0,r.zy)(),c=(0,r.Zp)(),{logout:o}=(0,i.As)(),x=[{name:"Dashboard",path:"/admin/dashboard",icon:d.V5Y},{name:"Videos",path:"/admin/videos",icon:d.pVQ},{name:"Upload",path:"/admin/upload",icon:d.B88},{name:"Categories",path:"/admin/categories",icon:d.QPV},{name:"Comments",path:"/admin/comments",icon:d.mEP},{name:"Duplicates",path:"/admin/duplicates",icon:d.nxz},{name:"Ads",path:"/admin/ads",icon:d.z8N},{name:"Reports",path:"/admin/reports",icon:d.QsL}],m=()=>{o(),c("/xmaster-admin")},g=()=>(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsx)("div",{className:"p-4 sm:p-6 border-b border-gray-200 dark:border-dark-100",children:(0,n.jsxs)(l.N_,{to:"/admin/dashboard",className:"flex items-center gap-3",children:[(0,n.jsx)("img",{src:"/logo.jpg",alt:"Xmaster",className:"w-10 h-10 rounded-lg object-cover"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Xmaster"}),(0,n.jsx)("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),(0,n.jsx)("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:x.map(e=>{return(0,n.jsxs)(l.N_,{to:e.path,onClick:()=>s(!1),className:"flex items-center gap-3 px-4 py-3 rounded-lg font-medium transition-all ".concat((t=e.path,a.pathname===t?"bg-primary-600 text-white shadow-lg shadow-primary-600/30":"text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100")),children:[(0,n.jsx)(e.icon,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:e.name})]},e.path);var t})}),(0,n.jsxs)("div",{className:"p-4 border-t border-gray-200 dark:border-dark-100 space-y-1",children:[(0,n.jsxs)(l.N_,{to:"/",className:"flex items-center gap-3 px-4 py-3 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-100 rounded-lg transition-all",children:[(0,n.jsx)(d.VSk,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"View Site"})]}),(0,n.jsxs)("button",{onClick:m,className:"flex items-center gap-3 px-4 py-3 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-all w-full",children:[(0,n.jsx)(d.QeK,{className:"w-5 h-5"}),(0,n.jsx)("span",{children:"Logout"})]})]})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>s(!e),className:"fixed top-4 left-4 z-50 md:hidden p-2 bg-white dark:bg-dark-200 border border-gray-200 dark:border-dark-100 rounded-lg shadow-lg",children:e?(0,n.jsx)(d.yGN,{className:"w-5 h-5"}):(0,n.jsx)(d.ND1,{className:"w-5 h-5"})}),e&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>s(!1)}),(0,n.jsx)("aside",{className:"fixed top-0 left-0 h-full w-64 bg-white dark:bg-dark-300 border-r border-gray-200 dark:border-dark-100 z-40 transform transition-transform duration-300 ".concat(e?"translate-x-0":"-translate-x-full"," md:translate-x-0"),children:(0,n.jsx)(g,{})})]})},o=e=>{let{children:s,title:a=""}=e;return(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-400",children:(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)(c,{}),(0,n.jsxs)("div",{className:"flex-1 ml-0 md:ml-64",children:[a&&(0,n.jsx)("div",{className:"bg-white dark:bg-dark-300 border-b border-gray-100 dark:border-dark-100 px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:(0,n.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:a})}),(0,n.jsx)("div",{className:"p-4 sm:p-6 lg:p-8",children:s})]})]})})}},9434(e,s,a){a.r(s),a.d(s,{default:()=>m});var t=a(9379),r=a(5043),l=a(5772),d=a(3768),i=a(6305),n=a(5992),c=a(6630),o=a(579);const x={suggestion:{label:"\ud83d\udca1 Suggestion",bg:"bg-blue-500/10 text-blue-500"},feedback:{label:"\ud83d\udcac Feedback",bg:"bg-green-500/10 text-green-500"},bug:{label:"\ud83d\udc1b Bug Report",bg:"bg-red-500/10 text-red-500"},feature:{label:"\u2728 Feature",bg:"bg-purple-500/10 text-purple-500"},complaint:{label:"\u26a0\ufe0f Complaint",bg:"bg-yellow-500/10 text-yellow-500"},other:{label:"\ud83d\udcdd Other",bg:"bg-gray-500/10 text-gray-500"}},m=()=>{const[e,s]=(0,r.useState)([]),[a,m]=(0,r.useState)({total:0,unread:0,visible:0,hidden:0}),[g,h]=(0,r.useState)(!0),[p,b]=(0,r.useState)("all"),[u,j]=(0,r.useState)(1),[N,y]=(0,r.useState)({pages:1}),[k,f]=(0,r.useState)([]),[v,w]=(0,r.useState)(null),[C,A]=(0,r.useState)(""),[_,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{V()},[p,u]);const V=async()=>{h(!0);try{var e;const a=await i.Er.getComments({page:u,limit:30,filter:p});null!==(e=a.data)&&void 0!==e&&e.success&&(s(a.data.comments||[]),m(a.data.stats||{}),y(a.data.pagination||{pages:1}))}catch(a){d.Ay.error("Failed to load comments")}finally{h(!1)}};return g&&1===u?(0,o.jsx)(n.A,{title:"Comments & Suggestions",children:(0,o.jsx)(c.A,{})}):(0,o.jsxs)(n.A,{title:"Comments & Suggestions",children:[(0,o.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 border border-dark-100",children:[(0,o.jsx)("p",{className:"text-gray-400 text-xs",children:"Total"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-white mt-1",children:a.total})]}),(0,o.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 border border-dark-100",children:[(0,o.jsx)("p",{className:"text-gray-400 text-xs",children:"Unread"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-yellow-500 mt-1",children:a.unread})]}),(0,o.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 border border-dark-100",children:[(0,o.jsx)("p",{className:"text-gray-400 text-xs",children:"Visible"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-green-500 mt-1",children:a.visible})]}),(0,o.jsxs)("div",{className:"bg-dark-200 rounded-xl p-4 border border-dark-100",children:[(0,o.jsx)("p",{className:"text-gray-400 text-xs",children:"Hidden"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-red-500 mt-1",children:a.hidden})]})]}),(0,o.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(l.K7R,{className:"w-4 h-4 text-gray-400"}),["all","unread","visible","hidden"].map(e=>(0,o.jsx)("button",{onClick:()=>{b(e),j(1)},className:"px-3 py-1.5 text-sm rounded-lg transition-colors ".concat(p===e?"bg-primary-600 text-white":"bg-dark-100 text-gray-400 hover:text-white"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))]}),k.length>0&&(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsxs)("span",{className:"text-sm text-gray-400",children:[k.length," selected"]}),(0,o.jsxs)("button",{onClick:async()=>{if(0!==k.length&&window.confirm("Delete ".concat(k.length," comments?")))try{await i.Er.bulkDeleteComments(k),s(e.filter(e=>!k.includes(e._id))),f([]),d.Ay.success("".concat(k.length," comments deleted")),V()}catch(a){d.Ay.error("Failed to delete")}},className:"px-3 py-1.5 text-sm bg-red-600 text-white rounded-lg hover:bg-red-700",children:[(0,o.jsx)(l.IXo,{className:"w-4 h-4 inline mr-1"}),"Delete Selected"]})]})]}),0===e.length?(0,o.jsxs)("div",{className:"bg-dark-200 rounded-xl border border-dark-100 p-12 text-center",children:[(0,o.jsx)(l.mEP,{className:"w-12 h-12 text-gray-600 mx-auto mb-3"}),(0,o.jsx)("p",{className:"text-gray-400",children:"No comments found"})]}):(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3 px-4 py-2",children:[(0,o.jsx)("input",{type:"checkbox",checked:k.length===e.length&&e.length>0,onChange:()=>{k.length===e.length?f([]):f(e.map(e=>e._id))},className:"rounded border-gray-600"}),(0,o.jsx)("span",{className:"text-sm text-gray-400",children:"Select All"})]}),e.map(r=>{const n=x[r.category]||x.other,c=v===r._id;return(0,o.jsxs)("div",{className:"bg-dark-200 rounded-xl border transition-all ".concat(r.isRead?"border-dark-100":"border-yellow-500/30 bg-yellow-500/5"),onClick:()=>{r.isRead||(async a=>{try{await i.Er.markCommentRead(a),s(e.map(e=>e._id===a?(0,t.A)((0,t.A)({},e),{},{isRead:!0}):e))}catch(r){}})(r._id)},children:[(0,o.jsxs)("div",{className:"p-4 flex items-start gap-3",children:[(0,o.jsx)("input",{type:"checkbox",checked:k.includes(r._id),onChange:()=>{return e=r._id,void f(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e]);var e},className:"rounded border-gray-600 mt-1",onClick:e=>e.stopPropagation()}),!r.isRead&&(0,o.jsx)("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mt-2 flex-shrink-0"}),(0,o.jsx)("div",{className:"flex-1 min-w-0",children:(0,o.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,o.jsxs)("span",{className:"text-white font-medium text-sm flex items-center gap-1",children:[(0,o.jsx)(l.JXP,{className:"w-3.5 h-3.5 text-gray-400"}),r.name]}),(0,o.jsxs)("span",{className:"text-gray-500 text-xs flex items-center gap-1",children:[(0,o.jsx)(l.pHD,{className:"w-3 h-3"}),r.email]}),(0,o.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat(n.bg),children:n.label})]}),(0,o.jsxs)("p",{className:"text-gray-300 text-sm mt-1 flex items-center gap-1",children:[(0,o.jsx)(l.cnX,{className:"w-3.5 h-3.5 text-gray-500 flex-shrink-0"}),(0,o.jsx)("span",{className:"font-medium",children:r.reason})]}),(0,o.jsx)("p",{className:"text-gray-400 text-sm mt-2 line-clamp-2",children:r.message}),(0,o.jsxs)("p",{className:"text-gray-600 text-xs mt-2 flex items-center gap-1",children:[(0,o.jsx)(l.Ohp,{className:"w-3 h-3"}),(g=r.createdAt,g?new Date(g).toLocaleString():"")]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(0,o.jsx)("button",{onClick:l=>{l.stopPropagation(),(async r=>{try{var l;const n=await i.Er.toggleCommentVisibility(r);null!==(l=n.data)&&void 0!==l&&l.success&&(s(e.map(e=>e._id===r?(0,t.A)((0,t.A)({},e),{},{isVisible:n.data.isVisible,isRead:!0}):e)),m((0,t.A)((0,t.A)({},a),{},{visible:n.data.isVisible?a.visible+1:a.visible-1,hidden:n.data.isVisible?a.hidden-1:a.hidden+1})),d.Ay.success(n.data.message))}catch(n){d.Ay.error("Failed to toggle visibility")}})(r._id)},className:"p-2 rounded-lg transition-colors ".concat(r.isVisible?"bg-green-500/20 text-green-500 hover:bg-green-500/30":"bg-gray-500/20 text-gray-500 hover:bg-gray-500/30"),title:r.isVisible?"Hide from public":"Show to public",children:r.isVisible?(0,o.jsx)(l.Vap,{className:"w-4 h-4"}):(0,o.jsx)(l._NO,{className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:e=>{e.stopPropagation(),w(c?null:r._id)},className:"p-2 text-gray-400 hover:text-white hover:bg-dark-100 rounded-lg transition-colors",children:c?(0,o.jsx)(l.wAb,{className:"w-4 h-4"}):(0,o.jsx)(l.fK4,{className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:l=>{l.stopPropagation(),(async r=>{if(window.confirm("Delete this comment?"))try{await i.Er.deleteComment(r),s(e.filter(e=>e._id!==r)),d.Ay.success("Comment deleted"),m((0,t.A)((0,t.A)({},a),{},{total:a.total-1}))}catch(l){d.Ay.error("Failed to delete")}})(r._id)},className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors",children:(0,o.jsx)(l.IXo,{className:"w-4 h-4"})})]})]})})]}),c&&(0,o.jsxs)("div",{className:"px-4 pb-4 border-t border-dark-100 pt-4 ml-8",children:[(0,o.jsxs)("div",{className:"bg-dark-100 rounded-lg p-4 mb-3",children:[(0,o.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2",children:"Full Message"}),(0,o.jsx)("p",{className:"text-gray-300 text-sm whitespace-pre-wrap",children:r.message})]}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm mb-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-gray-500",children:"IP:"})," ",(0,o.jsx)("span",{className:"text-gray-400",children:r.ip||"N/A"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"text-gray-500",children:"Status:"})," ",(0,o.jsx)("span",{className:r.isVisible?"text-green-500":"text-red-500",children:r.isVisible?"Visible":"Hidden"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{className:"text-xs text-gray-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[(0,o.jsx)(l.Pj4,{className:"w-3 h-3"}),"Admin Note"]}),_===r._id?(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{type:"text",value:C,onChange:e=>A(e.target.value),className:"flex-1 px-3 py-2 bg-dark-100 border border-dark-100 rounded-lg text-white text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"Add a note...",autoFocus:!0}),(0,o.jsx)("button",{onClick:()=>(async a=>{try{await i.Er.addCommentNote(a,C),s(e.map(e=>e._id===a?(0,t.A)((0,t.A)({},e),{},{adminNote:C,isRead:!0}):e)),S(null),A(""),d.Ay.success("Note saved")}catch(r){d.Ay.error("Failed to save note")}})(r._id),className:"px-3 py-2 bg-primary-600 text-white text-sm rounded-lg hover:bg-primary-700",children:(0,o.jsx)(l.YrT,{className:"w-4 h-4"})}),(0,o.jsx)("button",{onClick:()=>{S(null),A("")},className:"px-3 py-2 bg-dark-100 text-gray-400 text-sm rounded-lg hover:text-white",children:(0,o.jsx)(l.yGN,{className:"w-4 h-4"})})]}):(0,o.jsx)("button",{onClick:()=>{S(r._id),A(r.adminNote||"")},className:"text-sm text-gray-500 hover:text-white transition-colors",children:r.adminNote||"Click to add note..."})]})]})]},r._id);var g})]}),N.pages>1&&(0,o.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,o.jsx)("button",{onClick:()=>j(e=>Math.max(1,e-1)),disabled:1===u,className:"px-4 py-2 text-sm bg-dark-100 text-gray-400 rounded-lg disabled:opacity-50",children:"Previous"}),(0,o.jsxs)("span",{className:"px-4 py-2 text-sm text-gray-500",children:["Page ",u," of ",N.pages]}),(0,o.jsx)("button",{onClick:()=>j(e=>e+1),disabled:u===N.pages,className:"px-4 py-2 text-sm bg-dark-100 text-gray-400 rounded-lg disabled:opacity-50",children:"Next"})]})]})}}}]);
//# sourceMappingURL=434.bb3893eb.chunk.js.map